<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Pomelo Notes | Xenojoshua</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://xenojoshua.com/js/jquery.min.js"></script>
  <script src="https://xenojoshua.com/js/bootstrap.min.js"></script>
  <script src="https://xenojoshua.com/js/header.js"></script>
  <script src="https://xenojoshua.com/js/toc.js"></script>
  <link href="https://xenojoshua.com//2013/01/pomelo-notes/" rel="canonical" />
  <link href="https://xenojoshua.com/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://xenojoshua.com/css/theme.css" rel="stylesheet">
  <link href="https://xenojoshua.com/css/syntax.css" rel="stylesheet">
  <link href="https://xenojoshua.com/css/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <link href="https://xenojoshua.com/favicon.ico?" type="image/x-icon" rel="shortcut icon">
  <style>
    /* Enhance table style */
    table {
      border: 2px solid #4F7849;
      background-color: #EEEEEE;
      width: 100%;
      text-align: center;
      border-collapse: collapse;
    }
    table td, table.comicGreen th {
      border: 1px solid #4F7849;
      padding: 3px 5px;
    }
    table tbody td {
      font-size: 14px;
      color: #4F7849;
    }
    table tr:nth-child(even) {
      background: #CEE0CC;
    }
    table thead {
      background: #4F7849;
      border-bottom: 1px solid #444444;
    }
    table thead th {
      font-size: 16px;
      font-weight: bold;
      color: #FFFFFF;
      text-align: center;
      border-left: 2px solid #D0E4F5;
      padding: 3px 5px;
    }
    table thead th:first-child {
      border-left: none;
    }
    table tfoot td {
      font-size: 21px;
    }

    /* Enhance pre style */
    pre {
      color: #FFFFFF;
      background-color: #000000;
      border-color: #000000;
    }

    /* Image bg color white while dark background */
    img {
      background-color: #FFFFFF;
    }

    /* Keep gist style clean */
    .gist table tr:nth-child(even) {
      background: #FFFFFF;
    }
    .gist td, th {
      border: none;
    }
  </style>
</head>

<body>

  
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11349149-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


  

 <script type="text/javascript">
   var host = "xenojoshua.com";
   if ((host == window.location.host) && (window.location.protocol != "https:"))
     window.location.protocol = "https";
 </script>
 <script type="text/javascript">
  WebFontConfig = {
    google: {
      families: ['Ubuntu::latin']
    }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })();
</script>

  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="https://xenojoshua.com/">Xenojoshua</a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a href="https://xenojoshua.com/">/home</a></li>
          <li><a href="https://xenojoshua.com/archive/">/archive</a></li>
          <li><a href="https://xenojoshua.com/categories/">/categories</a></li>
          <li><a href="https://xenojoshua.com/tags/">/tags</a></li>
          <li><a href="https://xenojoshua.com/feed.xml" target="_blank">/rss</a></li>
          <li><a href="https://xenojoshua.com/about/">/about</a></li>
        </ul>
      </div>
    </div>
  </nav>


<div class="wrapper">
  <div class="content">
    <div class="container container-center">
      <div class="row">
        <div class="col-md-8">
          <div class="article">
            <div class="well">
              <h1><a href="https://xenojoshua.com/2013/01/pomelo-notes/">Pomelo Notes</a></h1>
              <div class="post-meta">
                <div class="post-time">
                  <i class="fa fa-calendar"></i>
                  <time>09 Jan 2013</time>
                </div>
                <ul>
                  
                    <li><a href="https://xenojoshua.com/tag/JavaScript">JavaScript</a></li>
                  
                    <li><a href="https://xenojoshua.com/tag/NetEase-Pomelo">NetEase-Pomelo</a></li>
                  
                    <li><a href="https://xenojoshua.com/tag/Node.js">Node.js</a></li>
                  
                </ul>
              </div>
              <div class="post-content">
                <p>开始学习以nodejs为技术支持的网易开源游戏服务器pomelo，撰文权作笔记。</p>
<h2>Phase 0. 目录</h2>
<ul>
<li><a href="#phaseI">Phase I. 了解Pomelo</a></li>
<li><a href="#phaseII">Phase II. 学习Pomelo之前</a></li>
<li><a href="#phaseIII">Phase III. Pomelo使用的第三方模块</a>
<ul>
<li><a href="#phaseIII.1">其他第三方组件</a></li>
</ul>
</li>
<li><a href="#phaseIV">Phase IV. 学习pomelo</a>
<ul>
<li><a href="#phaseIV.1">服务器的配置和启动</a></li>
<li><a href="#phaseIV.2">Session控制</a></li>
<li><a href="#phaseIV.3">frontend和backend之间的RPC</a></li>
<li><a href="#phaseIV.4">服务器的监控</a></li>
</ul>
</li>
</ul>
<h2><a name="phaseI"></a>Phase I. 了解Pomelo</h2>
<p>在学习pomelo之前，我们需要对pomelo有一个大略的了解。首先是资料的来源，pomelo<a style="line-height: 12px;" href="https://github.com/NetEase/pomelo/wiki/Home-in-Chinese" target="_blank">中文wiki主页</a>，几乎所有你需要的子文档都在这个入口。接下来我们可以从<a title="pomelo介绍" href="https://github.com/NetEase/pomelo/wiki/pomelo%E4%BB%8B%E7%BB%8D" target="_blank">《pomelo介绍》</a>入手，大致了解下pomelo是什么。接下来是<a title="pomelo架构概览" href="https://github.com/NetEase/pomelo/wiki/pomelo%E6%9E%B6%E6%9E%84%E6%A6%82%E8%A7%88" target="_blank">《pomelo架构概览》</a>，来了解pomelo的架构，大致由哪几部分组成，它们分别负责做什么事情。</p>
<p>了解了基本知识之后，我们接下来可以通过<a title="pomelo快速使用指南" href="https://github.com/NetEase/pomelo/wiki/pomelo%E5%BF%AB%E9%80%9F%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97" target="_blank">《pomelo快速使用指南》</a>，学习如何安装pomelo，如何创建pomelo项目，如何启动、查看、关闭服务器。之后，我们需要通过<a title="pomelo启动流程" href="https://github.com/NetEase/pomelo/wiki/pomelo%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B" target="_blank">《pomelo启动流程》</a>了解，在我们启动pomelo服务器之后，pomelo在启动流程中干了点什么，以及了解各种类型的组件。</p>
<p>关于pomelo的性能，官方有一份测试数值，《<a title="pomelo性能参考" href="https://github.com/NetEase/pomelo/wiki/pomelo%E6%80%A7%E8%83%BD%E5%8F%82%E8%80%83" target="_blank">pomelo性能参考</a>》。</p>
<p>此外，还有两个很有用的地方，就是pomelo的github问题列表，分为中文和英文两个：<a href="https://github.com/NetEase/pomelo/issues" target="_blank">https://github.com/NetEase/pomelo/issues</a> 和 <a href="https://github.com/NetEase/pomelo-cn/issues" target="_blank">https://github.com/NetEase/pomelo-cn/issues</a></p>
<h2><a name="phaseII"></a>Phase II. 学习Pomelo之前</h2>
<p>一开始我想说网易的文档写的不错，至少我能看到很多很多文档。看完之后发现，真TM垃圾，几篇文章你看着貌似不同，其实讲的都是差不多的东西。我很想在这里写，请读XXX文章，然后你就会Pomelo了，至少这篇文章把事情讲清楚了，但是很遗憾的是没有。《<a title="Pomelo Framework" href="https://github.com/NetEase/pomelo/wiki/Pomelo-Framework" target="_blank">Pomelo Framework</a>》这篇文章其实和<a title="pomelo架构概览" href="https://github.com/NetEase/pomelo/wiki/pomelo%E6%9E%B6%E6%9E%84%E6%A6%82%E8%A7%88" target="_blank">《pomelo架构概览》</a>这篇文章讲的内容差不多，都是简单描述了下pomelo大致的结构组成，以及每个组件的一些设计思想。我不能说写得不好，这些文章有其自己的作用，但是，这两篇文章最大的问题就是过于抽象。举个例子来说，你要去买房，中介扔了两张房屋设计图，你看了就明白屋子的光照、朝向、下水、空间感、共用部分，等等细节了？不可能。这种房子你敢买？</p>
<p>好了，吐槽就到这里，总之，如果需要对pomelo有一个简单概念，并了解其中的结构的话，前述的两篇文章还可以，接下来的学习，还是要靠自己写demo以及读代码来解决。</p>
<h2><a name="phaseIII"></a>Phase III. Pomelo使用的第三方模块</h2>
<p>Pomelo使用了express作为其前端web框架。而后端则没有使用任何第三方的模块。读者可以</p>
<p>ls -l game-server/node_modules<br />
ls -l web-server/node_modules</p>
<p>来查看第三方模块。</p>
<p>这里需要提的是express可以使用jade作为其前端显示渲染组件，而其默认在express安装的时候是不安装的，这里需要读者手动进行安装：</p>
<p>cd web-server/node_modules/express<br />
npm install jade</p>
<p>这样就可以了，否则在运行express的时候，它会提示你模块jade无法找到。</p>
<p>此外，如果你在写nodejs后端程序的时候也需要用到模板引擎jade的话，也需要安装：</p>
<p>cd game-server<br />
npm install jade</p>
<p>在这篇文章中，我就不详细描述jade和express的使用了，请参考我写的文章：</p>
<ul>
<li><a title="Jade – JavaScript Template Engine" href="http://xenojoshua.com/2013/01/javascript-template-engine-jade/" target="_blank">Jade - JavaScript Template Engine</a></li>
<li><a title="Permalink to express – Web application framework for node" href="http://xenojoshua.com/2013/01/express-web-application-framework-for-node/" rel="bookmark">Express – Web application framework for node</a></li>
</ul>
<p>我会持续更新，此外，在pomelo学习中，如果我用到了第三方模块组件的话，我会在下面附加内容，持续更新。</p>
<h4><a name="phaseIII.1"></a>其他第三方组件</h4>
<ul>
<li>forever - Pomelo的服务器使用pomelo原生命令启动，内建有daemon参数，但是nodejs原生的web应用则使用express，没有办法原生作为daemon启动。这里我们就需要使用forever了。github：<a href="https://github.com/nodejitsu/forever" target="_blank">https://github.com/nodejitsu/forever</a>作者的官博：<a href="http://blog.nodejitsu.com/keep-a-nodejs-server-up-with-forever" target="_blank">http://blog.nodejitsu.com/keep-a-nodejs-server-up-with-forever</a></li>
<li>jade - javascript的模板引擎，github：<a href="https://github.com/visionmedia/jade#readme" target="_blank">https://github.com/visionmedia/jade</a></li>
<li>async - 非常好用的异步执行、顺序执行类包。当然，它能做的事情远不止如此，github：<a href="https://github.com/caolan/async" target="_blank">https://github.com/caolan/async</a></li>
<li>Redis - Redis数据库的nodejs客户端，github：<a href="https://github.com/mranney/node_redis" target="_blank">https://github.com/mranney/node_redis</a></li>
<li>moment - 一个非常好用的时间组件，网站：<a href="http://momentjs.com/" target="_blank">http://momentjs.com/</a></li>
<li>crc - nodejs的CRC实现，github：<a href="https://github.com/alexgorbatchev/node-crc" target="_blank">https://github.com/alexgorbatchev/node-crc</a></li>
<li>crypto - 这个貌似是官方自带的？<a href="http://nodejs.org/api/crypto.html" target="_blank">http://nodejs.org/api/crypto.html</a></li>
<li>log4js - nodejs的日志工具，github：<a href="https://github.com/nomiddlename/log4js-node" target="_blank">https://github.com/nomiddlename/log4js-node</a></li>
</ul>
<h2><a name="phaseIV"></a>Phase IV. 学习pomelo</h2>
<h3><a name="phaseIV.1"></a>服务器的配置和启动</h3>
<h4>configure</h4>
<p>这个函数我觉得叫configure这个名字未免有点歧义，它所做的事情远远超过了config的范畴。我对它的理解是，在服务器启动之前针对某一类（或全体类型）服务器的初始化事件。它包含三个参数，第一个是针对的环境，可以写多个用"|"分隔，e.g 'production|development'；第二个是针对的服务器类型，同样可以使用"|"分隔，e.g 'game'；第三个参数是真实执行的操作函数。</p>
<p>这个函数还有一个非常有用的地方，就是将很多服务器的相同的初始化逻辑写在一个公共的configure函数中，将初始化好的资源用set写入到app中，然后在对应的服务器代码中get出来，就能直接用了。在我写的demo中，我将初始化连接好的redisClient在configure中处理了。</p>
<p>[codesyntax lang="javascript"]</p>
<pre>// app configure
app.configure('production|development', function() {
    // route configures
    var gameRouter = rsloader.loadCode('GameRouter');
    app.route('game', gameRouter.route);
    // filter configures
    app.filter(pomelo.timeout());
    // redis
    app.set('redis', rclient);
});</pre>
<p>[/codesyntax]</p>
<h4>route</h4>
<p>路由，在服务器接收到某个请求的时候，针对某一类型服务器进行的分发策略。两个参数，第一个是服务器类型名，第二个是路由函数。</p>
<p>[codesyntax lang="javascript"]</p>
<pre>var GameRouter = function() {};
GameRouter.router = rsloader.loadCode('Router');
GameRouter.route = function(session, msg, app, callback) {
    var roomId = session.get('roomId'); // room id
    if (roomId == null || !roomId) {
        // callback(new Error('[GameRouter] Cannot find room id in session!'));
        throw new Error('[GameRouter] Cannot find room id in session!');
    } else {
        var server = GameRouter.router.routeServerViaId(app, roomId, 'game');
        callback(null, server.id);
    }
};

module.exports = GameRouter;</pre>
<p>[/codesyntax]</p>
<h4>filter</h4>
<p>对于filter了解不多，现在用的只有一个timeout。请参照configure部分的示例代码。</p>
<h4>set / get</h4>
<p>set后，get出来，这个就不多说了。这里要提的只有一点，set还有第三个参数，如果给true的话，则可以直接在app中访问。</p>
<p>[codesyntax lang="javascript"]</p>
<pre>app.set('redis', redisClient);
app.get('redis'); // redisClient
app.set('redis', redisClient, true);
app.redis; // redisClient</pre>
<p>[/codesyntax]</p>
<h3><a name="phaseIV.2"></a>Session控制</h3>
<p>session在一个有状态的服务器中起着非常重要的作用，接下来我们就看下在pomelo中session是如何使用的。</p>
<h4>session的获得</h4>
<p>在充当连接的frontend服务器上，每个请求都能直接获取到session：</p>
<p>[codesyntax lang="javascript"]</p>
<pre>/**
 * Create a room.
 * @param  {Object}   msg     request message
 * @param  {Object}   session current session object
 * @param  {Function} next    next stemp callback
 * @return {Void}
 */
proto.createRoom = function(msg, session, next) {
    ...
};</pre>
<p>[/codesyntax]</p>
<p>此外，在frontend服务器上，也能通过Application的sessionService来执行获得、创建session等一系列的操作。具体的API请参考源代码，这里提供文件位置：node_modules/pomelo/lib/common/service/sessionService.js。</p>
<p>[codesyntax lang="javascript"]</p>
<pre>var GateHandler = function GateHandler(app) {
    ...
    this.sessionService = app.get('sessionService');
};</pre>
<p>[/codesyntax]</p>
<h4>session的存取</h4>
<p>这里需要了解的一点，session分为本地和global两种，在每个frontend请求中或得到的，和从sessionService中获得到的session对象都是一个本地session对象，你可以理解为一个只读的session对象，在对本地对象进行操作之后，如果需要将其更新到其他API访问得到的global对象中的话，需要额外的push操作。</p>
<p>[codesyntax lang="javascript"]</p>
<pre>session.set('userId', 21);
session.get('userId'); // 21
session.push('userId', function(err) { // push single key
    if (err != null) {
        console.log('Push session "userId" to global failed!');
    } else {
        console.log('Push session "userId" to global succeeded!');
    }
});
session.pushAll(); // push all</pre>
<p>[/codesyntax]</p>
<h4>后端服务器中的session</h4>
<p>前面我们说的session操作，都是在frontend服务器中，也就是和客户端直接连接的服务器中，而根据pomelo的设计，后端的远程调用服务器(RPC)是无法访问global session的。也就是说，backend服务器无法在其代码中直接访问和操作global session。当然，pomelo还是提供了方法让我们能够操作global session，下面就来看点例子：</p>
<p>我们可以使用tricky方法在backend的remote服务器上获得到sessionService。在app.js，总启动脚本中，添加以下代码（这里我们假设远程服务器名为game）。</p>
<p>[codesyntax lang="javascript"]</p>
<pre>app.configure('production|development', 'game', function() {
    app.load(pomelo.session, app.get('sessionConfig'));
};</pre>
<p>[/codesyntax]</p>
<p>然后你就会很惊奇地发现，在gameRemote的app中，有了sessionService这个对象。但是，这其实是没有意义的，因为这个sessionService和frontend服务器中的sessionService不是一个东西，他们也无法互相同步数据。</p>
<p>所以，官方提供给我们的是其他方法：</p>
<p>[codesyntax lang="javascript"]</p>
<pre>var GameRemote = function GameRemote(app) {
    ...
    this.localSessionService = this.app.components.__localSession__;
};

var proto = GameRemote.prototype;

proto.resetPlayerSession = function(roomId, callback) {
    ...
    this.localSessionService.pushAll(info.frontendId, info.sessionId, {'roomId': null, 'playing': false}, function(err, result) {
        ...
    });
};</pre>
<p>[/codesyntax]</p>
<p>这里我们使用的是remote服务器中的local session，使用其push功能，将内容更新到global session中。当然，这个local session还有很多其他API，这里给出源代码地址：node_modules/pomelo/lib/common/service/localSessionService.js</p>
<h3><a name="phaseIV.3"></a>frontend和backend之间的RPC</h3>
<p>从结构上来看，frontend作为承载连接的服务器和backend后端的逻辑服务器分开，对于进行横向扩展有非常好的效果，所以一般都是需要有frontend和backend两种服务器分离的。那么这里就牵涉到两者之间相互交流的RPC调用了。在pomelo里，RPC调用被封装得非常容易使用，看看例子就明白了，这里需要明确的只有一点，就是rpc调用在frontend侧，需要多传入一个session参数，这个参数不会被backend接收到，一般是用来储存route逻辑需要的一些信息。</p>
<p>[codesyntax lang="javascript"]</p>
<pre>// frontend连接服务器：gateHandler.js
/**
 * Join a room.
 * @param  {Object}   msg     request message
 * @param  {Object}   session current session object
 * @param  {Function} next    next stemp callback
 * @return {Void}
 */
proto.joinRoom = function(msg, session, next) {
    ...
    this.app.rpc.game.gameRemote.join(session, session.id, session.frontendId, roomId, this.app.get('serverId'), userId, userName, function(err, reply) {
        ...
    });
};
// backend逻辑服务器：gameRemote.js
/**
 * Join into a room.
 * @param {Number} sessionId
 * @param {Number} frontendId
 * @param {Number} roomId
 * @param {String} serverId
 * @param {Number} userId
 * @param {String} userName
 * @param {Function} callback
 * @return {Void}
 */
proto.join = function(sessionId, frontendId, roomId, serverId, userId, userName, callback) {
    ...
};</pre>
<p>[/codesyntax]</p>
<h3><a name="phaseIV.4"></a>服务器的监控</h3>
<h4>Pomelo官方提供的监控工具</h4>
<p>官方提供的监控工具一共有三个：</p>
<ul>
<li><span style="line-height: 12px;" data-mce-mark="1">pomelo-monitor：<a href="https://github.com/NetEase/pomelo-monitor" target="_blank">https://github.com/NetEase/pomelo-monitor</a></span></li>
<li>pomelo-admin：<a href="https://github.com/NetEase/pomelo-admin" target="_blank">https://github.com/NetEase/pomelo-admin</a></li>
<li>pomelo-admin-web：<a href="https://github.com/NetEase/pomelo-admin-web" target="_blank">https://github.com/NetEase/pomelo-admin-web</a></li>
</ul>
<p>这三者，pomelo-monitor是最基础的工具，它提供了系统级别的性能监控api和单服务器级别的node节点监控api。然后pomelo-admin是建筑在它之上的一个监控系统组件，允许第三方为它添加监控模块和脚本，并能插入到某个pomelo服务器的运行中，进行实时监控。pomelo-admin-web是一个基于express的网页pomelo-admin界面，它没有什么很实质的功能，只是将pomelo-admin收集的数据进行展示。</p>
<p>pomelo-minitor的使用请参照官方文档中的范例，基本上就没问题了，其中有几个bug，请参考这里：<a href="https://github.com/NetEase/pomelo-cn/issues/93" target="_blank">https://github.com/NetEase/pomelo-cn/issues/93</a>。pomelo-admin的使用请参照下面的代码，将其插入到pomelo服务器的app.js文件中，在服务器运行之前执行。pomelo-admin-web基本上是一个单独的web服务器，请参照官方文档中的方法将其启动。</p>
<p>[codesyntax lang="javascript"]</p>
<pre>// dev monitor
app.configure('development', function() {
    app.enable('systemMonitor'); // enable pomelo-admin (viewable with pomelo-admin-web)
});</pre>
<p>[/codesyntax]</p>
<p>此外，如果需要启动官方自带的RPC日志和FORWARD日志的话，需要一点小改动。查看了源代码你会发现rpc日志和forward日志都是用info级别函数打出来的，而这两个日志的级别是配置在game-server/config/log4js.js里的levels这个字段里的，将其配置为info或低于info的级别都可以。</p>
<p>而rpc日志还有个bug，具体请参考这里：<a href="https://github.com/NetEase/pomelo-cn/issues/95" target="_blank">https://github.com/NetEase/pomelo-cn/issues/95</a></p>
<p>修改node_modules/pomelo/lib/application.js:139：</p>
<p>[codesyntax lang="javascript"]</p>
<pre>// before
    this.load(pomelo.proxy, this.get('proxyConfig'));
// after
    var proxyConfig = this.get('proxyConfig');
    if (typeof proxyConfig == 'undefined' &amp;&amp; this.get('env') == 'development') {
        proxyConfig = {enableRpcLog: true};
    }
    this.load(pomelo.proxy, proxyConfig);</pre>
<p>[/codesyntax]</p>
<p>这样rpc和forward日志就正常运作了，pomelo-admin-web里的这两个监控项也不再是白板了。</p>
<p>&nbsp;</p>

              </div>
              
              <div id="disqus_thread">
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
              </div>
              
            </div>
          </div>
        </div>
        <div class="col-md-4 hidden-xs">
          <div class="sidebar ">
  <h2>Recent Posts</h2>
  <ul>
    
    <li><a href="/2019/05/grpc-note/">gRPC Notes</a></li>
    
    <li><a href="/2019/04/kafka-note/">Kafka Notes</a></li>
    
    <li><a href="/2019/04/message-queue-design/">消息队列设计精要 - 美团点评技术团队</a></li>
    
    <li><a href="/2019/04/elasticsearch-note/">Elasticsearch Notes</a></li>
    
    <li><a href="/2019/04/jaeger-note/">Jaeger Notes</a></li>
    
  </ul>
</div>

<div class="sidebar">
  <h2>Categories</h2>
  <ul>
    
      <li><a href="/category/Linux">Linux</a></li>
    
      <li><a href="/category/Stress & Scaling">Stress & Scaling</a></li>
    
      <li><a href="/category/PHP">PHP</a></li>
    
      <li><a href="/category/IDE">IDE</a></li>
    
      <li><a href="/category/Wordpress">Wordpress</a></li>
    
      <li><a href="/category/SEO">SEO</a></li>
    
      <li><a href="/category/Version Control">Version Control</a></li>
    
      <li><a href="/category/HTML & CSS">HTML & CSS</a></li>
    
      <li><a href="/category/Trash">Trash</a></li>
    
      <li><a href="/category/Apache">Apache</a></li>
    
      <li><a href="/category/Memcache">Memcache</a></li>
    
      <li><a href="/category/Net Services">Net Services</a></li>
    
      <li><a href="/category/Java">Java</a></li>
    
      <li><a href="/category/MicroBlog">MicroBlog</a></li>
    
      <li><a href="/category/JavaScript">JavaScript</a></li>
    
      <li><a href="/category/DB">DB</a></li>
    
      <li><a href="/category/Something">Something</a></li>
    
      <li><a href="/category/Methodology & Thinking">Methodology & Thinking</a></li>
    
      <li><a href="/category/Redis">Redis</a></li>
    
      <li><a href="/category/Flash">Flash</a></li>
    
      <li><a href="/category/Thinking">Thinking</a></li>
    
      <li><a href="/category/Platform">Platform</a></li>
    
      <li><a href="/category/C _ C++">C / C++</a></li>
    
      <li><a href="/category/Dart">Dart</a></li>
    
      <li><a href="/category/Mobile">Mobile</a></li>
    
      <li><a href="/category/Video">Video</a></li>
    
      <li><a href="/category/Blog">Blog</a></li>
    
      <li><a href="/category/Politics">Politics</a></li>
    
      <li><a href="/category/V8Blog">V8Blog</a></li>
    
      <li><a href="/category/Docker">Docker</a></li>
    
      <li><a href="/category/Golang">Golang</a></li>
    
      <li><a href="/category/Career">Career</a></li>
    
      <li><a href="/category/Prometheus">Prometheus</a></li>
    
      <li><a href="/category/Grafana">Grafana</a></li>
    
      <li><a href="/category/Logging">Logging</a></li>
    
      <li><a href="/category/Jaeger">Jaeger</a></li>
    
      <li><a href="/category/Elasticsearch">Elasticsearch</a></li>
    
      <li><a href="/category/MessageQueue">MessageQueue</a></li>
    
      <li><a href="/category/Kafka">Kafka</a></li>
    
      <li><a href="/category/gRPC">gRPC</a></li>
    
  </ul>
</div>

        </div>
      </div>
    </div>
    
<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = "xenojoshua"; // required: replace example with your forum shortname
  var disqus_identifier = "/2013/01/pomelo-notes/";

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  </div>
      <footer class="footer-distributed">
      <div class="container">
        <div class="footer">
          <p>Jonathan Dai &copy; 2018</p>
          <h6>Theme by <a href="https://github.com/streetturtle/jekyll-clean-dark" target="_blank">Pavel Makhov</a></h6>
          <h6>Follow me</h6>

<ul class="social-media">

  
    <li>
      <a title="agreatfool on Github" href="https://github.com/agreatfool" target="_blank"><i class="fa fa-github fa-2x"></i></a>
    </li>
  

  

  

  

  

  
    <li>
      <a title="feed.xml RSS" href="https://xenojoshua.com/feed.xml" target="_blank"><i class="fa fa-rss fa-2x"></i></a>
    </li>
  

</ul>

        </div>
      </div>
    </footer>
  </body>
</html>

</div>
