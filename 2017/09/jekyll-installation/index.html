<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Jekyll的安装 | Xenojoshua</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://xenojoshua.com/js/jquery.min.js"></script>
  <script src="https://xenojoshua.com/js/bootstrap.min.js"></script>
  <script src="https://xenojoshua.com/js/header.js"></script>
  <script src="https://xenojoshua.com/js/toc.js"></script>
  <link href="https://xenojoshua.com//2017/09/jekyll-installation/" rel="canonical" />
  <link href="https://xenojoshua.com/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://xenojoshua.com/css/theme.css" rel="stylesheet">
  <link href="https://xenojoshua.com/css/syntax.css" rel="stylesheet">
  <link href="https://xenojoshua.com/css/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <link href="https://xenojoshua.com/favicon.ico?" type="image/x-icon" rel="shortcut icon">
  <style>
    /* Enhance table style */
    table {
      border: 2px solid #4F7849;
      background-color: #EEEEEE;
      width: 100%;
      text-align: center;
      border-collapse: collapse;
    }
    table td, table.comicGreen th {
      border: 1px solid #4F7849;
      padding: 3px 5px;
    }
    table tbody td {
      font-size: 14px;
      color: #4F7849;
    }
    table tr:nth-child(even) {
      background: #CEE0CC;
    }
    table thead {
      background: #4F7849;
      border-bottom: 1px solid #444444;
    }
    table thead th {
      font-size: 16px;
      font-weight: bold;
      color: #FFFFFF;
      text-align: center;
      border-left: 2px solid #D0E4F5;
      padding: 3px 5px;
    }
    table thead th:first-child {
      border-left: none;
    }
    table tfoot td {
      font-size: 21px;
    }

    /* Enhance pre style */
    pre {
      color: #FFFFFF;
      background-color: #000000;
      border-color: #000000;
    }

    /* Image bg color white while dark background */
    img {
      background-color: #FFFFFF;
    }

    /* Keep gist style clean */
    .gist table tr:nth-child(even) {
      background: #FFFFFF;
    }
    .gist td, th {
      border: none;
    }
  </style>
</head>

<body>

  
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11349149-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


  

 <script type="text/javascript">
   var host = "xenojoshua.com";
   if ((host == window.location.host) && (window.location.protocol != "https:"))
     window.location.protocol = "https";
 </script>
 <script type="text/javascript">
  WebFontConfig = {
    google: {
      families: ['Ubuntu::latin']
    }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })();
</script>

  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="https://xenojoshua.com/">Xenojoshua</a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a href="https://xenojoshua.com/">/home</a></li>
          <li><a href="https://xenojoshua.com/archive/">/archive</a></li>
          <li><a href="https://xenojoshua.com/categories/">/categories</a></li>
          <li><a href="https://xenojoshua.com/tags/">/tags</a></li>
          <li><a href="https://xenojoshua.com/feed.xml" target="_blank">/rss</a></li>
          <li><a href="https://xenojoshua.com/about/">/about</a></li>
        </ul>
      </div>
    </div>
  </nav>


<div class="wrapper">
  <div class="content">
    <div class="container container-center">
      <div class="row">
        <div class="col-md-8">
          <div class="article">
            <div class="well">
              <h1><a href="https://xenojoshua.com/2017/09/jekyll-installation/">Jekyll的安装</a></h1>
              <div class="post-meta">
                <div class="post-time">
                  <i class="fa fa-calendar"></i>
                  <time>01 Sep 2017</time>
                </div>
                <ul>
                  
                    <li><a href="https://xenojoshua.com/tag/Jekyll">Jekyll</a></li>
                  
                </ul>
              </div>
              <div class="post-content">
                <h2 id="0-前言">0. 前言</h2>
<p>今天写了一篇文章，发布的时候居然告诉我jekyll没有安装，估计是之前系统更新的问题，只能重新装一遍。结果问题还真不少，这里简单记录下。</p>

<h2 id="1-安装">1. 安装</h2>

<h3 id="11-安装rvm--更新ruby">1.1 安装rvm | 更新ruby</h3>
<p>系统默认带的ruby版本是2.0.0，太老了，需要更新。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>curl -sSL https://get.rvm.io <span class="p">|</span> bash -s stable
rvm list known
rvm install ruby-2.4.0 --verbose
rvm use ruby-2.4.0 --default</code></pre></figure>

<h3 id="12-更新gem源">1.2 更新gem源</h3>
<p>删掉所有莫名其妙的源</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>gem sources -r <span class="si">${</span><span class="nv">source</span><span class="si">}</span></code></pre></figure>

<p>添加官方唯一的源</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>gem sources -a https://rubygems.org/</code></pre></figure>

<h3 id="13-安装jekyll">1.3 安装Jekyll</h3>
<p>别问我为什么需要sudo，这货就是需要权限</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>sudo gem install jekyll --verbose</code></pre></figure>

<h3 id="14-安装语法高亮">1.4 安装语法高亮</h3>
<p>我使用的时候报了个错：</p>

<blockquote>
  <p>Dependency Error: Yikes! It looks like you don’t have pygments or one of its dependencies installed. In order to use Jekyll as currently configured, you’ll need to install this gem. The full error message from Ruby is: ‘cannot load such file -- pygments’</p>
</blockquote>

<p>安装pygments的时候报错：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>sudo gem install pygments --verbose
<span class="c1"># Password:</span>
<span class="c1"># HEAD https://api.rubygems.org/api/v1/dependencies</span>
<span class="c1"># 200 OK</span>
<span class="c1"># GET https://api.rubygems.org/api/v1/dependencies?gems=pygments</span>
<span class="c1"># 200 OK</span>
<span class="c1"># ERROR:  Could not find a valid gem &#39;pygments&#39; (&gt;= 0) in any repository</span>
<span class="c1"># GET https://api.rubygems.org/latest_specs.4.8.gz</span>
<span class="c1"># 200 OK</span>
<span class="c1"># ERROR:  Possible alternatives: pigments, rygments, pigment, rb-pygments, segments</span></code></pre></figure>

<p>结果找了半天，正确的gem名字应该是：<code>pygments.rb</code></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>sudo gem install pygments.rb --verbose</code></pre></figure>

<h2 id="update-2018-01-18">UPDATE 2018-01-18</h2>
<p>添加gist插件：jekyll-gist</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>gem install jekyll-gist
<span class="c1"># ...</span>
<span class="c1"># Done installing documentation for multipart-post, faraday, sawyer, octokit, jekyll-gist after 2 seconds</span>
<span class="c1"># 5 gems installed</span></code></pre></figure>

<p>修改站点配置<code>_config.yml</code>：</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span></span><span class="l l-Scalar l-Scalar-Plain">plugins</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">jekyll-gist</span></code></pre></figure>

<h2 id="update-2018-01-22">UPDATE 2018-01-22</h2>
<p>添加toc插件：jekyll-toc</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>gem install jekyll-toc
<span class="c1"># ...</span>
<span class="c1"># Done installing documentation for mini_portile2, nokogiri, jekyll-toc after 9 seconds</span>
<span class="c1"># 3 gems installed </span></code></pre></figure>

<p>修改站点配置<code>_config.yml</code>：</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span></span><span class="l l-Scalar l-Scalar-Plain">plugins</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">jekyll-toc</span></code></pre></figure>

<p>然后修改<code>_layouts/post.html</code>，把<code>\{\{ content \}\}</code>改成<code>\{\{ content | toc \}\}</code>，就能在文章头部显示默认的toc了。</p>

<h2 id="update-2018-02-07">UPDATE 2018-02-07</h2>
<p>停用toc插件：jekyll-toc。</p>

<p>这两天稍微研究了下<code>Kramdown</code>这个markdown渲染工具（现在博客使用的模板里默认就是这个），其实这个工具功能极其强大，里面默认集成了一堆常用的功能集合，只要开启就好了。</p>

<h3 id="toc">TOC</h3>
<p>创建一个文件<code>_includes/toc.html</code>，内容：</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span>\<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span>Table of Contents<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
\* this unordered seed list will be replaced by toc as unordered list
\{:toc}</code></pre></figure>

<p>注意删除转译符。</p>

<p>然后修改站点配置<code>_config.yml</code>：</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span></span><span class="l l-Scalar l-Scalar-Plain">markdown</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">kramdown</span>
<span class="l l-Scalar l-Scalar-Plain">kramdown</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">input</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">GFM</span> <span class="c1"># Enable GitHub Flavored Markdown (fenced code blocks)</span>
  <span class="l l-Scalar l-Scalar-Plain">toc_levels</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1..6</span>
  <span class="l l-Scalar l-Scalar-Plain">auto_ids</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span></code></pre></figure>

<p>最后在需要TOC的文章中，在文章需要添加TOC的部位加上：</p>

<blockquote>
  <p>{\% include toc.html \%}</p>
</blockquote>

<p>就OK了。注意删除转译符。</p>

<h3 id="超链接">超链接</h3>
<p>在正常的Markdown超链接后面加上<code>{:target="_blank"}</code>，就能让超链接在新窗口打开。</p>

<h3 id="标题id">标题ID</h3>
<p>根据上面TOC部分的指引，就能够自动在所有的标题上添加ID（为了自动生成的TOC锚链接）。但因为链接的ID使用的是标题的文本内容，如果标题是中文之类的，在使用标题ID的时候会非常难。</p>

<p>Kramdown自带了标题ID生成功能：</p>

<blockquote>
  <p># 1. 前言 {#ID1}</p>
</blockquote>

<p>这样生成出来的标题就带了ID：<code>&lt;h1 id="ID1"&gt;1. 前言&lt;/h1&gt;</code>。</p>

<p>然后在文章中使用</p>

<blockquote>
  <p>[跳转到ID1](#ID1)</p>
</blockquote>

<p>这样的语法，就能快速跳转到锚链接点。</p>

<h3 id="其他">其他</h3>
<p>其他一些好用的特性可以查看：<a href="http://gohom.win/2015/11/06/Kramdown-note/" target="_blank">kramdown和markdown较大的差异比较</a></p>

<blockquote>
  <p>EOF</p>
</blockquote>

              </div>
              
              <div id="disqus_thread">
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
              </div>
              
            </div>
          </div>
        </div>
        <div class="col-md-4 hidden-xs">
          <div class="sidebar ">
  <h2>Recent Posts</h2>
  <ul>
    
    <li><a href="/2019/05/memcached-note/">Memcached Notes</a></li>
    
    <li><a href="/2019/05/golang-pipeline/">Golang Pipeline</a></li>
    
    <li><a href="/2019/05/envoy-note/">Envoy Notes</a></li>
    
    <li><a href="/2019/05/grpc-note/">gRPC Notes</a></li>
    
    <li><a href="/2019/04/kafka-note/">Kafka Notes</a></li>
    
  </ul>
</div>

<div class="sidebar">
  <h2>Categories</h2>
  <ul>
    
      <li><a href="/category/Linux">Linux</a></li>
    
      <li><a href="/category/Stress & Scaling">Stress & Scaling</a></li>
    
      <li><a href="/category/PHP">PHP</a></li>
    
      <li><a href="/category/IDE">IDE</a></li>
    
      <li><a href="/category/Wordpress">Wordpress</a></li>
    
      <li><a href="/category/SEO">SEO</a></li>
    
      <li><a href="/category/Version Control">Version Control</a></li>
    
      <li><a href="/category/HTML & CSS">HTML & CSS</a></li>
    
      <li><a href="/category/Trash">Trash</a></li>
    
      <li><a href="/category/Apache">Apache</a></li>
    
      <li><a href="/category/Memcache">Memcache</a></li>
    
      <li><a href="/category/Net Services">Net Services</a></li>
    
      <li><a href="/category/Java">Java</a></li>
    
      <li><a href="/category/MicroBlog">MicroBlog</a></li>
    
      <li><a href="/category/JavaScript">JavaScript</a></li>
    
      <li><a href="/category/DB">DB</a></li>
    
      <li><a href="/category/Something">Something</a></li>
    
      <li><a href="/category/Methodology & Thinking">Methodology & Thinking</a></li>
    
      <li><a href="/category/Redis">Redis</a></li>
    
      <li><a href="/category/Flash">Flash</a></li>
    
      <li><a href="/category/Thinking">Thinking</a></li>
    
      <li><a href="/category/Platform">Platform</a></li>
    
      <li><a href="/category/C _ C++">C / C++</a></li>
    
      <li><a href="/category/Dart">Dart</a></li>
    
      <li><a href="/category/Mobile">Mobile</a></li>
    
      <li><a href="/category/Video">Video</a></li>
    
      <li><a href="/category/Blog">Blog</a></li>
    
      <li><a href="/category/Politics">Politics</a></li>
    
      <li><a href="/category/V8Blog">V8Blog</a></li>
    
      <li><a href="/category/Docker">Docker</a></li>
    
      <li><a href="/category/Golang">Golang</a></li>
    
      <li><a href="/category/Career">Career</a></li>
    
      <li><a href="/category/Prometheus">Prometheus</a></li>
    
      <li><a href="/category/Grafana">Grafana</a></li>
    
      <li><a href="/category/Logging">Logging</a></li>
    
      <li><a href="/category/Jaeger">Jaeger</a></li>
    
      <li><a href="/category/Elasticsearch">Elasticsearch</a></li>
    
      <li><a href="/category/MessageQueue">MessageQueue</a></li>
    
      <li><a href="/category/Kafka">Kafka</a></li>
    
      <li><a href="/category/gRPC">gRPC</a></li>
    
      <li><a href="/category/Envoy">Envoy</a></li>
    
  </ul>
</div>

        </div>
      </div>
    </div>
    
<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = "xenojoshua"; // required: replace example with your forum shortname
  var disqus_identifier = "/2017/09/jekyll-installation/";

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  </div>
      <footer class="footer-distributed">
      <div class="container">
        <div class="footer">
          <p>Jonathan Dai &copy; 2019</p>
          <h6>Theme by <a href="https://github.com/streetturtle/jekyll-clean-dark" target="_blank">Pavel Makhov</a></h6>
          <h6>Follow me</h6>

<ul class="social-media">

  
    <li>
      <a title="agreatfool on Github" href="https://github.com/agreatfool" target="_blank"><i class="fa fa-github fa-2x"></i></a>
    </li>
  

  

  

  

  

  
    <li>
      <a title="feed.xml RSS" href="https://xenojoshua.com/feed.xml" target="_blank"><i class="fa fa-rss fa-2x"></i></a>
    </li>
  

</ul>

        </div>
      </div>
    </footer>
  </body>
</html>

</div>
