<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
	<channel>
		<title>Xenojoshua</title>
		<description>Joshua's Xeno World!</description>
		<link>https://xenojoshua.com</link>
		<atom:link href="https://xenojoshua.com/feed.xml" rel="self" type="application/rss+xml" />
		
			<item>
				<title>Envoy Notes</title>
				<description>&lt;h4&gt;Table of Contents&lt;/h4&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1-前言&quot; id=&quot;markdown-toc-1-前言&quot;&gt;1. 前言&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-选型--比较&quot; id=&quot;markdown-toc-2-选型--比较&quot;&gt;2. 选型 &amp;amp; 比较&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-benchmark&quot; id=&quot;markdown-toc-3-benchmark&quot;&gt;3. Benchmark&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4-架构&quot; id=&quot;markdown-toc-4-架构&quot;&gt;4. 架构&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5-使用&quot; id=&quot;markdown-toc-5-使用&quot;&gt;5. 使用&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#51-镜像&quot; id=&quot;markdown-toc-51-镜像&quot;&gt;5.1 镜像&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#52-配置&quot; id=&quot;markdown-toc-52-配置&quot;&gt;5.2 配置&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#53-负载均衡front-proxy范例&quot; id=&quot;markdown-toc-53-负载均衡front-proxy范例&quot;&gt;5.3 负载均衡Front Proxy范例&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ID_ADMIN&quot; id=&quot;markdown-toc-ID_ADMIN&quot;&gt;6. Admin&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#7-监控&quot; id=&quot;markdown-toc-7-监控&quot;&gt;7. 监控&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#8-todo&quot; id=&quot;markdown-toc-8-todo&quot;&gt;8. TODO&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#资料&quot; id=&quot;markdown-toc-资料&quot;&gt;资料&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#链接&quot; id=&quot;markdown-toc-链接&quot;&gt;链接&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ID_APP_STATS&quot; id=&quot;markdown-toc-ID_APP_STATS&quot;&gt;stats prometheus&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;1-前言&quot;&gt;1. 前言&lt;/h1&gt;
&lt;p&gt;Envoy应该说是云原生这个概念起来之后的代理应用No.1。在当前的发展趋势下，使用Envoy来解决代理需求应该是最佳方案。&lt;/p&gt;

&lt;p&gt;中文手册：&lt;a href=&quot;http://www.servicemesher.com/envoy/&quot; target=&quot;_blank&quot;&gt;Envoy 官方文档中文版&lt;/a&gt;。当前（&lt;strong&gt;2019-05-07&lt;/strong&gt;）Envoy的最新版本是&lt;code&gt;1.10&lt;/code&gt;，和中文的文档之间有几个小版本的跨度，需要注意。&lt;/p&gt;

&lt;h1 id=&quot;2-选型--比较&quot;&gt;2. 选型 &amp;amp; 比较&lt;/h1&gt;
&lt;p&gt;作为新生代的代理应用，在使用之前必然会有一个为什么的疑问，为什么需要使用Envoy，它和Nginx以及HAProxy这类老牌代理应用相比，好在哪里。&lt;/p&gt;

&lt;p&gt;有一篇不错的博文可以阅读下：&lt;a href=&quot;https://blog.getambassador.io/envoy-vs-nginx-vs-haproxy-why-the-open-source-ambassador-api-gateway-chose-envoy-23826aed79ef&quot; target=&quot;_blank&quot;&gt;Envoy vs NGINX vs HAProxy: Why the open source Ambassador API Gateway chose Envoy&lt;/a&gt;。作者最主要的Concern在于两点：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Nginx之类的其他软件，部分有商业版本和社区版本的区分，而社区版本普遍功能较为简陋，不能完全满足需求&lt;/li&gt;
  &lt;li&gt;HAProxy之类的老牌软件，因为各种原因，功能演进都非常缓慢，不能跟上日益高速发展的云原生技术&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;说穿了就是功能不足，无论是商业原因还是研发原因还是资源原因。&lt;/p&gt;

&lt;p&gt;那么Envoy能提供什么功能：&lt;a href=&quot;http://www.servicemesher.com/envoy/intro/what_is_envoy.html&quot; target=&quot;_blank&quot;&gt;Envoy 是什么？&lt;/a&gt;。可以看到Envoy提供的功能实在是太强大了，基本上现在主流的Proxy需求在Envoy身上都能得到满足。&lt;/p&gt;

&lt;p&gt;官方也有一篇横向比较：&lt;a href=&quot;http://www.servicemesher.com/envoy/intro/comparison.html&quot; target=&quot;_blank&quot;&gt;与类似系统比较&lt;/a&gt;。&lt;/p&gt;

&lt;h1 id=&quot;3-benchmark&quot;&gt;3. Benchmark&lt;/h1&gt;
&lt;p&gt;功能之后就是性能，那么和老牌的Nginx以及HAProxy等比较起来，Envoy的性能又如何呢。这里可以看下：&lt;a href=&quot;https://www.loggly.com/blog/benchmarking-5-popular-load-balancers-nginx-haproxy-envoy-traefik-and-alb/&quot; target=&quot;_blank&quot;&gt;Benchmarking 5 Popular Load Balancers: Nginx, HAProxy, Envoy, Traefik, and ALB&lt;/a&gt;。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Envoy came out as the overall winner in this benchmark. It had the highest throughput in terms of requests per second.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img style=&quot;background-color:transparent;&quot; target=&quot;_blank&quot; src=&quot;/resources/2019/05/envoy-note/envoy-benchmark-01.png&quot; /&gt;
&lt;img style=&quot;background-color:transparent;&quot; target=&quot;_blank&quot; src=&quot;/resources/2019/05/envoy-note/envoy-benchmark-02.png&quot; /&gt;
&lt;img style=&quot;background-color:transparent;&quot; target=&quot;_blank&quot; src=&quot;/resources/2019/05/envoy-note/envoy-benchmark-03.png&quot; /&gt;
&lt;img style=&quot;background-color:transparent;&quot; target=&quot;_blank&quot; src=&quot;/resources/2019/05/envoy-note/envoy-benchmark-04.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;文章发布时间是：&lt;code&gt;10 Dec 2018&lt;/code&gt;，应该说还是非常具有时效性的。&lt;/p&gt;

&lt;h1 id=&quot;4-架构&quot;&gt;4. 架构&lt;/h1&gt;
&lt;p&gt;除了在Nginx中比较常见的作为流量入口的代理模式之外，Envoy还介绍了一种作为服务网格总线的架构模式：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/05/envoy-note/arch-service-to-service.png&quot; alt=&quot;&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;这种设计将Envoy作为面向服务架构（SOA）内部的所有流量的通信总线来使用。此设计将服务和服务之间的关系遮蔽了起来，服务集群只需要知道自己的Envoy在哪里即可，后续的流量就全部交给Envoy，而Envoy之间则通过服务发现将整个服务网格链接起来。&lt;/p&gt;

&lt;h1 id=&quot;5-使用&quot;&gt;5. 使用&lt;/h1&gt;
&lt;h2 id=&quot;51-镜像&quot;&gt;5.1 镜像&lt;/h2&gt;
&lt;p&gt;一般使用镜像的方式进行安装：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;docker pull envoyproxy/envoy:v1.10.0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;启动：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;docker run --rm -it -d \
    --name envoy-test \
    --network=envoy-test-net \
    -p 9901:9901 \
    -p 9988:9988 \
    -v ${PATH}/conf:/etc/envoy \
    -v ${PATH}/log:/tmp \
    envoyproxy/envoy:v1.10.0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;镜像中配置文件的位置为：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/etc/envoy/envoy.yaml
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;可以通过volume进行对应的配置文件覆盖。&lt;/p&gt;

&lt;h2 id=&quot;52-配置&quot;&gt;5.2 配置&lt;/h2&gt;
&lt;p&gt;因功能实在是太强大，Envoy的配置也就比较复杂，官方文档配置方面的总纲在：&lt;a href=&quot;http://www.servicemesher.com/envoy/configuration/configuration.html&quot; target=&quot;_blank&quot;&gt;配置参考&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;此外，因Envoy的消息都是通过Protobuf来进行设计的，因此可以查看源代码来阅读配置项：&lt;a href=&quot;https://github.com/envoyproxy/envoy/tree/v1.10.0/api/envoy/config&quot; target=&quot;_blank&quot;&gt;envoy/api/envoy/config/&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;另外，官方代码库也给了很多配置范例：&lt;a href=&quot;https://github.com/envoyproxy/envoy/tree/master/examples&quot; target=&quot;_blank&quot;&gt;envoy/examples/&lt;/a&gt;。以及：几个sandbox范例：&lt;a href=&quot;http://www.servicemesher.com/envoy/start/sandboxes.html&quot; target=&quot;_blank&quot;&gt;Sandbox&lt;/a&gt;。最适合新手查看的应该是：&lt;a href=&quot;http://www.servicemesher.com/envoy/start/sandboxes/front_proxy.html&quot; target=&quot;_blank&quot;&gt;前端代理&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;有一篇&lt;a href=&quot;https://www.katacoda.com/envoyproxy/scenarios/migrating-from-nginx-to-envoy&quot; target=&quot;_blank&quot;&gt;Migrating from NGINX to Envoy Proxy by envoyproxy&lt;/a&gt;相当不错。以范例的形式讲解了Nginx的配置如何翻译到Envoy。&lt;/p&gt;

&lt;p&gt;几个重要的配置项：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.envoyproxy.io/docs/envoy/v1.10.0/operations/admin&quot; target=&quot;_blank&quot;&gt;Administration interface&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.envoyproxy.io/docs/envoy/v1.10.0/api-v2/api/v2/lds.proto&quot; target=&quot;_blank&quot;&gt;Listener&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.envoyproxy.io/docs/envoy/v1.10.0/api-v2/api/v2/listener/listener.proto#envoy-api-msg-listener-filter&quot; target=&quot;_blank&quot;&gt;listener.Filter&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.envoyproxy.io/docs/envoy/v1.10.0/api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto#envoy-api-msg-config-filter-network-http-connection-manager-v2-httpfilter&quot; target=&quot;_blank&quot;&gt;HttpFilter&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.envoyproxy.io/docs/envoy/v1.10.0/api-v2/api/v2/cds.proto#cluster&quot; target=&quot;_blank&quot;&gt;Cluster&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.envoyproxy.io/docs/envoy/v1.10.0/api-v2/api/v2/route/route.proto#envoy-api-msg-route-virtualhost&quot; target=&quot;_blank&quot;&gt;route.VirtualHost&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;细节这里就不展开了，实在是篇幅太大。简单的范例可以直接看官方给的例子。&lt;/p&gt;

&lt;h2 id=&quot;53-负载均衡front-proxy范例&quot;&gt;5.3 负载均衡Front Proxy范例&lt;/h2&gt;
&lt;p&gt;简单的带负载均衡的Front Proxy范例可以看：&lt;a href=&quot;https://github.com/agreatfool/dist-system-practice/tree/master/experiment/envoy&quot; target=&quot;_blank&quot;&gt;dist-system-practice/experiment/envoy/&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;踩过的几个坑：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;监听端的地址都必须是&lt;code&gt;0.0.0.0&lt;/code&gt;，不能是127.0.0.1，否则在容器里收不到外部请求&lt;/li&gt;
  &lt;li&gt;将其他的网络服务作为upstream使用时，必须与envoy连接在同一个docker network中&lt;/li&gt;
  &lt;li&gt;clusters配置中的端点地址可以使用其他&lt;code&gt;docker容器的名字&lt;/code&gt;作为address&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;ID_ADMIN&quot;&gt;6. Admin&lt;/h1&gt;
&lt;p&gt;在Envoy的配置中有一个&lt;code&gt;admin&lt;/code&gt;节点可以用来配置admin功能访问：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-yaml&quot;&gt;admin:
  access_log_path: &quot;/tmp/admin_access.log&quot;
  profile_path: &quot;/tmp/envoy.prof&quot;
  address:
    socket_address:
      address: 127.0.0.1
      port_value: 9901
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;提供一些admin相关功能，文档可以看：&lt;a href=&quot;https://www.envoyproxy.io/docs/envoy/v1.10.0/operations/admin&quot; target=&quot;_blank&quot;&gt;Administration interface&lt;/a&gt;。功能列表东西还真不少。&lt;/p&gt;

&lt;p&gt;需要注意：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;All mutations must be sent as HTTP POST operations. When a mutation is requested via GET, the request has no effect, and an HTTP 400 (Invalid Request) response is returned.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;7-监控&quot;&gt;7. 监控&lt;/h1&gt;
&lt;p&gt;监控一样可以使用Prometheus进行Metrics采集。Envoy在启动的时候必须配置&lt;a href=&quot;#ID_ADMIN&quot;&gt;6. Admin&lt;/a&gt;，然后就可以在&lt;code&gt;http://127.0.0.1:9901/stats/prometheus&lt;/code&gt;获取到Metrics。&lt;/p&gt;

&lt;p&gt;本文在最后的附录部分留了一份样例：&lt;a href=&quot;#ID_APP_STATS&quot;&gt;stats prometheus&lt;/a&gt;。&lt;/p&gt;

&lt;h1 id=&quot;8-todo&quot;&gt;8. TODO&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Envoy的内部架构&lt;/li&gt;
  &lt;li&gt;Envoy的高可用设计&lt;/li&gt;
  &lt;li&gt;Envoy热加载的设计原理&lt;/li&gt;
  &lt;li&gt;Envoy的集群使用&lt;/li&gt;
  &lt;li&gt;Envoy的其他高级功能使用范例&lt;/li&gt;
  &lt;li&gt;Envoy的Metrics理解&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;资料&quot;&gt;资料&lt;/h1&gt;
&lt;h2 id=&quot;链接&quot;&gt;链接&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://jvns.ca/blog/2018/10/27/envoy-basics/&quot; target=&quot;_blank&quot;&gt;Some Envoy basics&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.servicemesher.com/envoy/&quot; target=&quot;_blank&quot;&gt;Envoy 官方文档中文版&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.getambassador.io/envoy-vs-nginx-vs-haproxy-why-the-open-source-ambassador-api-gateway-chose-envoy-23826aed79ef&quot; target=&quot;_blank&quot;&gt;Envoy vs NGINX vs HAProxy: Why the open source Ambassador API Gateway chose Envoy&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.loggly.com/blog/benchmarking-5-popular-load-balancers-nginx-haproxy-envoy-traefik-and-alb/&quot; target=&quot;_blank&quot;&gt;Benchmarking 5 Popular Load Balancers: Nginx, HAProxy, Envoy, Traefik, and ALB&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.katacoda.com/envoyproxy/scenarios/migrating-from-nginx-to-envoy&quot; target=&quot;_blank&quot;&gt;Migrating from NGINX to Envoy Proxy by envoyproxy&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ID_APP_STATS&quot;&gt;stats prometheus&lt;/h2&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_admin_http_downstream_rq_xx counter&lt;/span&gt;
envoy_listener_admin_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_listener_admin_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;4&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_admin_downstream_cx_destroy counter&lt;/span&gt;
envoy_listener_admin_downstream_cx_destroy&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_admin_downstream_cx_total counter&lt;/span&gt;
envoy_listener_admin_downstream_cx_total&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;
envoy_listener_admin_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;3&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_admin_downstream_pre_cx_timeout counter&lt;/span&gt;
envoy_listener_admin_downstream_pre_cx_timeout&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_admin_http_downstream_rq_completed counter&lt;/span&gt;
envoy_listener_admin_http_downstream_rq_completed&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_admin_no_filter_chain_match counter&lt;/span&gt;
envoy_listener_admin_no_filter_chain_match&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_manager_update_out_of_merge_window counter&lt;/span&gt;
envoy_cluster_manager_update_out_of_merge_window&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_flow_control_resumed_reading_total counter&lt;/span&gt;
envoy_http_downstream_flow_control_resumed_reading_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_http2_total counter&lt;/span&gt;
envoy_http_downstream_cx_http2_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_manager_listener_added counter&lt;/span&gt;
envoy_listener_manager_listener_added&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_rq_overload_close counter&lt;/span&gt;
envoy_http_downstream_rq_overload_close&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_manager_listener_create_success counter&lt;/span&gt;
envoy_listener_manager_listener_create_success&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_http1_total counter&lt;/span&gt;
envoy_http_downstream_cx_http1_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_stats_overflow counter&lt;/span&gt;
envoy_stats_overflow&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_manager_listener_create_failure counter&lt;/span&gt;
envoy_listener_manager_listener_create_failure&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_destroy_remote counter&lt;/span&gt;
envoy_http_downstream_cx_destroy_remote&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_rq_non_relative_path counter&lt;/span&gt;
envoy_http_downstream_rq_non_relative_path&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_no_route counter&lt;/span&gt;
envoy_http_no_route&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;async-client&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_manager_cluster_updated counter&lt;/span&gt;
envoy_cluster_manager_cluster_updated&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_rs_too_large counter&lt;/span&gt;
envoy_http_rs_too_large&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_rq_tx_reset counter&lt;/span&gt;
envoy_http_downstream_rq_tx_reset&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_server_watchdog_mega_miss counter&lt;/span&gt;
envoy_server_watchdog_mega_miss&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_access_log_file_flushed_by_timer counter&lt;/span&gt;
envoy_access_log_file_flushed_by_timer&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;14&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_rx_bytes_total counter&lt;/span&gt;
envoy_http_downstream_cx_rx_bytes_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1029&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_flow_control_paused_reading_total counter&lt;/span&gt;
envoy_http_downstream_flow_control_paused_reading_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_rq_completed counter&lt;/span&gt;
envoy_http_downstream_rq_completed&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_manager_listener_removed counter&lt;/span&gt;
envoy_listener_manager_listener_removed&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_rq_xx counter&lt;/span&gt;
envoy_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;4&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_access_log_file_reopen_failed counter&lt;/span&gt;
envoy_access_log_file_reopen_failed&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_rq_direct_response counter&lt;/span&gt;
envoy_http_rq_direct_response&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;async-client&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_rq_ws_on_non_ws_route counter&lt;/span&gt;
envoy_http_downstream_rq_ws_on_non_ws_route&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_manager_cluster_updated_via_merge counter&lt;/span&gt;
envoy_cluster_manager_cluster_updated_via_merge&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_manager_cluster_added counter&lt;/span&gt;
envoy_cluster_manager_cluster_added&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_runtime_override_dir_exists counter&lt;/span&gt;
envoy_runtime_override_dir_exists&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_rq_http2_total counter&lt;/span&gt;
envoy_http_downstream_rq_http2_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_rq_response_before_rq_complete counter&lt;/span&gt;
envoy_http_downstream_rq_response_before_rq_complete&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_manager_listener_modified counter&lt;/span&gt;
envoy_listener_manager_listener_modified&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_runtime_deprecated_feature_use counter&lt;/span&gt;
envoy_runtime_deprecated_feature_use&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;21&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_idle_timeout counter&lt;/span&gt;
envoy_http_downstream_cx_idle_timeout&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_rq_redirect counter&lt;/span&gt;
envoy_http_rq_redirect&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;async-client&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_rq_too_large counter&lt;/span&gt;
envoy_http_downstream_rq_too_large&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_protocol_error counter&lt;/span&gt;
envoy_http_downstream_cx_protocol_error&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_rq_timeout counter&lt;/span&gt;
envoy_http_downstream_rq_timeout&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_runtime_override_dir_not_exists counter&lt;/span&gt;
envoy_runtime_override_dir_not_exists&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_runtime_load_error counter&lt;/span&gt;
envoy_runtime_load_error&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_access_log_file_write_completed counter&lt;/span&gt;
envoy_access_log_file_write_completed&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_no_cluster counter&lt;/span&gt;
envoy_http_no_cluster&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;async-client&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_rq_reset_after_downstream_response_started counter&lt;/span&gt;
envoy_http_rq_reset_after_downstream_response_started&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;async-client&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_server_watchdog_miss counter&lt;/span&gt;
envoy_server_watchdog_miss&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;3&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_manager_cluster_removed counter&lt;/span&gt;
envoy_cluster_manager_cluster_removed&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_server_debug_assertion_failures counter&lt;/span&gt;
envoy_server_debug_assertion_failures&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_manager_update_merge_cancelled counter&lt;/span&gt;
envoy_cluster_manager_update_merge_cancelled&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_overload_disable_keepalive counter&lt;/span&gt;
envoy_http_downstream_cx_overload_disable_keepalive&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_upgrades_total counter&lt;/span&gt;
envoy_http_downstream_cx_upgrades_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_tx_bytes_total counter&lt;/span&gt;
envoy_http_downstream_cx_tx_bytes_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5132&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_destroy counter&lt;/span&gt;
envoy_http_downstream_cx_destroy&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_destroy_local_active_rq counter&lt;/span&gt;
envoy_http_downstream_cx_destroy_local_active_rq&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_drain_close counter&lt;/span&gt;
envoy_http_downstream_cx_drain_close&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_rq_http1_total counter&lt;/span&gt;
envoy_http_downstream_rq_http1_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_destroy_active_rq counter&lt;/span&gt;
envoy_http_downstream_cx_destroy_active_rq&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_access_log_file_write_buffered counter&lt;/span&gt;
envoy_access_log_file_write_buffered&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;6&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_destroy_local counter&lt;/span&gt;
envoy_http_downstream_cx_destroy_local&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_rq_total counter&lt;/span&gt;
envoy_http_rq_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;async-client&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_total counter&lt;/span&gt;
envoy_http_downstream_cx_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_rq_total counter&lt;/span&gt;
envoy_http_downstream_rq_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_runtime_load_success counter&lt;/span&gt;
envoy_runtime_load_success&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_manager_cluster_modified counter&lt;/span&gt;
envoy_cluster_manager_cluster_modified&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_rq_rx_reset counter&lt;/span&gt;
envoy_http_downstream_rq_rx_reset&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_rq_idle_timeout counter&lt;/span&gt;
envoy_http_downstream_rq_idle_timeout&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_delayed_close_timeout counter&lt;/span&gt;
envoy_http_downstream_cx_delayed_close_timeout&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_destroy_remote_active_rq counter&lt;/span&gt;
envoy_http_downstream_cx_destroy_remote_active_rq&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_ssl_total counter&lt;/span&gt;
envoy_http_downstream_cx_ssl_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_idle_timeout counter&lt;/span&gt;
envoy_cluster_upstream_cx_idle_timeout&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_destroy_local counter&lt;/span&gt;
envoy_cluster_upstream_cx_destroy_local&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_close_notify counter&lt;/span&gt;
envoy_cluster_upstream_cx_close_notify&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_flow_control_paused_reading_total counter&lt;/span&gt;
envoy_cluster_upstream_flow_control_paused_reading_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_connect_timeout counter&lt;/span&gt;
envoy_cluster_upstream_cx_connect_timeout&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_xx counter&lt;/span&gt;
envoy_cluster_upstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;,envoy_cluster_name&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_cancelled counter&lt;/span&gt;
envoy_cluster_upstream_rq_cancelled&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_overflow counter&lt;/span&gt;
envoy_cluster_upstream_cx_overflow&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_destroy_local_with_active_rq counter&lt;/span&gt;
envoy_cluster_upstream_cx_destroy_local_with_active_rq&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_internal_redirect_succeeded_total counter&lt;/span&gt;
envoy_cluster_upstream_internal_redirect_succeeded_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_lb_subsets_fallback counter&lt;/span&gt;
envoy_cluster_lb_subsets_fallback&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_lb_zone_routing_sampled counter&lt;/span&gt;
envoy_cluster_lb_zone_routing_sampled&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_connect_attempts_exceeded counter&lt;/span&gt;
envoy_cluster_upstream_cx_connect_attempts_exceeded&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_per_try_timeout counter&lt;/span&gt;
envoy_cluster_upstream_rq_per_try_timeout&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_tx_bytes_total counter&lt;/span&gt;
envoy_cluster_upstream_cx_tx_bytes_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1065&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_flow_control_resumed_reading_total counter&lt;/span&gt;
envoy_cluster_upstream_flow_control_resumed_reading_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_original_dst_host_invalid counter&lt;/span&gt;
envoy_cluster_original_dst_host_invalid&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_lb_subsets_created counter&lt;/span&gt;
envoy_cluster_lb_subsets_created&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_external_upstream_rq_completed counter&lt;/span&gt;
envoy_cluster_external_upstream_rq_completed&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_rx_bytes_total counter&lt;/span&gt;
envoy_cluster_upstream_cx_rx_bytes_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;715&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_flow_control_backed_up_total counter&lt;/span&gt;
envoy_cluster_upstream_flow_control_backed_up_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_update_success counter&lt;/span&gt;
envoy_cluster_update_success&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;58&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_update_no_rebuild counter&lt;/span&gt;
envoy_cluster_update_no_rebuild&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;56&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_destroy_remote_with_active_rq counter&lt;/span&gt;
envoy_cluster_upstream_cx_destroy_remote_with_active_rq&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_lb_zone_cluster_too_small counter&lt;/span&gt;
envoy_cluster_lb_zone_cluster_too_small&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_lb_zone_routing_all_directly counter&lt;/span&gt;
envoy_cluster_lb_zone_routing_all_directly&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_protocol_error counter&lt;/span&gt;
envoy_cluster_upstream_cx_protocol_error&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_external_upstream_rq_xx counter&lt;/span&gt;
envoy_cluster_external_upstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;,envoy_cluster_name&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_external_upstream_rq counter&lt;/span&gt;
envoy_cluster_external_upstream_rq&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;200&amp;quot;&lt;/span&gt;,envoy_cluster_name&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_completed counter&lt;/span&gt;
envoy_cluster_upstream_rq_completed&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_update_attempt counter&lt;/span&gt;
envoy_cluster_update_attempt&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;58&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_lb_recalculate_zone_structures counter&lt;/span&gt;
envoy_cluster_lb_recalculate_zone_structures&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_pending_overflow counter&lt;/span&gt;
envoy_cluster_upstream_rq_pending_overflow&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_bind_errors counter&lt;/span&gt;
envoy_cluster_bind_errors&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_retry_overflow counter&lt;/span&gt;
envoy_cluster_upstream_rq_retry_overflow&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq counter&lt;/span&gt;
envoy_cluster_upstream_rq&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;200&amp;quot;&lt;/span&gt;,envoy_cluster_name&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_lb_zone_number_differs counter&lt;/span&gt;
envoy_cluster_lb_zone_number_differs&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_none_healthy counter&lt;/span&gt;
envoy_cluster_upstream_cx_none_healthy&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_lb_zone_no_capacity_left counter&lt;/span&gt;
envoy_cluster_lb_zone_no_capacity_left&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_update_failure counter&lt;/span&gt;
envoy_cluster_update_failure&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_timeout counter&lt;/span&gt;
envoy_cluster_upstream_rq_timeout&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_destroy_remote counter&lt;/span&gt;
envoy_cluster_upstream_cx_destroy_remote&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_max_requests counter&lt;/span&gt;
envoy_cluster_upstream_cx_max_requests&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_internal_redirect_failed_total counter&lt;/span&gt;
envoy_cluster_upstream_internal_redirect_failed_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_flow_control_drained_total counter&lt;/span&gt;
envoy_cluster_upstream_flow_control_drained_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_lb_local_cluster_not_ok counter&lt;/span&gt;
envoy_cluster_lb_local_cluster_not_ok&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_rx_reset counter&lt;/span&gt;
envoy_cluster_upstream_rq_rx_reset&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_destroy counter&lt;/span&gt;
envoy_cluster_upstream_cx_destroy&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_lb_subsets_selected counter&lt;/span&gt;
envoy_cluster_lb_subsets_selected&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_lb_subsets_removed counter&lt;/span&gt;
envoy_cluster_lb_subsets_removed&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_http1_total counter&lt;/span&gt;
envoy_cluster_upstream_cx_http1_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_connect_fail counter&lt;/span&gt;
envoy_cluster_upstream_cx_connect_fail&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_pending_total counter&lt;/span&gt;
envoy_cluster_upstream_rq_pending_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_lb_zone_routing_cross_zone counter&lt;/span&gt;
envoy_cluster_lb_zone_routing_cross_zone&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_lb_healthy_panic counter&lt;/span&gt;
envoy_cluster_lb_healthy_panic&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_total counter&lt;/span&gt;
envoy_cluster_upstream_cx_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_http2_total counter&lt;/span&gt;
envoy_cluster_upstream_cx_http2_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_destroy_with_active_rq counter&lt;/span&gt;
envoy_cluster_upstream_cx_destroy_with_active_rq&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_total counter&lt;/span&gt;
envoy_cluster_upstream_rq_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_retry_success counter&lt;/span&gt;
envoy_cluster_upstream_rq_retry_success&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_lb_subsets_fallback_panic counter&lt;/span&gt;
envoy_cluster_lb_subsets_fallback_panic&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_pending_failure_eject counter&lt;/span&gt;
envoy_cluster_upstream_rq_pending_failure_eject&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_membership_change counter&lt;/span&gt;
envoy_cluster_membership_change&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_retry counter&lt;/span&gt;
envoy_cluster_upstream_rq_retry&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_retry_or_shadow_abandoned counter&lt;/span&gt;
envoy_cluster_retry_or_shadow_abandoned&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_maintenance_mode counter&lt;/span&gt;
envoy_cluster_upstream_rq_maintenance_mode&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_tx_reset counter&lt;/span&gt;
envoy_cluster_upstream_rq_tx_reset&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_update_empty counter&lt;/span&gt;
envoy_cluster_update_empty&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_http_downstream_rq_xx counter&lt;/span&gt;
envoy_listener_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,envoy_listener_address&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;4&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,envoy_listener_address&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_downstream_cx_destroy counter&lt;/span&gt;
envoy_listener_downstream_cx_destroy&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_listener_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;3&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,envoy_listener_address&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,envoy_listener_address&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_downstream_pre_cx_timeout counter&lt;/span&gt;
envoy_listener_downstream_pre_cx_timeout&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,envoy_listener_address&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_http_downstream_rq_completed counter&lt;/span&gt;
envoy_listener_http_downstream_rq_completed&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,envoy_listener_address&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_no_filter_chain_match counter&lt;/span&gt;
envoy_listener_no_filter_chain_match&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_downstream_cx_total counter&lt;/span&gt;
envoy_listener_downstream_cx_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_tx_reset&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_destroy_remote_active_rq&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_http1_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_overload_close&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_tracing_random_sampling counter&lt;/span&gt;
envoy_http_tracing_random_sampling&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_no_route&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_destroy_remote&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_protocol_error&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_response_before_rq_complete&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_rq_direct_response&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_flow_control_resumed_reading_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_destroy_local_active_rq&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_http1_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_rq_reset_after_downstream_response_started&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_tracing_service_forced counter&lt;/span&gt;
envoy_http_tracing_service_forced&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_overload_disable_keepalive&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_ws_on_non_ws_route&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;3&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_rx_bytes_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;390&lt;/span&gt;
envoy_http_downstream_cx_idle_timeout&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_idle_timeout&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_rs_too_large&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_completed&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_no_cluster&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_destroy_local&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_rx_reset&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_rq_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_tracing_not_traceable counter&lt;/span&gt;
envoy_http_tracing_not_traceable&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_tx_bytes_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;840&lt;/span&gt;
envoy_http_downstream_cx_delayed_close_timeout&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_drain_close&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_flow_control_paused_reading_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_timeout&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_destroy&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_rq_redirect&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_tracing_health_check counter&lt;/span&gt;
envoy_http_tracing_health_check&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_ssl_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_too_large&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_tracing_client_enabled counter&lt;/span&gt;
envoy_http_tracing_client_enabled&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_xx&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_response_code_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;4&amp;quot;&lt;/span&gt;,envoy_http_conn_manager_prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_upgrades_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_http2_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_non_relative_path&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_http2_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_destroy_active_rq&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_admin_downstream_pre_cx_active gauge&lt;/span&gt;
envoy_listener_admin_downstream_pre_cx_active&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_admin_downstream_cx_active gauge&lt;/span&gt;
envoy_listener_admin_downstream_cx_active&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_active gauge&lt;/span&gt;
envoy_http_downstream_cx_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_manager_total_listeners_draining gauge&lt;/span&gt;
envoy_listener_manager_total_listeners_draining&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_server_parent_connections gauge&lt;/span&gt;
envoy_server_parent_connections&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_runtime_admin_overrides_active gauge&lt;/span&gt;
envoy_runtime_admin_overrides_active&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_manager_active_clusters gauge&lt;/span&gt;
envoy_cluster_manager_active_clusters&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_manager_warming_clusters gauge&lt;/span&gt;
envoy_cluster_manager_warming_clusters&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_manager_total_listeners_active gauge&lt;/span&gt;
envoy_listener_manager_total_listeners_active&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_http1_active gauge&lt;/span&gt;
envoy_http_downstream_cx_http1_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_server_uptime gauge&lt;/span&gt;
envoy_server_uptime&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;140&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_server_memory_heap_size gauge&lt;/span&gt;
envoy_server_memory_heap_size&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5242880&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_server_days_until_first_cert_expiring gauge&lt;/span&gt;
envoy_server_days_until_first_cert_expiring&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2147483647&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_server_hot_restart_epoch gauge&lt;/span&gt;
envoy_server_hot_restart_epoch&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_server_total_connections gauge&lt;/span&gt;
envoy_server_total_connections&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_server_concurrency gauge&lt;/span&gt;
envoy_server_concurrency&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_server_version gauge&lt;/span&gt;
envoy_server_version&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;15294198&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_server_memory_allocated gauge&lt;/span&gt;
envoy_server_memory_allocated&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3875056&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_rx_bytes_buffered gauge&lt;/span&gt;
envoy_http_downstream_cx_rx_bytes_buffered&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;513&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_access_log_file_write_total_buffered gauge&lt;/span&gt;
envoy_access_log_file_write_total_buffered&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_manager_total_listeners_warming gauge&lt;/span&gt;
envoy_listener_manager_total_listeners_warming&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_upgrades_active gauge&lt;/span&gt;
envoy_http_downstream_cx_upgrades_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_rq_active gauge&lt;/span&gt;
envoy_http_downstream_rq_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_runtime_num_keys gauge&lt;/span&gt;
envoy_runtime_num_keys&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_tx_bytes_buffered gauge&lt;/span&gt;
envoy_http_downstream_cx_tx_bytes_buffered&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_server_live gauge&lt;/span&gt;
envoy_server_live&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_ssl_active gauge&lt;/span&gt;
envoy_http_downstream_cx_ssl_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_http2_active gauge&lt;/span&gt;
envoy_http_downstream_cx_http2_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_circuit_breakers_high_rq_retry_open gauge&lt;/span&gt;
envoy_cluster_circuit_breakers_high_rq_retry_open&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_max_host_weight gauge&lt;/span&gt;
envoy_cluster_max_host_weight&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_circuit_breakers_default_cx_open gauge&lt;/span&gt;
envoy_cluster_circuit_breakers_default_cx_open&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_circuit_breakers_high_rq_open gauge&lt;/span&gt;
envoy_cluster_circuit_breakers_high_rq_open&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_circuit_breakers_default_rq_open gauge&lt;/span&gt;
envoy_cluster_circuit_breakers_default_rq_open&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_membership_healthy gauge&lt;/span&gt;
envoy_cluster_membership_healthy&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_lb_subsets_active gauge&lt;/span&gt;
envoy_cluster_lb_subsets_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_circuit_breakers_default_rq_pending_open gauge&lt;/span&gt;
envoy_cluster_circuit_breakers_default_rq_pending_open&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_active gauge&lt;/span&gt;
envoy_cluster_upstream_cx_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_pending_active gauge&lt;/span&gt;
envoy_cluster_upstream_rq_pending_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_version gauge&lt;/span&gt;
envoy_cluster_version&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_tx_bytes_buffered gauge&lt;/span&gt;
envoy_cluster_upstream_cx_tx_bytes_buffered&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_membership_total gauge&lt;/span&gt;
envoy_cluster_membership_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_circuit_breakers_default_rq_retry_open gauge&lt;/span&gt;
envoy_cluster_circuit_breakers_default_rq_retry_open&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_circuit_breakers_default_cx_pool_open gauge&lt;/span&gt;
envoy_cluster_circuit_breakers_default_cx_pool_open&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_circuit_breakers_high_rq_pending_open gauge&lt;/span&gt;
envoy_cluster_circuit_breakers_high_rq_pending_open&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_membership_degraded gauge&lt;/span&gt;
envoy_cluster_membership_degraded&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_circuit_breakers_high_cx_open gauge&lt;/span&gt;
envoy_cluster_circuit_breakers_high_cx_open&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_active gauge&lt;/span&gt;
envoy_cluster_upstream_rq_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_circuit_breakers_high_cx_pool_open gauge&lt;/span&gt;
envoy_cluster_circuit_breakers_high_cx_pool_open&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_rx_bytes_buffered gauge&lt;/span&gt;
envoy_cluster_upstream_cx_rx_bytes_buffered&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_downstream_pre_cx_active gauge&lt;/span&gt;
envoy_listener_downstream_pre_cx_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_downstream_cx_active gauge&lt;/span&gt;
envoy_listener_downstream_cx_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_upgrades_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_tx_bytes_buffered&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_http1_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_http2_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_rx_bytes_buffered&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_ssl_active&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_admin_downstream_cx_length_ms histogram&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;50&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;250&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;30000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;60000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;300000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1800000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;3600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_sum&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_admin_downstream_cx_length_ms_count&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_rq_time histogram&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;50&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;250&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;30000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;60000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;300000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1800000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;3600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_http_downstream_rq_time_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_time_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_http_downstream_cx_length_ms histogram&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;50&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;250&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;30000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;60000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;300000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1800000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;3600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_connect_ms histogram&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;50&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;250&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;30000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;60000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;300000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1800000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;3600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_cluster_upstream_cx_connect_ms_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_cx_length_ms histogram&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;50&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;250&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;30000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;60000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;300000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1800000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;3600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;25250&lt;/span&gt;
envoy_cluster_upstream_cx_length_ms_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_external_upstream_rq_time histogram&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;50&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;250&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;30000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;60000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;300000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1800000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;3600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_external_upstream_rq_time_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;17&lt;/span&gt;.200000000000002842170943040401
envoy_cluster_external_upstream_rq_time_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_cluster_upstream_rq_time histogram&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;50&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;250&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;30000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;60000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;300000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1800000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;3600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_cluster_upstream_rq_time_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;17&lt;/span&gt;.200000000000002842170943040401
envoy_cluster_upstream_rq_time_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_cluster_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http_service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE envoy_listener_downstream_cx_length_ms histogram&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;50&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;250&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;30000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;60000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;300000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1800000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;3600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_listener_downstream_cx_length_ms_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;28&lt;/span&gt;.6999999999999992894572642399
envoy_listener_downstream_cx_length_ms_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_listener_address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.0.0.0_9988&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;50&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;250&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;30000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;60000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;300000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1800000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;3600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_rq_time_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;19&lt;/span&gt;.25
envoy_http_downstream_rq_time_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;50&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;250&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;30000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;60000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;300000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1800000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;3600000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_length_ms_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;
envoy_http_downstream_cx_length_ms_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;28&lt;/span&gt;.6999999999999992894572642399
envoy_http_downstream_cx_length_ms_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;envoy_http_conn_manager_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress_http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;blockquote&gt;
  &lt;p&gt;EOF&lt;/p&gt;
&lt;/blockquote&gt;
</description>
				<pubDate>Wed, 08 May 2019 10:01:22 +0800</pubDate>
				<link>https://xenojoshua.com/2019/05/envoy-note/</link>
				<guid isPermaLink="true">https://xenojoshua.com/2019/05/envoy-note/</guid>
			</item>
		
			<item>
				<title>gRPC Notes</title>
				<description>&lt;h4&gt;Table of Contents&lt;/h4&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1-前言&quot; id=&quot;markdown-toc-1-前言&quot;&gt;1. 前言&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-基本资料及网络问题&quot; id=&quot;markdown-toc-2-基本资料及网络问题&quot;&gt;2. 基本资料及网络问题&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#21-go-support-for-protocol-buffers&quot; id=&quot;markdown-toc-21-go-support-for-protocol-buffers&quot;&gt;2.1 Go support for Protocol Buffers&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#22-grpc-basics-go&quot; id=&quot;markdown-toc-22-grpc-basics-go&quot;&gt;2.2 gRPC Basics: Go&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#23-grpc-enhanced-example&quot; id=&quot;markdown-toc-23-grpc-enhanced-example&quot;&gt;2.3 gRPC enhanced example&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#24-网络问题&quot; id=&quot;markdown-toc-24-网络问题&quot;&gt;2.4 网络问题&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-并发编程&quot; id=&quot;markdown-toc-3-并发编程&quot;&gt;3. 并发编程&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#31-go语言的grpc并发&quot; id=&quot;markdown-toc-31-go语言的grpc并发&quot;&gt;3.1 Go语言的gRPC并发&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ID_CONCURRENCY_DOC&quot; id=&quot;markdown-toc-ID_CONCURRENCY_DOC&quot;&gt;3.2 并发相关官方文档&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#concurrency&quot; id=&quot;markdown-toc-concurrency&quot;&gt;Concurrency&lt;/a&gt;            &lt;ul&gt;
              &lt;li&gt;&lt;a href=&quot;#clients&quot; id=&quot;markdown-toc-clients&quot;&gt;Clients&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#streams&quot; id=&quot;markdown-toc-streams&quot;&gt;Streams&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#servers&quot; id=&quot;markdown-toc-servers&quot;&gt;Servers&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#33-并发范例&quot; id=&quot;markdown-toc-33-并发范例&quot;&gt;3.3 并发范例&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#331-代码差异&quot; id=&quot;markdown-toc-331-代码差异&quot;&gt;3.3.1 代码差异&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#332-顺序执行&quot; id=&quot;markdown-toc-332-顺序执行&quot;&gt;3.3.2 顺序执行&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#333-并发执行&quot; id=&quot;markdown-toc-333-并发执行&quot;&gt;3.3.3 并发执行&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#34-连接池&quot; id=&quot;markdown-toc-34-连接池&quot;&gt;3.4 连接池&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#35-benchmark&quot; id=&quot;markdown-toc-35-benchmark&quot;&gt;3.5 Benchmark&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#测试硬件&quot; id=&quot;markdown-toc-测试硬件&quot;&gt;测试硬件&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#客户端及服务器启动命令&quot; id=&quot;markdown-toc-客户端及服务器启动命令&quot;&gt;客户端及服务器启动命令&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#测试结果&quot; id=&quot;markdown-toc-测试结果&quot;&gt;测试结果&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#结论&quot; id=&quot;markdown-toc-结论&quot;&gt;结论&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4-负载均衡&quot; id=&quot;markdown-toc-4-负载均衡&quot;&gt;4. 负载均衡&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5-状态检查&quot; id=&quot;markdown-toc-5-状态检查&quot;&gt;5. 状态检查&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#资料&quot; id=&quot;markdown-toc-资料&quot;&gt;资料&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#链接&quot; id=&quot;markdown-toc-链接&quot;&gt;链接&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;1-前言&quot;&gt;1. 前言&lt;/h1&gt;
&lt;p&gt;首先需要申明本文并不是通泛的对gRPC的讲解，而是以Golang为基础的一篇gRPC偏应用方向的博文。因此后面的所有技术点和使用范例都会以Go语言为基础。此外，本文中对gRPC偏基础方面的内容不会涉猎过多，而是更多讲解gRPC偏设计方向的技术点。&lt;/p&gt;

&lt;h1 id=&quot;2-基本资料及网络问题&quot;&gt;2. 基本资料及网络问题&lt;/h1&gt;
&lt;h2 id=&quot;21-go-support-for-protocol-buffers&quot;&gt;2.1 Go support for Protocol Buffers&lt;/h2&gt;
&lt;p&gt;关于使用Go语言的情况下的一系列protobuf相关技术点，可以参阅：&lt;a href=&quot;https://github.com/golang/protobuf&quot; target=&quot;_blank&quot;&gt;golang/protobuf&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;主要需要关注的点有几个：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;安装：除了标准的protobuf（protoc）之外，还需要安装go的插件：&lt;code&gt;protoc-gen-go&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;插件：protoc如果要使用go的插件，且需要生成service相关代码的话，需要在&lt;code&gt;go_out&lt;/code&gt;中附带上&lt;code&gt;plugins=grpc:&lt;/code&gt;字符串，e.g：&lt;code&gt;--go_out=plugins=grpc:${OUTPUT_PATH}&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;包管理：protobuf的包定义和go语言的习惯用法有不少差异，使用前建议阅读：&lt;a href=&quot;https://github.com/golang/protobuf#packages-and-input-paths&quot; target=&quot;_blank&quot;&gt;Packages and input paths&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;默认的包名不会转换成相对文件夹，e.g：&lt;code&gt;package com.book&lt;/code&gt;会生成&lt;code&gt;com_book&lt;/code&gt;文件夹，而不是&lt;code&gt;com/book&lt;/code&gt;这样的嵌套文件夹&lt;/li&gt;
      &lt;li&gt;go的包路径可以使用：&lt;code&gt;option go_package = ...&lt;/code&gt;来设定&lt;/li&gt;
      &lt;li&gt;在某些全局编译的情况下，可以：&lt;code&gt;--go_out=$GOPATH&lt;/code&gt;，直接输出到GOPATH&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;生成出来的代码相关规范：&lt;a href=&quot;https://github.com/golang/protobuf#generated-code&quot; target=&quot;_blank&quot;&gt;Generated code&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;protoc插件的额外参数：&lt;a href=&quot;https://github.com/golang/protobuf#parameters&quot; target=&quot;_blank&quot;&gt;Parameters&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;22-grpc-basics-go&quot;&gt;2.2 gRPC Basics: Go&lt;/h2&gt;
&lt;p&gt;初次使用Go语言来编写gRPC代码，请阅读文档：&lt;a href=&quot;https://github.com/grpc/grpc-go/blob/master/examples/gotutorial.md&quot; target=&quot;_blank&quot;&gt;grpc-go/examples/gotutorial.md&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;对于gRPC非常熟悉的程序员可以跳过这个文档，基本上这个文档是面向新手的指引，但是范例代码都使用的是Go语言。&lt;/p&gt;

&lt;h2 id=&quot;23-grpc-enhanced-example&quot;&gt;2.3 gRPC enhanced example&lt;/h2&gt;
&lt;p&gt;进阶的Go语言gRPC代码可以阅读范例：&lt;a href=&quot;https://github.com/grpc/grpc-go/tree/master/examples/route_guide&quot; target=&quot;_blank&quot;&gt;grpc-go/examples/route_guide/&lt;/a&gt;。这个范例代码里加入了单向和双向流的范例，算是比较进阶和完整的范例代码了。&lt;/p&gt;

&lt;p&gt;我的实验项目中也有比较完整的应用范例代码，相对官方的范例来说少了点不伦不类的业务逻辑，对于只需要了解技术的读者来说更友好：&lt;a href=&quot;https://github.com/agreatfool/dist-system-practice/tree/master/golang/src/experiment/grpc/samples/book&quot; target=&quot;_blank&quot;&gt;dist-system-practice/golang/src/experiment/grpc/samples/book/&lt;/a&gt;。&lt;/p&gt;

&lt;h2 id=&quot;24-网络问题&quot;&gt;2.4 网络问题&lt;/h2&gt;
&lt;p&gt;因国情原因，Go的包安装会遇到一些网络问题：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/grpc/grpc-go/issues/1959&quot; target=&quot;_blank&quot;&gt;go get not working unrecognized import path “google.golang.org/grpc” #1959&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/grpc/grpc-go/issues/1780&quot; target=&quot;_blank&quot;&gt;go get -u google.golang.org/grpc i/o timeout #1780&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;这种情况的最佳对应方法是在命令行下设置HTTP和HTTPS代理：&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;http_proxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://127.0.0.1:6152
&lt;span class=&quot;nb&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;https_proxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://127.0.0.1:6152
go get -u ...&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h1 id=&quot;3-并发编程&quot;&gt;3. 并发编程&lt;/h1&gt;
&lt;h2 id=&quot;31-go语言的grpc并发&quot;&gt;3.1 Go语言的gRPC并发&lt;/h2&gt;
&lt;p&gt;关于在Go语言中使用gRPC的并发问题在官方的issues中已经有很多了：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/grpc/grpc-go/issues/682&quot; target=&quot;_blank&quot;&gt;Best practices for reusing connections, concurrency #682&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/grpc/grpc-go/issues/85&quot; target=&quot;_blank&quot;&gt;Concurrency #85&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/grpc/grpc-go/issues/1345&quot; target=&quot;_blank&quot;&gt;Add section on concurrency to documentation #1345&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;上述的三个issues都可以仔细阅读下，提出的问题都非常有代表性。从一系列的问题中可以看出，官方对于gRPC的并发其实是有一些指导意见的，但并没有很好的文档化（至少之前如此）。而目前对这些问题已经有部分解答了，请继续阅读下去。&lt;/p&gt;

&lt;h2 id=&quot;ID_CONCURRENCY_DOC&quot;&gt;3.2 并发相关官方文档&lt;/h2&gt;
&lt;p&gt;在&lt;a href=&quot;https://github.com/grpc/grpc-go/pull/2034/files&quot; target=&quot;_blank&quot;&gt;这个提交&lt;/a&gt;中，官方添加了对于并发相关的官方指引。正式的文档地址是在：&lt;a href=&quot;https://github.com/grpc/grpc-go/blob/master/Documentation/concurrency.md&quot; target=&quot;_blank&quot;&gt;grpc-go/Documentation/concurrency.md&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;这里做下简单翻译：&lt;/p&gt;

&lt;h3 id=&quot;concurrency&quot;&gt;Concurrency&lt;/h3&gt;
&lt;p&gt;一般来说，gRPC-go提供了对并发友好的API。下文是一些指引。&lt;/p&gt;

&lt;h4 id=&quot;clients&quot;&gt;Clients&lt;/h4&gt;
&lt;p&gt;一个&lt;a href=&quot;https://godoc.org/google.golang.org/grpc#ClientConn&quot; target=&quot;_blank&quot;&gt;ClientConn&lt;/a&gt;可以被安全地并发访问。以&lt;a href=&quot;https://github.com/grpc/grpc-go/blob/master/examples/helloworld/greeter_client/main.go#L43&quot; target=&quot;_blank&quot;&gt;helloworld&lt;/a&gt;作为范例，程序员可以在多个goroutine之间共享一个ClientConn来创建多个GreeterClient客户端类型。在这种使用情况下，RPCs会并行传输。&lt;/p&gt;

&lt;h4 id=&quot;streams&quot;&gt;Streams&lt;/h4&gt;
&lt;p&gt;当使用&lt;a href=&quot;https://godoc.org/google.golang.org/grpc#Stream&quot; target=&quot;_blank&quot;&gt;Stream&lt;/a&gt;的时候，程序员必须小心避免从不同的goroutine向同一个stream发送多次&lt;code&gt;SendMsg&lt;/code&gt;或&lt;code&gt;RecvMsg&lt;/code&gt;请求。换句话来说，如果有一个goroutine向stream中发送SendMsg，然后在同一时间有另一个goroutine向stream中发送RecvMsg，这样做是安全的。但在不同的goroutine中同时向同一个stream发送SendMsg，或是RecvMsg则是不安全的。&lt;/p&gt;

&lt;h4 id=&quot;servers&quot;&gt;Servers&lt;/h4&gt;
&lt;p&gt;每个被附到已注册服务器上的RPC处理器都会在其自身的goroutine中运作。举例来说，&lt;a href=&quot;https://github.com/grpc/grpc-go/blob/master/examples/helloworld/greeter_server/main.go#L41&quot; target=&quot;_blank&quot;&gt;SayHello&lt;/a&gt;会在其自身的goroutine中被调用到。同样的，streaming RPC也是一样，route guide例子可以在&lt;a href=&quot;https://github.com/grpc/grpc-go/blob/master/examples/route_guide/server/server.go#L126&quot; target=&quot;_blank&quot;&gt;这里&lt;/a&gt;看得到。&lt;/p&gt;

&lt;h2 id=&quot;33-并发范例&quot;&gt;3.3 并发范例&lt;/h2&gt;
&lt;p&gt;我在实验项目中做了点并发的范例，可以看下：&lt;a href=&quot;https://github.com/agreatfool/dist-system-practice/tree/master/golang/src/experiment/grpc/samples/concurrency&quot; target=&quot;_blank&quot;&gt;dist-system-practice/golang/src/experiment/grpc/samples/concurrency/&lt;/a&gt;。&lt;/p&gt;

&lt;h3 id=&quot;331-代码差异&quot;&gt;3.3.1 代码差异&lt;/h3&gt;
&lt;p&gt;服务端代码是一致的，根据&lt;a href=&quot;#ID_CONCURRENCY_DOC&quot;&gt;3.2 并发相关官方文档&lt;/a&gt;，服务端的所有请求都是自然并发的，无需代码特殊处理。但客户端则需要自行编码处理。&lt;/p&gt;

&lt;p&gt;顺序执行：&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-go&quot; data-lang=&quot;go&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;start&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Echo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ctx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;EchoRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)});&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Fatalf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;[Client] singleConnSequence: err: %v&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;elapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Sub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;[Client] singleConnSequence: response: %v, consumed: %v&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;elapsed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;并发执行：&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-go&quot; data-lang=&quot;go&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;waitgroup&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;sync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;WaitGroup&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;waitgroup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;start&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Echo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ctx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;EchoRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)});&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Fatalf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;[Client] singleConnConcurrency: err: %v&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;elapsed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Sub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;[Client] singleConnConcurrency: response: %v, consumed: %v&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;elapsed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;waitgroup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Done&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;waitgroup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Wait&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;332-顺序执行&quot;&gt;3.3.2 顺序执行&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;# 启动服务器
DELAY_NO_5=true go run server.go

# 启动客户端，发送请求
MODE=CONN_ONE_SEQUENCE go run client.go
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;# 客户端输出
2019/05/03 13:58:23 [Client] singleConnSequence: response: id:1 , consumed: 4.284231ms
2019/05/03 13:58:23 [Client] singleConnSequence: response: id:2 , consumed: 381.818µs
2019/05/03 13:58:23 [Client] singleConnSequence: response: id:3 , consumed: 361.608µs
2019/05/03 13:58:23 [Client] singleConnSequence: response: id:4 , consumed: 332.662µs
2019/05/03 13:58:24 [Client] singleConnSequence: response: id:5 , consumed: 1.004485058s
2019/05/03 13:58:24 [Client] singleConnSequence: response: id:6 , consumed: 470.532µs
2019/05/03 13:58:24 [Client] singleConnSequence: response: id:7 , consumed: 468.148µs
2019/05/03 13:58:24 [Client] singleConnSequence: response: id:8 , consumed: 389.214µs
2019/05/03 13:58:24 [Client] singleConnSequence: response: id:9 , consumed: 418.01µs
2019/05/03 13:58:25 [Client] singleConnSequence: response: id:10 , consumed: 1.003602442s

# 服务器输出
2019/05/03 13:58:23 [Server] Echo: request: id:1
2019/05/03 13:58:23 [Server] Echo: response: id:1
2019/05/03 13:58:23 [Server] Echo: request: id:2
2019/05/03 13:58:23 [Server] Echo: response: id:2
2019/05/03 13:58:23 [Server] Echo: request: id:3
2019/05/03 13:58:23 [Server] Echo: response: id:3
2019/05/03 13:58:23 [Server] Echo: request: id:4
2019/05/03 13:58:23 [Server] Echo: response: id:4
2019/05/03 13:58:23 [Server] Echo: request: id:5
2019/05/03 13:58:24 [Server] Echo: response: id:5
2019/05/03 13:58:24 [Server] Echo: request: id:6
2019/05/03 13:58:24 [Server] Echo: response: id:6
2019/05/03 13:58:24 [Server] Echo: request: id:7
2019/05/03 13:58:24 [Server] Echo: response: id:7
2019/05/03 13:58:24 [Server] Echo: request: id:8
2019/05/03 13:58:24 [Server] Echo: response: id:8
2019/05/03 13:58:24 [Server] Echo: request: id:9
2019/05/03 13:58:24 [Server] Echo: response: id:9
2019/05/03 13:58:24 [Server] Echo: request: id:10
2019/05/03 13:58:25 [Server] Echo: response: id:10
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;333-并发执行&quot;&gt;3.3.3 并发执行&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;# 启动服务器
DELAY_NO_5=true go run server.go

# 启动客户端，发送请求
MODE=CONN_ONE_CONCURRENCY go run client.go
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;# 客户端输出
2019/05/03 13:54:41 [Client] singleConnConcurrency: response: id:9 , consumed: 5.651184ms
2019/05/03 13:54:41 [Client] singleConnConcurrency: response: id:6 , consumed: 5.595945ms
2019/05/03 13:54:41 [Client] singleConnConcurrency: response: id:2 , consumed: 5.693124ms
2019/05/03 13:54:41 [Client] singleConnConcurrency: response: id:4 , consumed: 5.637734ms
2019/05/03 13:54:41 [Client] singleConnConcurrency: response: id:1 , consumed: 5.592096ms
2019/05/03 13:54:41 [Client] singleConnConcurrency: response: id:3 , consumed: 5.58596ms
2019/05/03 13:54:41 [Client] singleConnConcurrency: response: id:7 , consumed: 5.652258ms
2019/05/03 13:54:41 [Client] singleConnConcurrency: response: id:8 , consumed: 5.658945ms
2019/05/03 13:54:42 [Client] singleConnConcurrency: response: id:10 , consumed: 1.008472004s
2019/05/03 13:54:42 [Client] singleConnConcurrency: response: id:5 , consumed: 1.008440948s

# 服务器输出
2019/05/03 13:54:41 [Server] Echo: request: id:3
2019/05/03 13:54:41 [Server] Echo: response: id:3
2019/05/03 13:54:41 [Server] Echo: request: id:1
2019/05/03 13:54:41 [Server] Echo: response: id:1
2019/05/03 13:54:41 [Server] Echo: request: id:6
2019/05/03 13:54:41 [Server] Echo: response: id:6
2019/05/03 13:54:41 [Server] Echo: request: id:10
2019/05/03 13:54:41 [Server] Echo: request: id:8
2019/05/03 13:54:41 [Server] Echo: response: id:8
2019/05/03 13:54:41 [Server] Echo: request: id:9
2019/05/03 13:54:41 [Server] Echo: response: id:9
2019/05/03 13:54:41 [Server] Echo: request: id:5
2019/05/03 13:54:41 [Server] Echo: request: id:2
2019/05/03 13:54:41 [Server] Echo: response: id:2
2019/05/03 13:54:41 [Server] Echo: request: id:4
2019/05/03 13:54:41 [Server] Echo: response: id:4
2019/05/03 13:54:41 [Server] Echo: request: id:7
2019/05/03 13:54:41 [Server] Echo: response: id:7
2019/05/03 13:54:42 [Server] Echo: response: id:10
2019/05/03 13:54:42 [Server] Echo: response: id:5
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;服务端对ID逢5的请求sleep 1秒进行反馈，因此并发的客户端请求中，5和10就是最后返回打印出来的，耗时也是1秒多。&lt;/p&gt;

&lt;h2 id=&quot;34-连接池&quot;&gt;3.4 连接池&lt;/h2&gt;
&lt;p&gt;虽然单连接也是可以进行并发编程的，但在某些极端情况下，数据包可能达到网络吞吐的极限。众所周知Go语言天生对并发编程友好，因此CPU的利用必然是非常充分的，如果RPC服务的类型是低CPU消耗而高网络消耗的情况就有可能出现之前提到的问题。这种情况就需要创建多个连接了。&lt;/p&gt;

&lt;p&gt;在多连接管理方面，官方的类库并没有连接池的功能，第三方倒是有：&lt;a href=&quot;https://github.com/processout/grpc-go-pool/blob/master/pool_test.go&quot; target=&quot;_blank&quot;&gt;grpc-go-pool/pool_test.go&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;此外，可以拓展阅读：&lt;a href=&quot;https://mycodesmells.com/post/pooling-grpc-connections&quot; target=&quot;_blank&quot;&gt;Pooling gRPC Connections&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;范例可以看：&lt;a href=&quot;https://github.com/agreatfool/dist-system-practice/tree/master/golang/src/experiment/grpc/samples/pool&quot; target=&quot;_blank&quot;&gt;dist-system-practice/golang/src/experiment/grpc/samples/pool/&lt;/a&gt;。&lt;/p&gt;

&lt;h2 id=&quot;35-benchmark&quot;&gt;3.5 Benchmark&lt;/h2&gt;
&lt;p&gt;范例代码在：&lt;a href=&quot;https://github.com/agreatfool/dist-system-practice/tree/master/golang/src/experiment/grpc/samples/throughput&quot; target=&quot;_blank&quot;&gt;dist-system-practice/golang/src/experiment/grpc/samples/throughput/&lt;/a&gt;。&lt;/p&gt;

&lt;h3 id=&quot;测试硬件&quot;&gt;测试硬件&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;rMBP 2014 mid
CPU：2.5GHz 四核 Intel Core i7 处理器 (Turbo Boost 3.7GHz)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;测试的时候一些在系统使用中的软件我并没有清空，因此可能有稍许干扰，但总体问题不大。&lt;/p&gt;

&lt;h3 id=&quot;客户端及服务器启动命令&quot;&gt;客户端及服务器启动命令&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;CORE_NUM=3 go run server.go
CORE_NUM=4 ROUTINES_PER_CORE=50 go run client.go
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;使用&lt;code&gt;CORE_NUM&lt;/code&gt;来控制使用到的物理核心数量，客户端使用&lt;code&gt;ROUTINES_PER_CORE&lt;/code&gt;来决定启动的routine总量：&lt;code&gt;CORE_NUM * ROUTINES_PER_CORE&lt;/code&gt;。&lt;/p&gt;

&lt;h3 id=&quot;测试结果&quot;&gt;测试结果&lt;/h3&gt;
&lt;p&gt;请求数量/s：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;2019/05/04 14:19:33 [Client] 73065 requests in 1s
2019/05/04 14:19:34 [Client] 68826 requests in 1s
2019/05/04 14:19:35 [Client] 73655 requests in 1s
2019/05/04 14:19:36 [Client] 70973 requests in 1s
2019/05/04 14:19:37 [Client] 73645 requests in 1s
2019/05/04 14:19:38 [Client] 70616 requests in 1s
2019/05/04 14:19:39 [Client] 72252 requests in 1s
2019/05/04 14:19:40 [Client] 69342 requests in 1s
2019/05/04 14:19:41 [Client] 69745 requests in 1s
2019/05/04 14:19:42 [Client] 62251 requests in 1s
2019/05/04 14:19:43 [Client] 58043 requests in 1s
2019/05/04 14:19:44 [Client] 69316 requests in 1s
2019/05/04 14:19:45 [Client] 69796 requests in 1s
2019/05/04 14:19:46 [Client] 57246 requests in 1s
2019/05/04 14:19:47 [Client] 72265 requests in 1s
2019/05/04 14:19:48 [Client] 72940 requests in 1s
2019/05/04 14:19:49 [Client] 70237 requests in 1s
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;CPU：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/05/grpc-note/cpu.jpg&quot; alt=&quot;&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Network：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/05/grpc-note/network-low.jpg&quot; alt=&quot;&quot; target=&quot;_blank&quot; /&gt;
&lt;img src=&quot;/resources/2019/05/grpc-note/network-high.jpg&quot; alt=&quot;&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;结论&quot;&gt;结论&lt;/h3&gt;
&lt;p&gt;因硬件环境的限制，没有使用通过网卡的测试方案，而是使用了127.0.0.1的环回请求方案。此外，测试期间MAC上的一些软件进程也并没有进行清理，因此可能有部分干扰。结论就不做了，这样简单且限制资源的benchmark实际意义不大，列几点可以观测到的状态：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code&gt;请求数量/s&lt;/code&gt;符合预期&lt;/li&gt;
  &lt;li&gt;CPU占用基本满&lt;/li&gt;
  &lt;li&gt;提升核心使用数量，提升routine数量，能观察到rps提升&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;4-负载均衡&quot;&gt;4. 负载均衡&lt;/h1&gt;
&lt;p&gt;官方有一篇关于负载均衡设计的文档，可以读下：&lt;a href=&quot;https://github.com/grpc/grpc/blob/master/doc/load-balancing.md&quot; target=&quot;_blank&quot;&gt;Load Balancing in gRPC&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;意义不大，可以了解一些简单的负载均衡概念，以及一些设计上的思路。&lt;/p&gt;

&lt;h1 id=&quot;5-状态检查&quot;&gt;5. 状态检查&lt;/h1&gt;
&lt;p&gt;官方对于如何设计及暴露服务端状态检查接口的一份文档：&lt;a href=&quot;https://github.com/grpc/grpc/blob/master/doc/health-checking.md&quot; target=&quot;_blank&quot;&gt;GRPC Health Checking Protocol&lt;/a&gt;。可以说是一份guideline。同样意义不大。&lt;/p&gt;

&lt;h1 id=&quot;资料&quot;&gt;资料&lt;/h1&gt;
&lt;h2 id=&quot;链接&quot;&gt;链接&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/processout/grpc-go-pool/blob/master/pool_test.go&quot; target=&quot;_blank&quot;&gt;grpc-go-pool/pool_test.go&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://mycodesmells.com/post/pooling-grpc-connections&quot; target=&quot;_blank&quot;&gt;Pooling gRPC Connections&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;EOF&lt;/p&gt;
&lt;/blockquote&gt;
</description>
				<pubDate>Mon, 06 May 2019 10:01:22 +0800</pubDate>
				<link>https://xenojoshua.com/2019/05/grpc-note/</link>
				<guid isPermaLink="true">https://xenojoshua.com/2019/05/grpc-note/</guid>
			</item>
		
			<item>
				<title>Kafka Notes</title>
				<description>&lt;h4&gt;Table of Contents&lt;/h4&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1-前言&quot; id=&quot;markdown-toc-1-前言&quot;&gt;1. 前言&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-消息队列&quot; id=&quot;markdown-toc-2-消息队列&quot;&gt;2. 消息队列&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-消息队列选型比较&quot; id=&quot;markdown-toc-3-消息队列选型比较&quot;&gt;3. 消息队列选型比较&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#31-apache-pulsar&quot; id=&quot;markdown-toc-31-apache-pulsar&quot;&gt;3.1 Apache Pulsar&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4-kafka架构&quot; id=&quot;markdown-toc-4-kafka架构&quot;&gt;4. Kafka架构&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#41-概念&quot; id=&quot;markdown-toc-41-概念&quot;&gt;4.1 概念&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ID_CLUSTER&quot; id=&quot;markdown-toc-ID_CLUSTER&quot;&gt;4.2 集群&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#43-分布式痛点offset&quot; id=&quot;markdown-toc-43-分布式痛点offset&quot;&gt;4.3 分布式痛点（offset）&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#44-临时消费压力应急&quot; id=&quot;markdown-toc-44-临时消费压力应急&quot;&gt;4.4 临时消费压力应急&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5-kafka监控--高可用&quot; id=&quot;markdown-toc-5-kafka监控--高可用&quot;&gt;5. Kafka监控 &amp;amp; 高可用&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#51-监控&quot; id=&quot;markdown-toc-51-监控&quot;&gt;5.1 监控&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#52-高可用&quot; id=&quot;markdown-toc-52-高可用&quot;&gt;5.2 高可用&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#6-kafka-benchmark&quot; id=&quot;markdown-toc-6-kafka-benchmark&quot;&gt;6. Kafka Benchmark&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#61-测试环境&quot; id=&quot;markdown-toc-61-测试环境&quot;&gt;6.1 测试环境&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#62-不同场景测试&quot; id=&quot;markdown-toc-62-不同场景测试&quot;&gt;6.2 不同场景测试&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#621-场景1&quot; id=&quot;markdown-toc-621-场景1&quot;&gt;6.2.1 场景1&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#622-场景2&quot; id=&quot;markdown-toc-622-场景2&quot;&gt;6.2.2 场景2&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#623-场景3&quot; id=&quot;markdown-toc-623-场景3&quot;&gt;6.2.3 场景3&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#ID_BENCHMARK_SCEN4&quot; id=&quot;markdown-toc-ID_BENCHMARK_SCEN4&quot;&gt;6.2.4 场景4&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#625-场景5&quot; id=&quot;markdown-toc-625-场景5&quot;&gt;6.2.5 场景5&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#626-场景6&quot; id=&quot;markdown-toc-626-场景6&quot;&gt;6.2.6 场景6&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#63-各场景测试总结&quot; id=&quot;markdown-toc-63-各场景测试总结&quot;&gt;6.3 各场景测试总结&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#7-kafka使用范例&quot; id=&quot;markdown-toc-7-kafka使用范例&quot;&gt;7. Kafka使用范例&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#8-todo&quot; id=&quot;markdown-toc-8-todo&quot;&gt;8. TODO&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#资料&quot; id=&quot;markdown-toc-资料&quot;&gt;资料&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#链接&quot; id=&quot;markdown-toc-链接&quot;&gt;链接&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;1-前言&quot;&gt;1. 前言&lt;/h1&gt;
&lt;p&gt;Kafka是现在业界选择比较多的一种消息队列解决方案。我这里主要也是选Kafka作为消息队列这块需求的解决方案。下面的技术调研会先从消息队列本身开始，然后做一个横向比较，最后再聚焦到Kafka本身上。&lt;/p&gt;

&lt;p&gt;调研用的Kafka版本为：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;2.2.0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;官方文档：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;官方介绍：&lt;a href=&quot;https://kafka.apache.org/intro&quot; target=&quot;_blank&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;官方新手入门：&lt;a href=&quot;https://kafka.apache.org/quickstart&quot; target=&quot;_blank&quot;&gt;Quickstart&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;官方应用场景介绍：&lt;a href=&quot;https://kafka.apache.org/uses&quot; target=&quot;_blank&quot;&gt;Use cases&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;官方文档：&lt;a href=&quot;https://kafka.apache.org/documentation/&quot; target=&quot;_blank&quot;&gt;Documentation&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Docker Hub：&lt;a href=&quot;https://hub.docker.com/r/wurstmeister/kafka&quot; target=&quot;_blank&quot;&gt;wurstmeister/kafka&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;一本中文手册，版本较老，看看范例代码尚可：&lt;a href=&quot;http://www.kubiji.cn/book/apache_kafka/APACHEKAFKAJiaoCheng/APACHEKAFKAGaiShu.html&quot; target=&quot;_blank&quot;&gt;Apache kafka中文手册&lt;/a&gt;。&lt;/p&gt;

&lt;h1 id=&quot;2-消息队列&quot;&gt;2. 消息队列&lt;/h1&gt;
&lt;p&gt;在聊Kafka之前，其实更需要关注下消息队列本身。什么需求下需要使用消息队列、消息队列的功能点有哪些、消息队列的模式有哪些、消息队列的实现难点有哪些，等等。如果什么都不了解，那技术选型就无从谈起了，也没办法理解为什么消息队列要做好是非常困难的一件事情。展开了说，也就没办法举一反三，理解其他软件系统的设计精髓了。&lt;/p&gt;

&lt;p&gt;下面会简单列举下消息队列的一系列知识点，细节内容这里就不展开了，篇幅太大。&lt;/p&gt;

&lt;p&gt;消息队列的需求：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;解耦&lt;/li&gt;
  &lt;li&gt;最终一致性&lt;/li&gt;
  &lt;li&gt;广播&lt;/li&gt;
  &lt;li&gt;错峰与流控&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;消息队列的模型：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;点对点：单生产、单队列、单消费&lt;/li&gt;
  &lt;li&gt;生产者消费者模型：多生产、单队列、多消费&lt;/li&gt;
  &lt;li&gt;发布订阅模型：根据topic分队列，多生产、多队列、多消费&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;消息队列的投递模式：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Push：消息队列主动推送（e.g RocketMQ可选）&lt;/li&gt;
  &lt;li&gt;Pull：消费者主动抓取（e.g Kafka）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;消息队列的性能指标：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;吞吐量（Throughput）&lt;/li&gt;
  &lt;li&gt;响应时间（Latency）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;消息队列的投递策略：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;最多一次（At most Once）：消息可能会丢，但绝不会重复传输&lt;/li&gt;
  &lt;li&gt;最少一次（At least Once）：消息绝不会丢，但可能会重复传输&lt;/li&gt;
  &lt;li&gt;仅有一次（Exactly Once）：每条消息肯定会被传输一次且仅传输一次&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;消息队列的功能性：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;优先级队列&lt;/li&gt;
  &lt;li&gt;延迟队列&lt;/li&gt;
  &lt;li&gt;死信队列&lt;/li&gt;
  &lt;li&gt;重试队列&lt;/li&gt;
  &lt;li&gt;消息回溯&lt;/li&gt;
  &lt;li&gt;消息堆积 + 持久化&lt;/li&gt;
  &lt;li&gt;消息追踪&lt;/li&gt;
  &lt;li&gt;消息过滤&lt;/li&gt;
  &lt;li&gt;多租户&lt;/li&gt;
  &lt;li&gt;多协议支持&lt;/li&gt;
  &lt;li&gt;跨语言支持&lt;/li&gt;
  &lt;li&gt;流量控制&lt;/li&gt;
  &lt;li&gt;可靠投递&lt;/li&gt;
  &lt;li&gt;消费确认&lt;/li&gt;
  &lt;li&gt;消息顺序性&lt;/li&gt;
  &lt;li&gt;安全机制&lt;/li&gt;
  &lt;li&gt;消息幂等性&lt;/li&gt;
  &lt;li&gt;事务性消息&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;几篇值得一读的博文：&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/2019/04/message-queue-design/&quot; target=&quot;_blank&quot;&gt;消息队列设计精要 - 美团点评技术团队&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;一篇通论形式的消息队列设计博文，讲解了一些消息队列通用的知识点，值得一读。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/04/kafka-note/message-queue-01.png&quot; alt=&quot;&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.infoq.cn/article/distributed-queue-programme-model-actual-combat-optimization&quot; target=&quot;_blank&quot;&gt;分布式队列编程：从模型、实战到优化&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;本质上也是一篇对于消息队列进行设计和讲解的博文，但结合了美团公司内部的实际项目经验，对于大型系统的设计者有更好的贴近应用场景的指导作用。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651745361&amp;amp;idx=1&amp;amp;sn=5f0f67484a0de4b0dd2796848ef9cc94&quot; target=&quot;_blank&quot;&gt;分布式队列编程优化篇&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;接上一篇的博文，更多讲到了性能和高级功能相关的实现以及性能的优化。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.jianshu.com/p/7a6deaba34d2&quot; target=&quot;_blank&quot;&gt;如何保证消息队列的高可用和幂等性以及数据丢失，顺序一致性&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;排版比较粗糙，但内容非常不错。以贴近项目经验的内容讲解了RabbitMQ和Kafka的：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;高可用性&lt;/li&gt;
  &lt;li&gt;消息幂等性&lt;/li&gt;
  &lt;li&gt;消息可靠性&lt;/li&gt;
  &lt;li&gt;消息顺序性&lt;/li&gt;
  &lt;li&gt;消息积压场景处理&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;3-消息队列选型比较&quot;&gt;3. 消息队列选型比较&lt;/h1&gt;
&lt;p&gt;消息队列的选型一直都是比较困难的，业界现在比较主流的选择有：ActiveMQ、RabbitMQ、Kafka、RocketMQ、ZeroMQ 这几种。&lt;/p&gt;

&lt;p&gt;有几篇不错的博文可以看下：&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.infoq.cn/article/kafka-vs-rabbitmq&quot; target=&quot;_blank&quot;&gt;消息中间件选型分析：从 Kafka 与 RabbitMQ 的对比看全局&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;这篇时间还算比较接近&lt;code&gt;2018年5月2日&lt;/code&gt;，主要是以Kafka和RabbitMQ为范例进行了消息队列选型的要点讲解。虽然讲解的时候使用了Kafka以及RabbitMQ作为范例，但实际上讲解的是通用的消息队列选型要点。结合本文上一节所讲到的消息队列的一系列知识点，应该能有更深刻的理解。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/04/kafka-note/message-queue-02.jpg&quot; alt=&quot;&quot; target=&quot;_blank&quot; /&gt;
&lt;img src=&quot;/resources/2019/04/kafka-note/message-queue-03.jpg&quot; alt=&quot;&quot; target=&quot;_blank&quot; /&gt;
&lt;img src=&quot;/resources/2019/04/kafka-note/message-queue-04.jpg&quot; alt=&quot;&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.infoq.cn/article/dXJ3EYIp*WaHfmVwlMeu&quot; target=&quot;_blank&quot;&gt;滴滴出行基于 RocketMQ 构建企业级消息队列服务的实践&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;这篇时间稍微有点久，文中提到的Kafka版本还是0.8左右的（虽然文章的发布时间倒是不久之前），所以文中提到的性能指标之类的仅可作为参考。这篇文章是对Kafka和RocketMQ做的一个技术选型比较，文章中有相当多的性能指标比较，并结合滴滴公司的实际情况讲解了下消息队列系统进行替换时候所做的Migration工作，非常有借鉴价值。此外，文中还有一小节讲解了下RocketMQ使用的经验。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/39586635/why-is-kafka-pull-based-instead-of-push-based&quot; target=&quot;_blank&quot;&gt;Why is Kafka pull-based instead of push-based?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;为什么Kafka消息队列使用的是Pull投递模式。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://medium.com/@philipfeng/modern-open-source-messaging-apache-kafka-rabbitmq-nats-pulsar-and-nsq-ca3bf7422db5&quot; target=&quot;_blank&quot;&gt;Modern Open Source Messaging: NATS, RabbitMQ, Apache Kafka, hmbdc, Synapse, NSQ and Pulsar&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;老外写的一篇，提到了不少国内较少提到的开源项目，可以作为参考。&lt;/p&gt;

&lt;h2 id=&quot;31-apache-pulsar&quot;&gt;3.1 Apache Pulsar&lt;/h2&gt;
&lt;p&gt;关于Kafka和后起新秀Pulsar的横向比较，可以看：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/47388267&quot; target=&quot;_blank&quot;&gt;比拼Kafka，大数据分析新秀Pulsar到底好在哪&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.slideshare.net/merlimat/high-performance-messaging-with-apache-pulsar&quot; target=&quot;_blank&quot;&gt;High performance messaging with Apache Pulsar&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;大略的要点：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;功能性上Pulsar要比Kafka更好，且这是在不牺牲性能的前提下的，就更加难能可贵&lt;/li&gt;
  &lt;li&gt;解决了Kafka单partition只能单consumer消费的问题&lt;/li&gt;
  &lt;li&gt;将Broker和存储解耦，做到更好的错误恢复，在Broker宕机之后可以做到无损耗恢复&lt;/li&gt;
  &lt;li&gt;存储方面的功能交付给Bookie，更细粒度的存储，更好的错误恢复和同步性能&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;4-kafka架构&quot;&gt;4. Kafka架构&lt;/h1&gt;
&lt;h2 id=&quot;41-概念&quot;&gt;4.1 概念&lt;/h2&gt;
&lt;p&gt;老样子从基本的概念开始梳理：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code&gt;broker&lt;/code&gt;：kafka集群中的任意一台提供服务的物理服务器即被称为broker&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;topic&lt;/code&gt;：消息队列的一个队列，一般做架构的时候按需求将不同的消息分别派送到不同的管道里，而其中的任意一个管道在kafka里就是一个topic&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;partition&lt;/code&gt;：topic下的概念，任意一个topic根据启动时的设定，会分成多个partition，而每个partition会由集群安排在某一台物理机broker上，以此做到集群的横向扩展&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;offset&lt;/code&gt;：partition下的概念，topic被分为很多partition，而每个partition则都会存储消息，每个partition存储的消息都是从0开始进行标号，而这个每条消息一个的标号，即为offset；可以理解为消息在partition里的唯一id；不同的partition都是从0开始标号，因此offset只对其自身的partition生效，不可混用&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;replica&lt;/code&gt;：某个partition的完整备份（在接收写入请求时数据可能会落后于leader），用在集群的高可用服务上，同时也可以提供partition读操作的负载均衡&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;producer&lt;/code&gt;：向topic里输入消息数据的角色&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;consumer&lt;/code&gt;：从topic里消费消息数据的角色&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;consumer group&lt;/code&gt;：可扩展且具有容错性的consumer机制，多个consumer共享一个group id，组内的所有consumer一起来消费topic的所有partition；但一个partition仍旧只能由一个consumer进行消费；主要是为了解决consumer和partition配对balance的问题，将consumer做成组由集群自动进行平衡并分配到partition&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;关于consumer group，更多的可以看：&lt;a href=&quot;https://www.cnblogs.com/huxi2b/p/6223228.html&quot; target=&quot;_blank&quot;&gt;Kafka消费组(consumer group)&lt;/a&gt;。&lt;/p&gt;

&lt;h2 id=&quot;ID_CLUSTER&quot;&gt;4.2 集群&lt;/h2&gt;
&lt;p&gt;一张图基本上就能说明问题：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/04/kafka-note/message-queue-05.jpg&quot; alt=&quot;&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;kafka集群由多台broker（物理机）组成&lt;/li&gt;
  &lt;li&gt;图示中有&lt;code&gt;四台&lt;/code&gt;broker&lt;/li&gt;
  &lt;li&gt;每个topic会根据配置，生成固定数量的partition，均匀分配到物理机上&lt;/li&gt;
  &lt;li&gt;图示中的topic被分成了&lt;code&gt;3个&lt;/code&gt;partition：&lt;code&gt;P1_leader&lt;/code&gt;（broker1）、&lt;code&gt;P2_leader&lt;/code&gt;（broker2）、&lt;code&gt;P3_leader&lt;/code&gt;（broker4）&lt;/li&gt;
  &lt;li&gt;每个partition根据配置，会拥有固定数量的follower（replica），分别分配到各个物理机上&lt;/li&gt;
  &lt;li&gt;图示中即：&lt;code&gt;P1_follower&lt;/code&gt;（broker2、broker3）、&lt;code&gt;P2_follower&lt;/code&gt;（broker3、broker4）、&lt;code&gt;P3_follower&lt;/code&gt;（broker1、broker2）&lt;/li&gt;
  &lt;li&gt;当有broker宕机的时候：
    &lt;ul&gt;
      &lt;li&gt;丢失的follower会由集群重新寻找节点进行备份&lt;code&gt;恢复&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;丢失的leader会由集群自现存的follower中&lt;code&gt;选举&lt;/code&gt;产生，成为新的leader&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;43-分布式痛点offset&quot;&gt;4.3 分布式痛点（offset）&lt;/h2&gt;
&lt;p&gt;Kafka在分布式解决方案上也有痛点，主要是每个partition的offset问题。&lt;/p&gt;

&lt;p&gt;为了性能，kafka将一个partition视作一个管道，拥有一个从0开始的offset。这样做的好处就是不再需要在每一个消息体上做metadata存放该消息是否被消费掉等信息，而是通过partition的offset来标记整个管道中的消息被消费到了哪里。消息体更简单，流程上也更简单，不会出现乱序的消费情况。但也正是因为这种设计，导致每个partition无法由多个consumer并发消费，每个partition绑定只能同时允许一个consumer消费。&lt;/p&gt;

&lt;p&gt;因此，从机制上来说，kafka并不适合用来做consumer重消耗（CPU）类型的消息通道。虽然partition可以做很多，极端点来说可以做到和consumer实际需求1：1的配比，但超过适配当前需求的partition数量设置也会造成吞吐量的下降（参见：&lt;a href=&quot;#ID_BENCHMARK_SCEN4&quot;&gt;6.2.4 场景4&lt;/a&gt;）。&lt;/p&gt;

&lt;p&gt;consumer和partition在进行消息是否被消费掉的确认行为上，有两种方式：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;自动提交：
    &lt;ul&gt;
      &lt;li&gt;设置&lt;code&gt;enable.auto.commit=true&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;更新的频率根据参数&lt;code&gt;auto.commit.interval.ms&lt;/code&gt;来定，这种方式被称为&lt;code&gt;at most once&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;consumer fetch到消息后，partition就会更新offset，无论是否消费成功&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;手动提交：
    &lt;ul&gt;
      &lt;li&gt;设置&lt;code&gt;enable.auto.commit=false&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;这种方式被称为&lt;code&gt;at least once&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;consumer fetch到消息后，必须在消费成功后调用方法&lt;code&gt;consumer.commitSync()&lt;/code&gt;，手动通知partition更新offset&lt;/li&gt;
      &lt;li&gt;如果消费失败，则offset不会更新，此条消息会被重复消费一次&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;关于partition和consumer之间的关系，更多可以看下：&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/45175424/how-multiple-consumer-group-consumers-work-across-partition-on-the-same-topic-in&quot; target=&quot;_blank&quot;&gt;How multiple consumer group consumers work across partition on the same topic in Kafka?&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;If you want to have more consumers than partitions and still have performance enhancement and process only each message once, then you should increase the number of partitions in the topics so that there are at least as many partitions as consumers. Often topics are created with 2 times as many partitions needed to start, just so more consumers can be added later if needed without having to repartition the topic.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/pursuer211/article/details/79799478&quot; target=&quot;_blank&quot;&gt;kafka中partition和消费者对应关系&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;1个partition只能被同组的一个consumer消费，同组的consumer则起到均衡效果&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;以及自动提交相关：&lt;a href=&quot;https://medium.com/@danieljameskay/understanding-the-enable-auto-commit-kafka-consumer-property-12fa0ade7b65&quot; target=&quot;_blank&quot;&gt;Understanding the ‘enable.auto.commit’ Kafka Consumer property&lt;/a&gt;。&lt;/p&gt;

&lt;h2 id=&quot;44-临时消费压力应急&quot;&gt;4.4 临时消费压力应急&lt;/h2&gt;
&lt;p&gt;如果因某些原因，之前设计的partition分片数量不够导致能够上工的consumer数量不够，且consumer的消费速率跟不上的时候，就会发生消息堆积。如果堆积的情况比较严重的话，就需要程序介入处理。&lt;/p&gt;

&lt;p&gt;思路如下：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;老的partition以及老的topic肯定不能动，就算重新进行repartition整个集群重新平衡耗费的时间也是难以忍受的&lt;/li&gt;
  &lt;li&gt;创建新的topic&lt;/li&gt;
  &lt;li&gt;将新的topic的partition设到consumer消费速率能跟上的数量&lt;/li&gt;
  &lt;li&gt;将新的consumer部署上去，消费新设置的topic和partition&lt;/li&gt;
  &lt;li&gt;将老的topic以及partition上挂载的consumer全部停止&lt;/li&gt;
  &lt;li&gt;在老的topic以及partition上挂载临时consumer，这批consumer不做任何逻辑处理，只是将老的topic内的消息全部读取出来，并输入到新的topic里&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;这样老的topic里的消息就全部分发到新的topic里了，且新的topic的partition数量很高，可以挂载很多consumer处理堆积的消息。&lt;/p&gt;

&lt;h1 id=&quot;5-kafka监控--高可用&quot;&gt;5. Kafka监控 &amp;amp; 高可用&lt;/h1&gt;
&lt;h2 id=&quot;51-监控&quot;&gt;5.1 监控&lt;/h2&gt;
&lt;p&gt;监控方面，datadog的几篇文章非常不错，值得一读，不过版本有点老了，文章是2016年的：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.datadoghq.com/blog/monitoring-kafka-performance-metrics/&quot; target=&quot;_blank&quot;&gt;Monitoring Kafka performance metrics - P1&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.datadoghq.com/blog/collecting-kafka-performance-metrics/&quot; target=&quot;_blank&quot;&gt;Monitoring Kafka performance metrics - P2&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;当然，Kafka也有Prometheus的exporter：&lt;a href=&quot;https://github.com/danielqsj/kafka_exporter&quot; target=&quot;_blank&quot;&gt;danielqsj/kafka_exporter&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;如果只需要可检索的指标列表，可以直接看这篇：&lt;a href=&quot;https://docs.confluent.io/current/kafka/monitoring.html&quot; target=&quot;_blank&quot;&gt;Monitoring Kafka&lt;/a&gt;。&lt;/p&gt;

&lt;h2 id=&quot;52-高可用&quot;&gt;5.2 高可用&lt;/h2&gt;
&lt;p&gt;在之前的&lt;a href=&quot;#ID_CLUSTER&quot;&gt;4.2 集群&lt;/a&gt;中，已经介绍过了Kafka的集群模式，可以看到Kafka天然就是分布式的，而且在设计之初就考虑到了集群的高可用。本文之前章节内关于集群的内容偏简单了，只介绍了大致的设计。如有需要更深入了解分布式和高可用的细节，则可以阅读唯品会的：&lt;a href=&quot;https://www.infoq.cn/article/depth-interpretation-of-kafka-data-reliability&quot; target=&quot;_blank&quot;&gt;Kafka 数据可靠性深度解读&lt;/a&gt;，这篇讲解非常透彻，基本上可以当经典来看了。&lt;/p&gt;

&lt;p&gt;Kafka的高可用配置，有几个配置项控制了集群的安全程度。这里需要记住一点，整个集群越安全集群的吞吐量就越低，这是等价交换的，不可能不付出任何代价就获得数据的安全性。唯品会的文章讲解的细节非常多，但我们真正执行操作的时候可以只知其然，懂得哪几个配置项需要操作即可：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;topic：
    &lt;ul&gt;
      &lt;li&gt;&lt;code&gt;replication.factor&lt;/code&gt;：每个partition会拥有多少个replica&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;min.insync.replicas&lt;/code&gt;：partition的leader节点要求当前在线的replica节点的数量，如果实际在线数量少于这个数值，客户端的请求会被拒绝：&lt;code&gt;org.apache.kafka.common.errors.NotEnoughReplicasExceptoin: Messages are rejected since there are fewer in-sync replicas than required&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;broker：
    &lt;ul&gt;
      &lt;li&gt;&lt;code&gt;unclean.leader.election.enable&lt;/code&gt;：是否允许out-of-sync replica成为leader&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;producer：
    &lt;ul&gt;
      &lt;li&gt;producer.type：消息生产者提交消息到kafka服务器的时候的模式，可选：sync或async
        &lt;ul&gt;
          &lt;li&gt;&lt;code&gt;sync&lt;/code&gt;拥有很好的安全性&lt;/li&gt;
          &lt;li&gt;&lt;code&gt;async&lt;/code&gt;拥有更高的吞吐量，可以批量进行消息发送&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;request.required.acks：kafka服务器在收到消息之后何时对生产者进行完成反馈
        &lt;ul&gt;
          &lt;li&gt;&lt;code&gt;1（默认）&lt;/code&gt;：partition的leader节点收取完成即反馈，如果在follower同步数据之前leader宕机则数据丢失&lt;/li&gt;
          &lt;li&gt;&lt;code&gt;0&lt;/code&gt;：producer不等待kafka服务器反馈即直接进行后续发送，拥有最高的吞吐量以及最低的安全性&lt;/li&gt;
          &lt;li&gt;&lt;code&gt;-1&lt;/code&gt;：partition的所有节点包括了leader以及所有的follower全部都确认数据同步完成再反馈，最高的安全性以及最低的吞吐量&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;要保证数据写入到Kafka是安全的，高可靠的，需要如下配置：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;topic：
    &lt;ul&gt;
      &lt;li&gt;replication.factor&amp;gt;=3：即副本数至少是3个&lt;/li&gt;
      &lt;li&gt;2&amp;lt;=min.insync.replicas&amp;lt;=replication.factor：要求每个partition leader的在线replica数量最少保持2个&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;broker：
    &lt;ul&gt;
      &lt;li&gt;unclean.leader.election.enable=false：不允许out-of-sync replica成为leader&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;producer：
    &lt;ul&gt;
      &lt;li&gt;request.required.acks=-1(all)：producer发送的消息请求必须让partition所有的replica都同步完毕才会返回成功&lt;/li&gt;
      &lt;li&gt;producer.type=sync：producer发送的消息以同步方式发送，即在写入成功之前，producer必须等待&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;6-kafka-benchmark&quot;&gt;6. Kafka Benchmark&lt;/h1&gt;
&lt;p&gt;这里的内容全部是转载自唯品会的：&lt;a href=&quot;https://www.infoq.cn/article/depth-interpretation-of-kafka-data-reliability&quot; target=&quot;_blank&quot;&gt;Kafka 数据可靠性深度解读&lt;/a&gt;。网上的资料很容易失效，因此在这里做下转载。&lt;/p&gt;

&lt;p&gt;Benchmark的Kafka版本是：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;0.10.1.0
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;61-测试环境&quot;&gt;6.1 测试环境&lt;/h2&gt;
&lt;p&gt;Kafka broker 用到了 4 台机器，分别为 broker[0/1/2/3] 配置如下：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;CPU: 24core/2.6GHZ&lt;/li&gt;
  &lt;li&gt;Memory: 62G&lt;/li&gt;
  &lt;li&gt;Network: 4000Mb&lt;/li&gt;
  &lt;li&gt;OS/kernel: CentOs release 6.6 (Final)&lt;/li&gt;
  &lt;li&gt;Disk: 1089G&lt;/li&gt;
  &lt;li&gt;Kafka 版本：0.10.1.0&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;broker 端 JVM 参数设置：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;-Xmx8G -Xms8G -server -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+CMSClassUnloadingEnabled -XX:+CMSScavengeBeforeRemark -XX:+DisableExplicitGC -Djava.awt.headless=true -Xloggc:/apps/service/kafka/bin/../logs/kafkaServer-gc.log -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.port=9999
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;客户端机器配置：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;CPU: 24core/2.6GHZ&lt;/li&gt;
  &lt;li&gt;Memory: 3G&lt;/li&gt;
  &lt;li&gt;Network: 1000Mb&lt;/li&gt;
  &lt;li&gt;OS/kernel: CentOs release 6.3 (Final)&lt;/li&gt;
  &lt;li&gt;Disk: 240G&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;62-不同场景测试&quot;&gt;6.2 不同场景测试&lt;/h2&gt;
&lt;h3 id=&quot;621-场景1&quot;&gt;6.2.1 场景1&lt;/h3&gt;
&lt;p&gt;测试不同的副本数、min.insync.replicas 策略以及 request.required.acks 策略（以下简称 acks 策略）对于发送速度（TPS）的影响。&lt;/p&gt;

&lt;p&gt;具体配置：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;一个 producer&lt;/li&gt;
  &lt;li&gt;发送方式为 sync&lt;/li&gt;
  &lt;li&gt;消息体大小为 1kB&lt;/li&gt;
  &lt;li&gt;partition 数为 12&lt;/li&gt;
  &lt;li&gt;副本数为：1/2/4&lt;/li&gt;
  &lt;li&gt;min.insync.replicas 分别为 1/2/4&lt;/li&gt;
  &lt;li&gt;acks 分别为 -1（all）/1/0&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;具体测试数据如下表（min.insync.replicas 只在 acks=-1 时有效）：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/04/kafka-note/message-queue-06.jpg&quot; alt=&quot;&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;测试结果分析：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;客户端的 acks 策略对发送的 TPS 有较大的影响，TPS：acks_0 &amp;gt; acks_1 &amp;gt; ack_-1;&lt;/li&gt;
  &lt;li&gt;副本数越高，TPS 越低；副本数一致时，min.insync.replicas 不影响 TPS；&lt;/li&gt;
  &lt;li&gt;acks=0/1 时，TPS 与 min.insync.replicas 参数以及副本数无关，仅受 acks 策略的影响。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;下面将 partition 的个数设置为 1，来进一步确认下不同的 acks 策略、不同的 min.insync.replicas 策略以及不同的副本数对于发送速度的影响，详细请看情景 2 和情景 3。&lt;/p&gt;

&lt;h3 id=&quot;622-场景2&quot;&gt;6.2.2 场景2&lt;/h3&gt;
&lt;p&gt;在 partition 个数固定为 1，测试不同的副本数和 min.insync.replicas 策略对发送速度的影响。&lt;/p&gt;

&lt;p&gt;具体配置：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;一个 producer&lt;/li&gt;
  &lt;li&gt;发送方式为 sync&lt;/li&gt;
  &lt;li&gt;消息体大小为 1kB&lt;/li&gt;
  &lt;li&gt;producer 端 acks=-1(all)&lt;/li&gt;
  &lt;li&gt;变换副本数：2/3/4&lt;/li&gt;
  &lt;li&gt;min.insync.replicas 设置为：1/2/4&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;测试结果如下：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/04/kafka-note/message-queue-07.jpg&quot; alt=&quot;&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;测试结果分析：&lt;/p&gt;

&lt;p&gt;副本数越高，TPS 越低（这点与场景 1 的测试结论吻合），但是当 partition 数为 1 时差距甚微。min.insync.replicas 不影响 TPS。&lt;/p&gt;

&lt;h3 id=&quot;623-场景3&quot;&gt;6.2.3 场景3&lt;/h3&gt;
&lt;p&gt;在 partition 个数固定为 1，测试不同的 acks 策略和副本数对发送速度的影响。&lt;/p&gt;

&lt;p&gt;具体配置：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;一个 producer&lt;/li&gt;
  &lt;li&gt;发送方式为 sync&lt;/li&gt;
  &lt;li&gt;消息体大小为 1kB&lt;/li&gt;
  &lt;li&gt;min.insync.replicas=1&lt;/li&gt;
  &lt;li&gt;topic 副本数为：1/2/4&lt;/li&gt;
  &lt;li&gt;acks： 0/1/-1&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;测试结果如下：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/04/kafka-note/message-queue-08.jpg&quot; alt=&quot;&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;测试结果分析（与情景 1 一致）：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;副本数越多，TPS 越低；&lt;/li&gt;
  &lt;li&gt;客户端的 acks 策略对发送的 TPS 有较大的影响，TPS：acks_0 &amp;gt; acks_1 &amp;gt; ack_-1。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;ID_BENCHMARK_SCEN4&quot;&gt;6.2.4 场景4&lt;/h3&gt;
&lt;p&gt;测试不同 partition 数对发送速率的影响&lt;/p&gt;

&lt;p&gt;具体配置：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;一个 producer&lt;/li&gt;
  &lt;li&gt;消息体大小为 1KB&lt;/li&gt;
  &lt;li&gt;发送方式为 sync&lt;/li&gt;
  &lt;li&gt;topic 副本数为 2&lt;/li&gt;
  &lt;li&gt;min.insync.replicas=2&lt;/li&gt;
  &lt;li&gt;acks=-1&lt;/li&gt;
  &lt;li&gt;partition 数量设置为 1/2/4/8/12&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;测试结果：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/04/kafka-note/message-queue-09.jpg&quot; alt=&quot;&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;测试结果分析：&lt;/p&gt;

&lt;p&gt;partition 的不同会影响 TPS，随着 partition 的个数的增长 TPS 会有所增长，但并不是一直成正比关系，到达一定临界值时，partition 数量的增加反而会使 TPS 略微降低。&lt;/p&gt;

&lt;h3 id=&quot;625-场景5&quot;&gt;6.2.5 场景5&lt;/h3&gt;
&lt;p&gt;通过将集群中部分 broker 设置成不可服务状态，测试对客户端以及消息落盘的影响。&lt;/p&gt;

&lt;p&gt;具体配置：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;一个 producer&lt;/li&gt;
  &lt;li&gt;消息体大小 1KB&lt;/li&gt;
  &lt;li&gt;发送方式为 sync&lt;/li&gt;
  &lt;li&gt;topic 副本数为 4&lt;/li&gt;
  &lt;li&gt;min.insync.replicas 设置为 2&lt;/li&gt;
  &lt;li&gt;acks=-1&lt;/li&gt;
  &lt;li&gt;retries=0/100000000&lt;/li&gt;
  &lt;li&gt;partition 数为 12&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;具体测试数据如下表：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/04/kafka-note/message-queue-10.jpg&quot; alt=&quot;&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;出错信息：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;错误 1：客户端返回异常，部分数据可落盘，部分失败：org.apache.kafka.common.errors.NetworkException: The server disconnected before a response was received.&lt;/li&gt;
  &lt;li&gt;错误 2：[WARN]internals.Sender - Got error produce response with correlation id 19369 on topic-partition default_channel_replicas_4_1-3, retrying (999999999 attempts left). Error: NETWORK_EXCEPTION&lt;/li&gt;
  &lt;li&gt;错误 3： [WARN]internals.Sender - Got error produce response with correlation id 77890 on topic-partition default_channel_replicas_4_1-8, retrying (999999859 attempts left). Error: NOT_ENOUGH_REPLICAS&lt;/li&gt;
  &lt;li&gt;错误 4： [WARN]internals.Sender - Got error produce response with correlation id 77705 on topic-partition default_channel_replicas_4_1-3, retrying (999999999 attempts left). Error: NOT_ENOUGH_REPLICAS_AFTER_APPEND&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;测试结果分析：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;kill 两台 broker 后，客户端可以继续发送。broker 减少后，partition 的 leader 分布在剩余的两台 broker 上，造成了 TPS 的减小；&lt;/li&gt;
  &lt;li&gt;kill 三台 broker 后，客户端无法继续发送。Kafka 的自动重试功能开始起作用，当大于等于 min.insync.replicas 数量的 broker 恢复后，可以继续发送；&lt;/li&gt;
  &lt;li&gt;当 retries 不为 0 时，消息有重复落盘；客户端成功返回的消息都成功落盘，异常时部分消息可以落盘。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;626-场景6&quot;&gt;6.2.6 场景6&lt;/h3&gt;
&lt;p&gt;测试单个 producer 的发送延迟，以及端到端的延迟。&lt;/p&gt;

&lt;p&gt;具体配置：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;一个 producer&lt;/li&gt;
  &lt;li&gt;消息体大小 1KB&lt;/li&gt;
  &lt;li&gt;发送方式为 sync&lt;/li&gt;
  &lt;li&gt;topic 副本数为 4&lt;/li&gt;
  &lt;li&gt;min.insync.replicas 设置为 2&lt;/li&gt;
  &lt;li&gt;acks=-1&lt;/li&gt;
  &lt;li&gt;partition 数为 12&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;测试数据及结果（单位为 ms）：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/04/kafka-note/message-queue-11.jpg&quot; alt=&quot;&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;63-各场景测试总结&quot;&gt;6.3 各场景测试总结&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;当 acks=-1 时，Kafka 发送端的 TPS 受限于 topic 的副本数量（ISR 中），副本越多 TPS 越低；&lt;/li&gt;
  &lt;li&gt;acks=0 时，TPS 最高，其次为 1，最差为 -1，即 TPS：acks_0 &amp;gt; acks_1 &amp;gt; ack_-1；&lt;/li&gt;
  &lt;li&gt;min.insync.replicas 参数不影响 TPS；&lt;/li&gt;
  &lt;li&gt;partition 的不同会影响 TPS，随着 partition 的个数的增长 TPS 会有所增长，但并不是一直成正比关系，到达一定临界值时，partition 数量的增加反而会使 TPS 略微降低；&lt;/li&gt;
  &lt;li&gt;Kafka 在 acks=-1,min.insync.replicas&amp;gt;=1 时，具有高可靠性，所有成功返回的消息都可以落盘。&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;7-kafka使用范例&quot;&gt;7. Kafka使用范例&lt;/h1&gt;
&lt;p&gt;实验使用的还是下载下来的Kafka，版本如头部申明的是&lt;code&gt;2.2.0&lt;/code&gt;。范例代码可以在Github查看：&lt;a href=&quot;https://github.com/agreatfool/dist-system-practice/tree/master/experiment/kafka&quot; target=&quot;_blank&quot;&gt;dist-system-practice/experiment/kafka/&lt;/a&gt;。&lt;/p&gt;

&lt;h1 id=&quot;8-todo&quot;&gt;8. TODO&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;深入研究Kafka的监控Metrics&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;资料&quot;&gt;资料&lt;/h1&gt;
&lt;h2 id=&quot;链接&quot;&gt;链接&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.kubiji.cn/book/apache_kafka/APACHEKAFKAJiaoCheng/APACHEKAFKAGaiShu.html&quot; target=&quot;_blank&quot;&gt;Apache kafka中文手册&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.infoq.cn/article/distributed-queue-programme-model-actual-combat-optimization&quot; target=&quot;_blank&quot;&gt;分布式队列编程：从模型、实战到优化&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651745361&amp;amp;idx=1&amp;amp;sn=5f0f67484a0de4b0dd2796848ef9cc94&quot; target=&quot;_blank&quot;&gt;分布式队列编程优化篇&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.jianshu.com/p/7a6deaba34d2&quot; target=&quot;_blank&quot;&gt;如何保证消息队列的高可用和幂等性以及数据丢失，顺序一致性&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.infoq.cn/article/kafka-vs-rabbitmq&quot; target=&quot;_blank&quot;&gt;消息中间件选型分析：从 Kafka 与 RabbitMQ 的对比看全局&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.infoq.cn/article/dXJ3EYIp*WaHfmVwlMeu&quot; target=&quot;_blank&quot;&gt;滴滴出行基于 RocketMQ 构建企业级消息队列服务的实践&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/39586635/why-is-kafka-pull-based-instead-of-push-based&quot; target=&quot;_blank&quot;&gt;Why is Kafka pull-based instead of push-based?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/@philipfeng/modern-open-source-messaging-apache-kafka-rabbitmq-nats-pulsar-and-nsq-ca3bf7422db5&quot; target=&quot;_blank&quot;&gt;Modern Open Source Messaging: NATS, RabbitMQ, Apache Kafka, hmbdc, Synapse, NSQ and Pulsar&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.cnblogs.com/huxi2b/p/6223228.html&quot; target=&quot;_blank&quot;&gt;Kafka消费组(consumer group)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/45175424/how-multiple-consumer-group-consumers-work-across-partition-on-the-same-topic-in&quot; target=&quot;_blank&quot;&gt;How multiple consumer group consumers work across partition on the same topic in Kafka?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.csdn.net/pursuer211/article/details/79799478&quot; target=&quot;_blank&quot;&gt;kafka中partition和消费者对应关系&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/@danieljameskay/understanding-the-enable-auto-commit-kafka-consumer-property-12fa0ade7b65&quot; target=&quot;_blank&quot;&gt;Understanding the ‘enable.auto.commit’ Kafka Consumer property&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.datadoghq.com/blog/monitoring-kafka-performance-metrics/&quot; target=&quot;_blank&quot;&gt;Monitoring Kafka performance metrics - P1&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.datadoghq.com/blog/collecting-kafka-performance-metrics/&quot; target=&quot;_blank&quot;&gt;Monitoring Kafka performance metrics - P2&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/danielqsj/kafka_exporter&quot; target=&quot;_blank&quot;&gt;danielqsj/kafka_exporter&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.confluent.io/current/kafka/monitoring.html&quot; target=&quot;_blank&quot;&gt;Monitoring Kafka&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.infoq.cn/article/depth-interpretation-of-kafka-data-reliability&quot; target=&quot;_blank&quot;&gt;Kafka 数据可靠性深度解读&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;EOF&lt;/p&gt;
&lt;/blockquote&gt;
</description>
				<pubDate>Mon, 29 Apr 2019 10:01:22 +0800</pubDate>
				<link>https://xenojoshua.com/2019/04/kafka-note/</link>
				<guid isPermaLink="true">https://xenojoshua.com/2019/04/kafka-note/</guid>
			</item>
		
			<item>
				<title>消息队列设计精要 - 美团点评技术团队</title>
				<description>&lt;h4&gt;Table of Contents&lt;/h4&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#前言&quot; id=&quot;markdown-toc-前言&quot;&gt;前言&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#正文&quot; id=&quot;markdown-toc-正文&quot;&gt;正文&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#1-何时需要消息队列&quot; id=&quot;markdown-toc-1-何时需要消息队列&quot;&gt;1. 何时需要消息队列&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#11-解耦&quot; id=&quot;markdown-toc-11-解耦&quot;&gt;1.1 解耦&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#12-最终一致性&quot; id=&quot;markdown-toc-12-最终一致性&quot;&gt;1.2 最终一致性&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#13-广播&quot; id=&quot;markdown-toc-13-广播&quot;&gt;1.3 广播&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#14-错峰与流控&quot; id=&quot;markdown-toc-14-错峰与流控&quot;&gt;1.4 错峰与流控&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-如何设计一个消息队列&quot; id=&quot;markdown-toc-2-如何设计一个消息队列&quot;&gt;2. 如何设计一个消息队列&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#21-综述&quot; id=&quot;markdown-toc-21-综述&quot;&gt;2.1 综述&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#22-实现队列基本功能&quot; id=&quot;markdown-toc-22-实现队列基本功能&quot;&gt;2.2 实现队列基本功能&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#221-rpc通信协议&quot; id=&quot;markdown-toc-221-rpc通信协议&quot;&gt;2.2.1 RPC通信协议&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#222-高可用&quot; id=&quot;markdown-toc-222-高可用&quot;&gt;2.2.2 高可用&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#223-服务端承载消息堆积的能力&quot; id=&quot;markdown-toc-223-服务端承载消息堆积的能力&quot;&gt;2.2.3 服务端承载消息堆积的能力&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#224-存储子系统的选择&quot; id=&quot;markdown-toc-224-存储子系统的选择&quot;&gt;2.2.4 存储子系统的选择&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#225-消费关系解析&quot; id=&quot;markdown-toc-225-消费关系解析&quot;&gt;2.2.5 消费关系解析&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#23-队列高级特性设计&quot; id=&quot;markdown-toc-23-队列高级特性设计&quot;&gt;2.3 队列高级特性设计&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#231-可靠投递最终一致性&quot; id=&quot;markdown-toc-231-可靠投递最终一致性&quot;&gt;2.3.1 可靠投递（最终一致性）&lt;/a&gt;            &lt;ul&gt;
              &lt;li&gt;&lt;a href=&quot;#2311-消费确认&quot; id=&quot;markdown-toc-2311-消费确认&quot;&gt;2.3.1.1 消费确认&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#2312-重复消息和顺序消息&quot; id=&quot;markdown-toc-2312-重复消息和顺序消息&quot;&gt;2.3.1.2 重复消息和顺序消息&lt;/a&gt;                &lt;ul&gt;
                  &lt;li&gt;&lt;a href=&quot;#版本号&quot; id=&quot;markdown-toc-版本号&quot;&gt;版本号&lt;/a&gt;&lt;/li&gt;
                  &lt;li&gt;&lt;a href=&quot;#状态机&quot; id=&quot;markdown-toc-状态机&quot;&gt;状态机&lt;/a&gt;&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#2313-中间件对于重复消息的处理&quot; id=&quot;markdown-toc-2313-中间件对于重复消息的处理&quot;&gt;2.3.1.3 中间件对于重复消息的处理&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#232-事务&quot; id=&quot;markdown-toc-232-事务&quot;&gt;2.3.2 事务&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#233-性能相关&quot; id=&quot;markdown-toc-233-性能相关&quot;&gt;2.3.3 性能相关&lt;/a&gt;            &lt;ul&gt;
              &lt;li&gt;&lt;a href=&quot;#2331-异步同步&quot; id=&quot;markdown-toc-2331-异步同步&quot;&gt;2.3.3.1 异步/同步&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#2332-批量&quot; id=&quot;markdown-toc-2332-批量&quot;&gt;2.3.3.2 批量&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#24-push还是pull&quot; id=&quot;markdown-toc-24-push还是pull&quot;&gt;2.4 push还是pull&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#241-慢消费&quot; id=&quot;markdown-toc-241-慢消费&quot;&gt;2.4.1 慢消费&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#242-消息延迟与忙等&quot; id=&quot;markdown-toc-242-消息延迟与忙等&quot;&gt;2.4.2 消息延迟与忙等&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#243-顺序消息&quot; id=&quot;markdown-toc-243-顺序消息&quot;&gt;2.4.3 顺序消息&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-总结&quot; id=&quot;markdown-toc-3-总结&quot;&gt;3. 总结&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#作者简介&quot; id=&quot;markdown-toc-作者简介&quot;&gt;作者简介&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;前言&quot;&gt;前言&lt;/h1&gt;

&lt;p&gt;本文源自美团点评技术团队博客，但似乎是因为博客改版的原因，之前本文的链接失效了。我因为有剪藏文章的习惯，因此有幸没有丢失原文内容。而最近在写的消息队列文章中，我希望引用部分内容，而网上已经不好找原文了，因此无奈之下在这里做一份备份转载。&lt;/p&gt;

&lt;h1 id=&quot;正文&quot;&gt;正文&lt;/h1&gt;

&lt;p&gt;消息队列已经逐渐成为企业IT系统内部通信的核心手段。它具有低耦合、可靠投递、广播、流量控制、最终一致性等一系列功能，成为异步RPC的主要手段之一。&lt;/p&gt;

&lt;p&gt;当今市面上有很多主流的消息中间件，如老牌的ActiveMQ、RabbitMQ，炙手可热的Kafka，阿里巴巴自主开发的Notify、MetaQ、RocketMQ等。&lt;/p&gt;

&lt;p&gt;本文不会一一介绍这些消息队列的所有特性，而是探讨一下自主开发设计一个消息队列时，你需要思考和设计的重要方面。过程中我们会参考这些成熟消息队列的很多重要思想。&lt;/p&gt;

&lt;p&gt;本文首先会阐述什么时候你需要一个消息队列，然后以Push模型为主，从零开始分析设计一个消息队列时需要考虑到的问题，如RPC、高可用、顺序和重复消息、可靠投递、消费关系解析等。&lt;/p&gt;

&lt;p&gt;也会分析以Kafka为代表的pull模型所具备的优点。最后是一些高级主题，如用批量/异步提高性能、pull模型的系统设计理念、存储子系统的设计、流量控制的设计、公平调度的实现等。其中最后四个方面会放在下篇讲解。&lt;/p&gt;

&lt;h1 id=&quot;1-何时需要消息队列&quot;&gt;1. 何时需要消息队列&lt;/h1&gt;

&lt;p&gt;当你需要使用消息队列时，首先需要考虑它的必要性。可以使用mq的场景有很多，最常用的几种，是做业务解耦/最终一致性/广播/错峰流控等。反之，如果需要强一致性，关注业务逻辑的处理结果，则RPC显得更为合适。&lt;/p&gt;

&lt;h2 id=&quot;11-解耦&quot;&gt;1.1 解耦&lt;/h2&gt;

&lt;p&gt;解耦是消息队列要解决的最本质问题。所谓解耦，简单点讲就是一个事务，只关心核心的流程。而需要依赖其他系统但不那么重要的事情，有通知即可，无需等待结果。换句话说，基于消息的模型，关心的是“通知”，而非“处理”。&lt;/p&gt;

&lt;p&gt;比如在美团旅游，我们有一个产品中心，产品中心上游对接的是主站、移动后台、旅游供应链等各个数据源；下游对接的是筛选系统、API系统等展示系统。当上游的数据发生变更的时候，如果不使用消息系统，势必要调用我们的接口来更新数据，就特别依赖产品中心接口的稳定性和处理能力。但其实，作为旅游的产品中心，也许只有对于旅游自建供应链，产品中心更新成功才是他们关心的事情。而对于团购等外部系统，产品中心更新成功也好、失败也罢，并不是他们的职责所在。他们只需要保证在信息变更的时候通知到我们就好了。&lt;/p&gt;

&lt;p&gt;而我们的下游，可能有更新索引、刷新缓存等一系列需求。对于产品中心来说，这也不是我们的职责所在。说白了，如果他们定时来拉取数据，也能保证数据的更新，只是实时性没有那么强。但使用接口方式去更新他们的数据，显然对于产品中心来说太过于“重量级”了，只需要发布一个产品ID变更的通知，由下游系统来处理，可能更为合理。&lt;/p&gt;

&lt;p&gt;再举一个例子，对于我们的订单系统，订单最终支付成功之后可能需要给用户发送短信积分什么的，但其实这已经不是我们系统的核心流程了。如果外部系统速度偏慢（比如短信网关速度不好），那么主流程的时间会加长很多，用户肯定不希望点击支付过好几分钟才看到结果。那么我们只需要通知短信系统“我们支付成功了”，不一定非要等待它处理完成。&lt;/p&gt;

&lt;h2 id=&quot;12-最终一致性&quot;&gt;1.2 最终一致性&lt;/h2&gt;

&lt;p&gt;最终一致性指的是两个系统的状态保持一致，要么都成功，要么都失败。当然有个时间限制，理论上越快越好，但实际上在各种异常的情况下，可能会有一定延迟达到最终一致状态，但最后两个系统的状态是一样的。&lt;/p&gt;

&lt;p&gt;业界有一些为“最终一致性”而生的消息队列，如Notify（阿里）、QMQ（去哪儿）等，其设计初衷，就是为了交易系统中的高可靠通知。&lt;/p&gt;

&lt;p&gt;以一个银行的转账过程来理解最终一致性，转账的需求很简单，如果A系统扣钱成功，则B系统加钱一定成功。反之则一起回滚，像什么都没发生一样。&lt;/p&gt;

&lt;p&gt;然而，这个过程中存在很多可能的意外：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;A扣钱成功，调用B加钱接口失败。&lt;/li&gt;
  &lt;li&gt;A扣钱成功，调用B加钱接口虽然成功，但获取最终结果时网络异常引起超时。&lt;/li&gt;
  &lt;li&gt;A扣钱成功，B加钱失败，A想回滚扣的钱，但A机器down机。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;可见，想把这件看似简单的事真正做成，真的不那么容易。所有跨VM的一致性问题，从技术的角度讲通用的解决方案是：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;强一致性，分布式事务，但落地太难且成本太高，后文会具体提到。&lt;/li&gt;
  &lt;li&gt;最终一致性，主要是用“记录”和“补偿”的方式。在做所有的不确定的事情之前，先把事情记录下来，然后去做不确定的事情，结果可能是：成功、失败或是不确定，“不确定”（例如超时等）可以等价为失败。成功就可以把记录的东西清理掉了，对于失败和不确定，可以依靠定时任务等方式把所有失败的事情重新搞一遍，直到成功为止。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;回到刚才的例子，系统在A扣钱成功的情况下，把要给B“通知”这件事记录在库里（为了保证最高的可靠性可以把通知B系统加钱和扣钱成功这两件事维护在一个本地事务里），通知成功则删除这条记录，通知失败或不确定则依靠定时任务补偿性地通知我们，直到我们把状态更新成正确的为止。&lt;/p&gt;

&lt;p&gt;整个这个模型依然可以基于RPC来做，但可以抽象成一个统一的模型，基于消息队列来做一个“企业总线”。&lt;/p&gt;

&lt;p&gt;具体来说，本地事务维护业务变化和通知消息，一起落地（失败则一起回滚），然后RPC到达broker，在broker成功落地后，RPC返回成功，本地消息可以删除。否则本地消息一直靠定时任务轮询不断重发，这样就保证了消息可靠落地broker。&lt;/p&gt;

&lt;p&gt;Broker往consumer发送消息的过程类似，一直发送消息，直到consumer发送消费成功确认。&lt;/p&gt;

&lt;p&gt;我们先不理会重复消息的问题，通过两次消息落地加补偿，下游是一定可以收到消息的。然后依赖状态机版本号等方式做判重，更新自己的业务，就实现了最终一致性。&lt;/p&gt;

&lt;p&gt;最终一致性不是消息队列的必备特性，但确实可以依靠消息队列来做最终一致性的事情。另外，所有不保证100%不丢消息的消息队列，理论上无法实现最终一致性。好吧，应该说理论上的100%，排除系统严重故障和bug。&lt;/p&gt;

&lt;p&gt;像Kafka一类的设计，在设计层面上就有丢消息的可能（比如定时刷盘，如果掉电就会丢消息）。哪怕只丢千分之一的消息，业务也必须用其他的手段来保证结果正确。&lt;/p&gt;

&lt;h2 id=&quot;13-广播&quot;&gt;1.3 广播&lt;/h2&gt;

&lt;p&gt;消息队列的基本功能之一是进行广播。如果没有消息队列，每当一个新的业务方接入，我们都要联调一次新接口。有了消息队列，我们只需要关心消息是否送达了队列，至于谁希望订阅，是下游的事情，无疑极大地减少了开发和联调的工作量。&lt;/p&gt;

&lt;p&gt;比如本文开始提到的产品中心发布产品变更的消息，以及景点库很多去重更新的消息，可能“关心”方有很多个，但产品中心和景点库只需要发布变更消息即可，谁关心谁接入。&lt;/p&gt;

&lt;h2 id=&quot;14-错峰与流控&quot;&gt;1.4 错峰与流控&lt;/h2&gt;

&lt;p&gt;试想上下游对于事情的处理能力是不同的。比如，Web前端每秒承受上千万的请求，并不是什么神奇的事情，只需要加多一点机器，再搭建一些LVS负载均衡设备和Nginx等即可。但数据库的处理能力却十分有限，即使使用SSD加分库分表，单机的处理能力仍然在万级。由于成本的考虑，我们不能奢求数据库的机器数量追上前端。&lt;/p&gt;

&lt;p&gt;这种问题同样存在于系统和系统之间，如短信系统可能由于短板效应，速度卡在网关上（每秒几百次请求），跟前端的并发量不是一个数量级。但用户晚上个半分钟左右收到短信，一般是不会有太大问题的。如果没有消息队列，两个系统之间通过协商、滑动窗口等复杂的方案也不是说不能实现。但系统复杂性指数级增长，势必在上游或者下游做存储，并且要处理定时、拥塞等一系列问题。而且每当有处理能力有差距的时候，都需要单独开发一套逻辑来维护这套逻辑。所以，利用中间系统转储两个系统的通信内容，并在下游系统有能力处理这些消息的时候，再处理这些消息，是一套相对较通用的方式。&lt;/p&gt;

&lt;p&gt;总而言之，消息队列不是万能的。对于需要强事务保证而且延迟敏感的，RPC是优于消息队列的。&lt;/p&gt;

&lt;p&gt;对于一些无关痛痒，或者对于别人非常重要但是对于自己不是那么关心的事情，可以利用消息队列去做。&lt;/p&gt;

&lt;p&gt;支持最终一致性的消息队列，能够用来处理延迟不那么敏感的“分布式事务”场景，而且相对于笨重的分布式事务，可能是更优的处理方式。&lt;/p&gt;

&lt;p&gt;当上下游系统处理能力存在差距的时候，利用消息队列做一个通用的“漏斗”。在下游有能力处理的时候，再进行分发。如果下游有很多系统关心你的系统发出的通知的时候，果断地使用消息队列吧。&lt;/p&gt;

&lt;h1 id=&quot;2-如何设计一个消息队列&quot;&gt;2. 如何设计一个消息队列&lt;/h1&gt;

&lt;h2 id=&quot;21-综述&quot;&gt;2.1 综述&lt;/h2&gt;

&lt;p&gt;我们现在明确了消息队列的使用场景，下一步就是如何设计实现一个消息队列了。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/04/message-queue-design/message-queue-01.png&quot; alt=&quot;01&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;基于消息的系统模型，不一定需要broker(消息队列服务端)。市面上的的Akka（actor模型）、ZeroMQ等，其实都是基于消息的系统设计范式，但是没有broker。&lt;/p&gt;

&lt;p&gt;我们之所以要设计一个消息队列，并且配备broker，无外乎要做两件事情：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;消息的转储，在更合适的时间点投递，或者通过一系列手段辅助消息最终能送达消费机。&lt;/li&gt;
  &lt;li&gt;规范一种范式和通用的模式，以满足解耦、最终一致性、错峰等需求。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;掰开了揉碎了看，最简单的消息队列可以做成一个消息转发器，把一次RPC做成两次RPC。发送者把消息投递到服务端（以下简称broker），服务端再将消息转发一手到接收端，就是这么简单。&lt;/p&gt;

&lt;p&gt;一般来讲，设计消息队列的整体思路是先build一个整体的数据流,例如producer发送给broker,broker发送给consumer,consumer回复消费确认，broker删除/备份消息等。&lt;/p&gt;

&lt;p&gt;利用RPC将数据流串起来。然后考虑RPC的高可用性，尽量做到无状态，方便水平扩展。&lt;/p&gt;

&lt;p&gt;之后考虑如何承载消息堆积，然后在合适的时机投递消息，而处理堆积的最佳方式，就是存储，存储的选型需要综合考虑性能/可靠性和开发维护成本等诸多因素。&lt;/p&gt;

&lt;p&gt;为了实现广播功能，我们必须要维护消费关系，可以利用zk/config server等保存消费关系。&lt;/p&gt;

&lt;p&gt;在完成了上述几个功能后，消息队列基本就实现了。然后我们可以考虑一些高级特性，如可靠投递，事务特性，性能优化等。&lt;/p&gt;

&lt;p&gt;下面我们会以设计消息队列时重点考虑的模块为主线，穿插灌输一些消息队列的特性实现方法，来具体分析设计实现一个消息队列时的方方面面。&lt;/p&gt;

&lt;h2 id=&quot;22-实现队列基本功能&quot;&gt;2.2 实现队列基本功能&lt;/h2&gt;

&lt;h3 id=&quot;221-rpc通信协议&quot;&gt;2.2.1 RPC通信协议&lt;/h3&gt;

&lt;p&gt;刚才讲到，所谓消息队列，无外乎两次RPC加一次转储，当然需要消费端最终做消费确认的情况是三次RPC。既然是RPC，就必然牵扯出一系列话题，什么负载均衡啊、服务发现啊、通信协议啊、序列化协议啊，等等。在这一块，我的强烈建议是不要重复造轮子。利用公司现有的RPC框架：Thrift也好，Dubbo也好，或者是其他自定义的框架也好。因为消息队列的RPC，和普通的RPC没有本质区别。当然了，自主利用Memchached或者Redis协议重新写一套RPC框架并非不可（如MetaQ使用了自己封装的Gecko NIO框架，卡夫卡也用了类似的协议）。但实现成本和难度无疑倍增。排除对效率的极端要求，都可以使用现成的RPC框架。&lt;/p&gt;

&lt;p&gt;简单来讲，服务端提供两个RPC服务，一个用来接收消息，一个用来确认消息收到。并且做到不管哪个server收到消息和确认消息，结果一致即可。当然这中间可能还涉及跨IDC的服务的问题。这里和RPC的原则是一致的，尽量优先选择本机房投递。你可能会问，如果producer和consumer本身就在两个机房了，怎么办？首先，broker必须保证感知的到所有consumer的存在。其次，producer尽量选择就近的机房就好了。&lt;/p&gt;

&lt;h3 id=&quot;222-高可用&quot;&gt;2.2.2 高可用&lt;/h3&gt;

&lt;p&gt;其实所有的高可用，是依赖于RPC和存储的高可用来做的。先来看RPC的高可用，美团的基于MTThrift的RPC框架，阿里的Dubbo等，其本身就具有服务自动发现，负载均衡等功能。而消息队列的高可用，只要保证broker接受消息和确认消息的接口是幂等的，并且consumer的几台机器处理消息是幂等的，这样就把消息队列的可用性，转交给RPC框架来处理了。&lt;/p&gt;

&lt;p&gt;那么怎么保证幂等呢？最简单的方式莫过于共享存储。broker多机器共享一个DB或者一个分布式文件/kv系统，则处理消息自然是幂等的。就算有单点故障，其他节点可以立刻顶上。另外failover可以依赖定时任务的补偿，这是消息队列本身天然就可以支持的功能。存储系统本身的可用性我们不需要操太多心，放心大胆的交给DBA们吧！&lt;/p&gt;

&lt;p&gt;对于不共享存储的队列，如Kafka使用分区加主备模式，就略微麻烦一些。需要保证每一个分区内的高可用性，也就是每一个分区至少要有一个主备且需要做数据的同步，关于这块HA的细节，可以参考下篇pull模型消息系统设计。&lt;/p&gt;

&lt;h3 id=&quot;223-服务端承载消息堆积的能力&quot;&gt;2.2.3 服务端承载消息堆积的能力&lt;/h3&gt;

&lt;p&gt;消息到达服务端如果不经过任何处理就到接收者了，broker就失去了它的意义。为了满足我们错峰/流控/最终可达等一系列需求，把消息存储下来，然后选择时机投递就显得是顺理成章的了。&lt;/p&gt;

&lt;p&gt;只是这个存储可以做成很多方式。比如存储在内存里，存储在分布式KV里，存储在磁盘里，存储在数据库里等等。但归结起来，主要有持久化和非持久化两种。&lt;/p&gt;

&lt;p&gt;持久化的形式能更大程度地保证消息的可靠性（如断电等不可抗外力），并且理论上能承载更大限度的消息堆积（外存的空间远大于内存）。&lt;/p&gt;

&lt;p&gt;但并不是每种消息都需要持久化存储。很多消息对于投递性能的要求大于可靠性的要求，且数量极大（如日志）。这时候，消息不落地直接暂存内存，尝试几次failover，最终投递出去也未尝不可。&lt;/p&gt;

&lt;p&gt;市面上的消息队列普遍两种形式都支持。当然具体的场景还要具体结合公司的业务来看。&lt;/p&gt;

&lt;h3 id=&quot;224-存储子系统的选择&quot;&gt;2.2.4 存储子系统的选择&lt;/h3&gt;

&lt;p&gt;我们来看看如果需要数据落地的情况下各种存储子系统的选择。理论上，从速度来看，文件系统&amp;gt;分布式KV（持久化）&amp;gt;分布式文件系统&amp;gt;数据库，而可靠性却截然相反。还是要从支持的业务场景出发作出最合理的选择，如果你们的消息队列是用来支持支付/交易等对可靠性要求非常高，但对性能和量的要求没有这么高，而且没有时间精力专门做文件存储系统的研究，DB是最好的选择。&lt;/p&gt;

&lt;p&gt;但是DB受制于IOPS，如果要求单broker 5位数以上的QPS性能，基于文件的存储是比较好的解决方案。整体上可以采用数据文件+索引文件的方式处理，具体这块的设计比较复杂，可以参考下篇的存储子系统设计。&lt;/p&gt;

&lt;p&gt;分布式KV（如MongoDB，HBase）等，或者持久化的Redis，由于其编程接口较友好，性能也比较可观，如果在可靠性要求不是那么高的场景，也不失为一个不错的选择。&lt;/p&gt;

&lt;h3 id=&quot;225-消费关系解析&quot;&gt;2.2.5 消费关系解析&lt;/h3&gt;

&lt;p&gt;现在我们的消息队列初步具备了转储消息的能力。下面一个重要的事情就是解析发送接收关系，进行正确的消息投递了。&lt;/p&gt;

&lt;p&gt;市面上的消息队列定义了一堆让人晕头转向的名词，如JMS 规范中的Topic/Queue，Kafka里面的Topic/Partition/ConsumerGroup，RabbitMQ里面的Exchange等等。抛开现象看本质，无外乎是单播与广播的区别。所谓单播，就是点到点；而广播，是一点对多点。当然，对于互联网的大部分应用来说，组间广播、组内单播是最常见的情形。&lt;/p&gt;

&lt;p&gt;消息需要通知到多个业务集群，而一个业务集群内有很多台机器，只要一台机器消费这个消息就可以了。&lt;/p&gt;

&lt;p&gt;当然这不是绝对的，很多时候组内的广播也是有适用场景的，如本地缓存的更新等等。另外，消费关系除了组内组间，可能会有多级树状关系。这种情况太过于复杂，一般不列入考虑范围。所以，一般比较通用的设计是支持组间广播，不同的组注册不同的订阅。组内的不同机器，如果注册一个相同的ID，则单播；如果注册不同的ID(如IP地址+端口)，则广播。&lt;/p&gt;

&lt;p&gt;至于广播关系的维护，一般由于消息队列本身都是集群，所以都维护在公共存储上，如config server、zookeeper等。维护广播关系所要做的事情基本是一致的:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;发送关系的维护。&lt;/li&gt;
  &lt;li&gt;发送关系变更时的通知。&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;23-队列高级特性设计&quot;&gt;2.3 队列高级特性设计&lt;/h2&gt;

&lt;p&gt;上面都是些消息队列基本功能的实现，下面来看一些关于消息队列特性相关的内容，不管可靠投递/消息丢失与重复以及事务乃至于性能，不是每个消息队列都会照顾到，所以要依照业务的需求，来仔细衡量各种特性实现的成本，利弊，最终做出最为合理的设计。&lt;/p&gt;

&lt;h3 id=&quot;231-可靠投递最终一致性&quot;&gt;2.3.1 可靠投递（最终一致性）&lt;/h3&gt;

&lt;p&gt;这是个激动人心的话题，完全不丢消息，究竟可不可能？答案是，完全可能，前提是消息可能会重复，并且，在异常情况下，要接受消息的延迟。&lt;/p&gt;

&lt;p&gt;方案说简单也简单，就是每当要发生不可靠的事情（RPC等）之前，先将消息落地，然后发送。当失败或者不知道成功失败（比如超时）时，消息状态是待发送，定时任务不停轮询所有待发送消息，最终一定可以送达。&lt;/p&gt;

&lt;p&gt;具体来说：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;producer往broker发送消息之前，需要做一次落地。&lt;/li&gt;
  &lt;li&gt;请求到server后，server确保数据落地后再告诉客户端发送成功。&lt;/li&gt;
  &lt;li&gt;支持广播的消息队列需要对每个待发送的endpoint，持久化一个发送状态，直到所有endpoint状态都OK才可删除消息。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;对于各种不确定（超时、down机、消息没有送达、送达后数据没落地、数据落地了回复没收到），其实对于发送方来说，都是一件事情，就是消息没有送达。&lt;/p&gt;

&lt;p&gt;重推消息所面临的问题就是消息重复。重复和丢失就像两个噩梦，你必须要面对一个。好在消息重复还有处理的机会，消息丢失再想找回就难了。&lt;/p&gt;

&lt;p&gt;Anyway，作为一个成熟的消息队列，应该尽量在各个环节减少重复投递的可能性，不能因为重复有解决方案就放纵的乱投递。&lt;/p&gt;

&lt;p&gt;最后说一句，不是所有的系统都要求最终一致性或者可靠投递，比如一个论坛系统、一个招聘系统。一个重复的简历或话题被发布，可能比丢失了一个发布显得更让用户无法接受。不断重复一句话，任何基础组件要服务于业务场景。&lt;/p&gt;

&lt;h4 id=&quot;2311-消费确认&quot;&gt;2.3.1.1 消费确认&lt;/h4&gt;

&lt;p&gt;当broker把消息投递给消费者后，消费者可以立即响应我收到了这个消息。但收到了这个消息只是第一步，我能不能处理这个消息却不一定。或许因为消费能力的问题，系统的负荷已经不能处理这个消息；或者是刚才状态机里面提到的消息不是我想要接收的消息，主动要求重发。&lt;/p&gt;

&lt;p&gt;把消息的送达和消息的处理分开，这样才真正的实现了消息队列的本质-解耦。所以，允许消费者主动进行消费确认是必要的。当然，对于没有特殊逻辑的消息，默认Auto Ack也是可以的，但一定要允许消费方主动ack。&lt;/p&gt;

&lt;p&gt;对于正确消费ack的，没什么特殊的。但是对于reject和error，需要特别说明。reject这件事情，往往业务方是无法感知到的，系统的流量和健康状况的评估，以及处理能力的评估是一件非常复杂的事情。举个极端的例子，收到一个消息开始build索引，可能这个消息要处理半个小时，但消息量却是非常的小。所以reject这块建议做成滑动窗口/线程池类似的模型来控制，消费能力不匹配的时候，直接拒绝，过一段时间重发，减少业务的负担。&lt;/p&gt;

&lt;p&gt;但业务出错这件事情是只有业务方自己知道的，就像上文提到的状态机等等。这时应该允许业务方主动ack error，并可以与broker约定下次投递的时间。&lt;/p&gt;

&lt;h4 id=&quot;2312-重复消息和顺序消息&quot;&gt;2.3.1.2 重复消息和顺序消息&lt;/h4&gt;

&lt;p&gt;上文谈到重复消息是不可能100%避免的，除非可以允许丢失，那么，顺序消息能否100%满足呢? 答案是可以，但条件更为苛刻：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;允许消息丢失。&lt;/li&gt;
  &lt;li&gt;从发送方到服务方到接受者都是单点单线程。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;所以绝对的顺序消息基本上是不能实现的，当然在METAQ/Kafka等pull模型的消息队列中，单线程生产/消费，排除消息丢失，也是一种顺序消息的解决方案。&lt;/p&gt;

&lt;p&gt;一般来讲，一个主流消息队列的设计范式里，应该是不丢消息的前提下，尽量减少重复消息，不保证消息的投递顺序。&lt;/p&gt;

&lt;p&gt;谈到重复消息，主要是两个话题：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;如何鉴别消息重复，并幂等的处理重复消息。&lt;/li&gt;
  &lt;li&gt;一个消息队列如何尽量减少重复消息的投递。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;先来看看第一个话题，每一个消息应该有它的唯一身份。不管是业务方自定义的，还是根据IP/PID/时间戳生成的MessageId，如果有地方记录这个MessageId，消息到来是能够进行比对就能完成重复的鉴定。数据库的唯一键/bloom filter/分布式KV中的key，都是不错的选择。由于消息不能被永久存储，所以理论上都存在消息从持久化存储移除的瞬间上游还在投递的可能（上游因种种原因投递失败，不停重试，都到了下游清理消息的时间）。这种事情都是异常情况下才会发生的，毕竟是小众情况。两分钟消息都还没送达，多送一次又能怎样呢？幂等的处理消息是一门艺术，因为种种原因重复消息或者错乱的消息还是来到了，说两种通用的解决方案：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;版本号。&lt;/li&gt;
  &lt;li&gt;状态机。&lt;/li&gt;
&lt;/ol&gt;

&lt;h5 id=&quot;版本号&quot;&gt;版本号&lt;/h5&gt;

&lt;p&gt;举个简单的例子，一个产品的状态有上线/下线状态。如果消息1是下线，消息2是上线。不巧消息1判重失败，被投递了两次，且第二次发生在2之后，如果不做重复性判断，显然最终状态是错误的。&lt;/p&gt;

&lt;p&gt;但是，如果每个消息自带一个版本号。上游发送的时候，标记消息1版本号是1，消息2版本号是2。如果再发送下线消息，则版本号标记为3。下游对于每次消息的处理，同时维护一个版本号。&lt;/p&gt;

&lt;p&gt;每次只接受比当前版本号大的消息。初始版本为0，当消息1到达时，将版本号更新为1。消息2到来时，因为版本号&amp;gt;1.可以接收，同时更新版本号为2.当另一条下线消息到来时，如果版本号是3.则是真实的下线消息。如果是1，则是重复投递的消息。&lt;/p&gt;

&lt;p&gt;如果业务方只关心消息重复不重复，那么问题就已经解决了。但很多时候另一个头疼的问题来了，就是消息顺序如果和想象的顺序不一致。比如应该的顺序是12，到来的顺序是21。则最后会发生状态错误。&lt;/p&gt;

&lt;p&gt;参考TCP/IP协议，如果想让乱序的消息最后能够正确的被组织，那么就应该只接收比当前版本号大一的消息。并且在一个session周期内要一直保存各个消息的版本号。&lt;/p&gt;

&lt;p&gt;如果到来的顺序是21，则先把2存起来，待2到来后，再处理1，这样重复性和顺序性要求就都达到了。&lt;/p&gt;

&lt;h5 id=&quot;状态机&quot;&gt;状态机&lt;/h5&gt;

&lt;p&gt;基于版本号来处理重复和顺序消息听起来是个不错的主意，但凡事总有瑕疵。使用版本号的最大问题是：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;对发送方必须要求消息带业务版本号。&lt;/li&gt;
  &lt;li&gt;下游必须存储消息的版本号，对于要严格保证顺序的。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;还不能只存储最新的版本号的消息，要把乱序到来的消息都存储起来。而且必须要对此做出处理。试想一个永不过期的”session”，比如一个物品的状态，会不停流转于上下线。那么中间环节的所有存储就必须保留，直到在某个版本号之前的版本一个不丢的到来，成本太高。&lt;/p&gt;

&lt;p&gt;就刚才的场景看，如果消息没有版本号，该怎么解决呢？业务方只需要自己维护一个状态机，定义各种状态的流转关系。例如，”下线”状态只允许接收”上线”消息，“上线”状态只能接收“下线消息”，如果上线收到上线消息，或者下线收到下线消息，在消息不丢失和上游业务正确的前提下。要么是消息发重了，要么是顺序到达反了。这时消费者只需要把“我不能处理这个消息”告诉投递者，要求投递者过一段时间重发即可。而且重发一定要有次数限制，比如5次，避免死循环，就解决了。&lt;/p&gt;

&lt;p&gt;举例子说明，假设产品本身状态是下线，1是上线消息，2是下线消息，3是上线消息，正常情况下，消息应该的到来顺序是123，但实际情况下收到的消息状态变成了3123。&lt;/p&gt;

&lt;p&gt;那么下游收到3消息的时候，判断状态机流转是下线-&amp;gt;上线，可以接收消息。然后收到消息1，发现是上线-&amp;gt;上线，拒绝接收，要求重发。然后收到消息2，状态是上线-&amp;gt;下线，于是接收这个消息。&lt;/p&gt;

&lt;p&gt;此时无论重发的消息1或者3到来，还是可以接收。另外的重发，在一定次数拒绝后停止重发，业务正确。&lt;/p&gt;

&lt;h4 id=&quot;2313-中间件对于重复消息的处理&quot;&gt;2.3.1.3 中间件对于重复消息的处理&lt;/h4&gt;

&lt;p&gt;回归到消息队列的话题来讲。上述通用的版本号/状态机/ID判重解决方案里，哪些是消息队列该做的、哪些是消息队列不该做业务方处理的呢？其实这里没有一个完全严格的定义，但回到我们的出发点，我们保证不丢失消息的情况下尽量少重复消息，消费顺序不保证。那么重复消息下和乱序消息下业务的正确，应该是由消费方保证的，我们要做的是减少消息发送的重复。&lt;/p&gt;

&lt;p&gt;我们无法定义业务方的业务版本号/状态机，如果API里强制需要指定版本号，则显得过于绑架客户了。况且，在消费方维护这么多状态，就涉及到一个消费方的消息落地/多机间的同步消费状态问题，复杂度指数级上升，而且只能解决部分问题。&lt;/p&gt;

&lt;p&gt;减少重复消息的关键步骤：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;broker记录MessageId，直到投递成功后清除，重复的ID到来不做处理，这样只要发送者在清除周期内能够感知到消息投递成功，就基本不会在server端产生重复消息。&lt;/li&gt;
  &lt;li&gt;对于server投递到consumer的消息，由于不确定对端是在处理过程中还是消息发送丢失的情况下，有必要记录下投递的IP地址。决定重发之前询问这个IP，消息处理成功了吗？如果询问无果，再重发。&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;232-事务&quot;&gt;2.3.2 事务&lt;/h3&gt;

&lt;p&gt;持久性是事务的一个特性，然而只满足持久性却不一定能满足事务的特性。还是拿扣钱/加钱的例子讲。满足事务的一致性特征，则必须要么都不进行，要么都能成功。&lt;/p&gt;

&lt;p&gt;解决方案从大方向上有两种：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;两阶段提交，分布式事务。&lt;/li&gt;
  &lt;li&gt;本地事务，本地落地，补偿发送。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;分布式事务存在的最大问题是成本太高，两阶段提交协议，对于仲裁down机或者单点故障，几乎是一个无解的黑洞。对于交易密集型或者I/O密集型的应用，没有办法承受这么高的网络延迟，系统复杂性。&lt;/p&gt;

&lt;p&gt;并且成熟的分布式事务一定构建与比较靠谱的商用DB和商用中间件上，成本也太高。&lt;/p&gt;

&lt;p&gt;那如何使用本地事务解决分布式事务的问题呢？以本地和业务在一个数据库实例中建表为例子，与扣钱的业务操作同一个事务里，将消息插入本地数据库。如果消息入库失败，则业务回滚；如果消息入库成功，事务提交。&lt;/p&gt;

&lt;p&gt;然后发送消息（注意这里可以实时发送，不需要等定时任务检出，以提高消息实时性）。以后的问题就是前文的最终一致性问题所提到的了，只要消息没有发送成功，就一直靠定时任务重试。&lt;/p&gt;

&lt;p&gt;这里有一个关键的点，本地事务做的，是业务落地和消息落地的事务，而不是业务落地和RPC成功的事务。这里很多人容易混淆，如果是后者，无疑是事务嵌套RPC，是大忌，会有长事务死锁等各种风险。&lt;/p&gt;

&lt;p&gt;而消息只要成功落地，很大程度上就没有丢失的风险（磁盘物理损坏除外）。而消息只要投递到服务端确认后本地才做删除，就完成了producer-&amp;gt;broker的可靠投递，并且当消息存储异常时，业务也是可以回滚的。&lt;/p&gt;

&lt;p&gt;本地事务存在两个最大的使用障碍：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;配置较为复杂，“绑架”业务方，必须本地数据库实例提供一个库表。&lt;/li&gt;
  &lt;li&gt;对于消息延迟高敏感的业务不适用。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;话说回来，不是每个业务都需要强事务的。扣钱和加钱需要事务保证，但下单和生成短信却不需要事务，不能因为要求发短信的消息存储投递失败而要求下单业务回滚。所以，一个完整的消息队列应该定义清楚自己可以投递的消息类型，如事务型消息，本地非持久型消息，以及服务端不落地的非可靠消息等。对不同的业务场景做不同的选择。另外事务的使用应该尽量低成本、透明化，可以依托于现有的成熟框架，如Spring的声明式事务做扩展。业务方只需要使用@Transactional标签即可。&lt;/p&gt;

&lt;h3 id=&quot;233-性能相关&quot;&gt;2.3.3 性能相关&lt;/h3&gt;

&lt;h4 id=&quot;2331-异步同步&quot;&gt;2.3.3.1 异步/同步&lt;/h4&gt;

&lt;p&gt;首先澄清一个概念，异步，同步和oneway是三件事。异步，归根结底你还是需要关心结果的，但可能不是当时的时间点关心，可以用轮询或者回调等方式处理结果；同步是需要当时关心的结果的；而oneway是发出去就不管死活的方式，这种对于某些完全对可靠性没有要求的场景还是适用的，但不是我们重点讨论的范畴。&lt;/p&gt;

&lt;p&gt;回归来看，任何的RPC都是存在客户端异步与服务端异步的，而且是可以任意组合的：客户端同步对服务端异步，客户端异步对服务端异步，客户端同步对服务端同步，客户端异步对服务端同步。&lt;/p&gt;

&lt;p&gt;对于客户端来说，同步与异步主要是拿到一个Result，还是Future(Listenable)的区别。实现方式可以是线程池，NIO或者其他事件机制，这里先不展开讲。&lt;/p&gt;

&lt;p&gt;服务端异步可能稍微难理解一点，这个是需要RPC协议支持的。参考servlet 3.0规范，服务端可以吐一个future给客户端，并且在future done的时候通知客户端。&lt;/p&gt;

&lt;p&gt;整个过程可以参考下面的代码：&lt;/p&gt;

&lt;p&gt;客户端同步服务端异步。&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Future&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;future&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// server立刻返回future&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;synchronized&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;future&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;future&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isDone&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;future&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;wait&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// server处理结束后会notify这个future，并修改isdone标志&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;future&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;客户端同步服务端同步。&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Result&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;客户端异步服务端同步(这里用线程池的方式)。&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Future&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;future&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;executor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;submit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Callable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;future&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;客户端异步服务端异步。&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Future&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;future&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// server立刻返回future&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;future&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;上面说了这么多，其实是想让大家脱离两个误区：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;RPC只有客户端能做异步，服务端不能。&lt;/li&gt;
  &lt;li&gt;异步只能通过线程池。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;那么，服务端使用异步最大的好处是什么呢？说到底，是解放了线程和I/O。试想服务端有一堆I/O等待处理，如果每个请求都需要同步响应，每条消息都需要结果立刻返回，那么就几乎没法做I/O合并（当然接口可以设计成batch的，但可能batch发过来的仍然数量较少）。而如果用异步的方式返回给客户端future，就可以有机会进行I/O的合并，把几个批次发过来的消息一起落地（这种合并对于MySQL等允许batch insert的数据库效果尤其明显），并且彻底释放了线程。不至于说来多少请求开多少线程，能够支持的并发量直线提高。&lt;/p&gt;

&lt;p&gt;来看第二个误区，返回future的方式不一定只有线程池。换句话说，可以在线程池里面进行同步操作，也可以进行异步操作，也可以不使用线程池使用异步操作（NIO、事件）。&lt;/p&gt;

&lt;p&gt;回到消息队列的议题上，我们当然不希望消息的发送阻塞主流程（前面提到了，server端如果使用异步模型，则可能因消息合并带来一定程度上的消息延迟），所以可以先使用线程池提交一个发送请求，主流程继续往下走。&lt;/p&gt;

&lt;p&gt;但是线程池中的请求关心结果吗？Of course，必须等待服务端消息成功落地，才算是消息发送成功。所以这里的模型，准确地说事客户端半同步半异步（使用线程池不阻塞主流程，但线程池中的任务需要等待server端的返回），server端是纯异步。客户端的线程池wait在server端吐回的future上，直到server端处理完毕，才解除阻塞继续进行。&lt;/p&gt;

&lt;p&gt;总结一句，同步能够保证结果，异步能够保证效率，要合理的结合才能做到最好的效率。&lt;/p&gt;

&lt;h4 id=&quot;2332-批量&quot;&gt;2.3.3.2 批量&lt;/h4&gt;

&lt;p&gt;谈到批量就不得不提生产者消费者模型。但生产者消费者模型中最大的痛点是：消费者到底应该何时进行消费。大处着眼来看，消费动作都是事件驱动的。主要事件包括：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;攒够了一定数量。&lt;/li&gt;
  &lt;li&gt;到达了一定时间。&lt;/li&gt;
  &lt;li&gt;队列里有新的数据到来。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;对于及时性要求高的数据，可用采用方式3来完成，比如客户端向服务端投递数据。只要队列有数据，就把队列中的所有数据刷出，否则将自己挂起，等待新数据的到来。&lt;/p&gt;

&lt;p&gt;在第一次把队列数据往外刷的过程中，又积攒了一部分数据，第二次又可以形成一个批量。伪代码如下:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Executor&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;executor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Executors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;newFixedThreadPool&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BlockingQueue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ArrayBlockingQueue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;();&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Runnable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Runnable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 这里由于共享队列，Runnable可以复用，故做成全局的&lt;/span&gt;
   &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;messages&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ArrayList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drainTo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;messages&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;，&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;doSend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;messages&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 阻塞，在这个过程中会有新的消息到来，如果4个线程都占满，队列就有机会囤新的消息&lt;/span&gt;
   &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Message&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;offer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;executor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;submit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;这种方式是消息延迟和批量的一个比较好的平衡，但优先响应低延迟。延迟的最高程度由上一次发送的等待时间决定。但可能造成的问题是发送过快的话批量的大小不够满足性能的极致。&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Executor&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;executor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Executors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;newFixedThreadPool&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BlockingQueue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ArrayBlockingQueue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;currentMills&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;Executors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;newSingleThreadScheduledExecutor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;submit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Runnable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;flush&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;，&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;，&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;，&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TimeUnits&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;MILLS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Runnable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Runnable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 这里由于共享队列，Runnable可以复用，顾做成全局的。&lt;/span&gt;
   &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;messages&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ArrayList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drainTo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;messages&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;，&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;doSend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;messages&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 阻塞，在这个过程中会有新的消息到来，如果4个线程都占满，队列就有机会屯新的消息。&lt;/span&gt;
   &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Message&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;last&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;currentMills&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;offer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;flush&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;flush&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;currentMills&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;executor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;submit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;相反对于可以用适量的延迟来换取高性能的场景来说，用定时/定量二选一的方式可能会更为理想，既到达一定数量才发送，但如果数量一直达不到，也不能干等，有一个时间上限。&lt;/p&gt;

&lt;p&gt;具体说来，在上文的submit之前，多判断一个时间和数量，并且Runnable内部维护一个定时器，避免没有新任务到来时旧的任务永远没有机会触发发送条件。对于server端的数据落地，使用这种方式就非常方便。&lt;/p&gt;

&lt;p&gt;最后啰嗦几句，曾经有人问我，为什么网络请求小包合并成大包会提高性能？主要原因有两个：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;减少无谓的请求头，如果你每个请求只有几字节，而头却有几十字节，无疑效率非常低下。&lt;/li&gt;
  &lt;li&gt;减少回复的ack包个数。把请求合并后，ack包数量必然减少，确认和重发的成本就会降低。&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;24-push还是pull&quot;&gt;2.4 push还是pull&lt;/h2&gt;

&lt;p&gt;上文提到的消息队列，大多是针对push模型的设计。现在市面上有很多经典的也比较成熟的pull模型的消息队列，如Kafka、MetaQ等。这跟JMS中传统的push方式有很大的区别，可谓另辟蹊径。&lt;/p&gt;

&lt;p&gt;我们简要分析下push和pull模型各自存在的利弊。&lt;/p&gt;

&lt;h3 id=&quot;241-慢消费&quot;&gt;2.4.1 慢消费&lt;/h3&gt;

&lt;p&gt;慢消费无疑是push模型最大的致命伤，穿成流水线来看，如果消费者的速度比发送者的速度慢很多，势必造成消息在broker的堆积。假设这些消息都是有用的无法丢弃的，消息就要一直在broker端保存。当然这还不是最致命的，最致命的是broker给consumer推送一堆consumer无法处理的消息，consumer不是reject就是error，然后来回踢皮球。&lt;/p&gt;

&lt;p&gt;反观pull模式，consumer可以按需消费，不用担心自己处理不了的消息来骚扰自己，而broker堆积消息也会相对简单，无需记录每一个要发送消息的状态，只需要维护所有消息的队列和偏移量就可以了。所以对于建立索引等慢消费，消息量有限且到来的速度不均匀的情况，pull模式比较合适。&lt;/p&gt;

&lt;h3 id=&quot;242-消息延迟与忙等&quot;&gt;2.4.2 消息延迟与忙等&lt;/h3&gt;

&lt;p&gt;这是pull模式最大的短板。由于主动权在消费方，消费方无法准确地决定何时去拉取最新的消息。如果一次pull取到消息了还可以继续去pull，如果没有pull取到则需要等待一段时间重新pull。&lt;/p&gt;

&lt;p&gt;但等待多久就很难判定了。你可能会说，我可以有xx动态pull取时间调整算法，但问题的本质在于，有没有消息到来这件事情决定权不在消费方。也许1分钟内连续来了1000条消息，然后半个小时没有新消息产生，可能你的算法算出下次最有可能到来的时间点是31分钟之后，或者60分钟之后，结果下条消息10分钟后到了，是不是很让人沮丧？当然也不是说延迟就没有解决方案了，业界较成熟的做法是从短时间开始（不会对broker有太大负担），然后指数级增长等待。比如开始等5ms，然后10ms，然后20ms，然后40ms……直到有消息到来，然后再回到5ms。&lt;/p&gt;

&lt;p&gt;即使这样，依然存在延迟问题：假设40ms到80ms之间的50ms消息到来，消息就延迟了30ms，而且对于半个小时来一次的消息，这些开销就是白白浪费的。&lt;/p&gt;

&lt;p&gt;在阿里的RocketMq里，有一种优化的做法-长轮询，来平衡推拉模型各自的缺点。基本思路是:消费者如果尝试拉取失败，不是直接return,而是把连接挂在那里wait,服务端如果有新的消息到来，把连接notify起来，这也是不错的思路。但海量的长连接block对系统的开销还是不容小觑的，还是要合理的评估时间间隔，给wait加一个时间上限比较好~&lt;/p&gt;

&lt;h3 id=&quot;243-顺序消息&quot;&gt;2.4.3 顺序消息&lt;/h3&gt;

&lt;p&gt;如果push模式的消息队列，支持分区，单分区只支持一个消费者消费，并且消费者只有确认一个消息消费后才能push送另外一个消息，还要发送者保证全局顺序唯一，听起来也能做顺序消息，但成本太高了，尤其是必须每个消息消费确认后才能发下一条消息，这对于本身堆积能力和慢消费就是瓶颈的push模式的消息队列，简直是一场灾难。&lt;/p&gt;

&lt;p&gt;反观pull模式，如果想做到全局顺序消息，就相对容易很多：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;producer对应partition，并且单线程。&lt;/li&gt;
  &lt;li&gt;consumer对应partition，消费确认（或批量确认），继续消费即可。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;所以对于日志push送这种最好全局有序，但允许出现小误差的场景，pull模式非常合适。如果你不想看到通篇乱套的日志~~Anyway，需要顺序消息的场景还是比较有限的而且成本太高，请慎重考虑。&lt;/p&gt;

&lt;h1 id=&quot;3-总结&quot;&gt;3. 总结&lt;/h1&gt;

&lt;p&gt;本文从为何使用消息队列开始讲起，然后主要介绍了如何从零开始设计一个消息队列，包括RPC、事务、最终一致性、广播、消息确认等关键问题。并对消息队列的push、pull模型做了简要分析，最后从批量和异步角度，分析了消息队列性能优化的思路。下篇会着重介绍一些高级话题，如存储系统的设计、流控和错峰的设计、公平调度等。希望通过这些，让大家对消息队列有个提纲挈领的整体认识，并给自主开发消息队列提供思路。另外，本文主要是源自自己在开发消息队列中的思考和读源码时的体会，比较不”官方”，也难免会存在一些漏洞，欢迎大家多多交流。&lt;/p&gt;

&lt;p&gt;后续我们还会推出消息队列设计高级篇，内容会涵盖以下方面：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;pull模型消息系统设计理念&lt;/li&gt;
  &lt;li&gt;存储子系统设计&lt;/li&gt;
  &lt;li&gt;流量控制&lt;/li&gt;
  &lt;li&gt;公平调度&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;敬请期待哦~&lt;/p&gt;

&lt;h2 id=&quot;作者简介&quot;&gt;作者简介&lt;/h2&gt;

&lt;p&gt;王烨，现在是美团旅游后台研发组的程序猿，之前曾经在百度、去哪和优酷工作过，专注Java后台开发。对于网络编程和并发编程具有浓厚的兴趣，曾经做过一些基础组件，也翻过一些源码，属于比较典型的宅男技术控。期待能够与更多知己，在coding的路上并肩前行~&lt;/p&gt;
</description>
				<pubDate>Fri, 26 Apr 2019 10:01:22 +0800</pubDate>
				<link>https://xenojoshua.com/2019/04/message-queue-design/</link>
				<guid isPermaLink="true">https://xenojoshua.com/2019/04/message-queue-design/</guid>
			</item>
		
			<item>
				<title>Elasticsearch Notes</title>
				<description>&lt;h4&gt;Table of Contents&lt;/h4&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1-前言&quot; id=&quot;markdown-toc-1-前言&quot;&gt;1. 前言&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-log-shipper&quot; id=&quot;markdown-toc-2-log-shipper&quot;&gt;2. Log Shipper&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#21-横向比较--选择&quot; id=&quot;markdown-toc-21-横向比较--选择&quot;&gt;2.1 横向比较 &amp;amp; 选择&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#22-架构设计&quot; id=&quot;markdown-toc-22-架构设计&quot;&gt;2.2 架构设计&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-filebeat&quot; id=&quot;markdown-toc-3-filebeat&quot;&gt;3. Filebeat&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#31-设计--基础概念&quot; id=&quot;markdown-toc-31-设计--基础概念&quot;&gt;3.1 设计 &amp;amp; 基础概念&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#32-使用&quot; id=&quot;markdown-toc-32-使用&quot;&gt;3.2 使用&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#33-模块&quot; id=&quot;markdown-toc-33-模块&quot;&gt;3.3 模块&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#34-过滤和丰富&quot; id=&quot;markdown-toc-34-过滤和丰富&quot;&gt;3.4 过滤和丰富&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#35-文件状态记录--投递保证&quot; id=&quot;markdown-toc-35-文件状态记录--投递保证&quot;&gt;3.5 文件状态记录 &amp;amp; 投递保证&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4-elasticsearch&quot; id=&quot;markdown-toc-4-elasticsearch&quot;&gt;4. Elasticsearch&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#41-知识点&quot; id=&quot;markdown-toc-41-知识点&quot;&gt;4.1 知识点&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#411-基础概念&quot; id=&quot;markdown-toc-411-基础概念&quot;&gt;4.1.1 基础概念&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#412-安装--配置&quot; id=&quot;markdown-toc-412-安装--配置&quot;&gt;4.1.2 安装 &amp;amp; 配置&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#413-api&quot; id=&quot;markdown-toc-413-api&quot;&gt;4.1.3 API&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#414-query-dsl&quot; id=&quot;markdown-toc-414-query-dsl&quot;&gt;4.1.4 Query DSL&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#415-sql&quot; id=&quot;markdown-toc-415-sql&quot;&gt;4.1.5 SQL&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#416-ingest节点&quot; id=&quot;markdown-toc-416-ingest节点&quot;&gt;4.1.6 Ingest节点&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ID_INDEX&quot; id=&quot;markdown-toc-ID_INDEX&quot;&gt;4.2 文档数据库 &amp;amp; 索引&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ID_STORAGE&quot; id=&quot;markdown-toc-ID_STORAGE&quot;&gt;4.3 存储&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ID_ARC_CLUSTER&quot; id=&quot;markdown-toc-ID_ARC_CLUSTER&quot;&gt;4.4 集群&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#45-监控--高可用&quot; id=&quot;markdown-toc-45-监控--高可用&quot;&gt;4.5 监控 &amp;amp; 高可用&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#451-监控&quot; id=&quot;markdown-toc-451-监控&quot;&gt;4.5.1 监控&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#452-高可用&quot; id=&quot;markdown-toc-452-高可用&quot;&gt;4.5.2 高可用&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#46-性能调优&quot; id=&quot;markdown-toc-46-性能调优&quot;&gt;4.6 性能调优&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5-ui&quot; id=&quot;markdown-toc-5-ui&quot;&gt;5. UI&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#6-实践范例&quot; id=&quot;markdown-toc-6-实践范例&quot;&gt;6. 实践范例&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#7-todo&quot; id=&quot;markdown-toc-7-todo&quot;&gt;7. TODO&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#资料&quot; id=&quot;markdown-toc-资料&quot;&gt;资料&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#链接&quot; id=&quot;markdown-toc-链接&quot;&gt;链接&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;1-前言&quot;&gt;1. 前言&lt;/h1&gt;
&lt;p&gt;之前做了Prometheus和Jaeger相关的调研工作，这两者虽然也涉及到日志聚合相关的技术或是类似的技术，但毕竟不是通用的日志聚合系统。通用的日志聚合系统需要能接受任何类型的日志，并将其索引入库以备后续的查询。市面上这方面的产品现在基本上是Elasticsearch为主要选择，已经可以说是很成熟了。所以这块需求我这里也是以ELK为第一备选进行相关的调研。&lt;/p&gt;

&lt;p&gt;后续的调研内容版本如下：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;elasticsearch 7.0.0
elastic/filebeat 7.0.0
kibana 7.0.0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;在提到Elasticsearch的时候我们一般不会只说Elasticsearch本身，而是会提到&lt;code&gt;ELK&lt;/code&gt;这个词，这里说的其实就是从日志采集、清洗、转换、分发、到最后入库的整个流程，以及查询用的面板包含在内的一整套生态。因此下面行文会从：日志采集、日志存储、日志查询三方面着手。&lt;/p&gt;

&lt;p&gt;官方文档：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/index.html&quot; target=&quot;_blank&quot;&gt;Elastic Stack and Product Documentation&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/index.html&quot; target=&quot;_blank&quot;&gt;Elasticsearch Reference&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/beats/filebeat/7.0/index.html&quot; target=&quot;_blank&quot;&gt;Filebeat Reference&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/kibana/7.0/index.html&quot; target=&quot;_blank&quot;&gt;Kibana User Guide&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;2-log-shipper&quot;&gt;2. Log Shipper&lt;/h1&gt;
&lt;p&gt;日志是在各个应用程序中生产的，此外也包括了操作系统级别的日志生产。因此日志的产生这个行为是分散在各个节点上的，日志的收集就是从分散的节点采集数据汇集到中心存储的一个过程，这也是所谓的&lt;code&gt;聚合&lt;/code&gt;。而从分散的节点上采集数据，我们需要Agent（Log Shipper）来执行这个操作。&lt;/p&gt;

&lt;p&gt;经典的&lt;code&gt;ELK&lt;/code&gt;中，&lt;code&gt;L&lt;/code&gt;代表的就是日志采集Agent：Logstash。当然，市面上也有非常多的其他选择，可以做到和Logstash类似的功能。从系统设计上来说，ELK三者本身是完全解耦分离的，所以所谓的ELK堆栈，只是一种经过验证的实践方案，其实中间除了E之外，L和K都是可以自由更换的。&lt;/p&gt;

&lt;h2 id=&quot;21-横向比较--选择&quot;&gt;2.1 横向比较 &amp;amp; 选择&lt;/h2&gt;
&lt;p&gt;关于日志采集组件的备选有大量横向比较，推荐阅读：&lt;a href=&quot;https://sematext.com/blog/logstash-alternatives/&quot; target=&quot;_blank&quot;&gt;5 Logstash Alternatives&lt;/a&gt;。这篇的时间还算比较新&lt;code&gt;2018-10-09&lt;/code&gt;，讲解也非常到位，基本上看这篇就OK了。&lt;/p&gt;

&lt;p&gt;此外，&lt;a href=&quot;https://gist.github.com/StevenACoffman/4e267f0f60c8e7fcb3f77b9e504f3bd7&quot; target=&quot;_blank&quot;&gt;StevenACoffman/fluent-filebeat-comparison.md&lt;/a&gt;也可以看下。&lt;/p&gt;

&lt;p&gt;排除比较年轻的项目，以及资历不太雄厚的项目，剩下的主要选项有三个：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Logstash
    &lt;ul&gt;
      &lt;li&gt;优势：功能强大；经过实践检验&lt;/li&gt;
      &lt;li&gt;劣势：资源占用过大；JVM&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Filebeat
    &lt;ul&gt;
      &lt;li&gt;优势：Go语言；部署简单；资源占用极小&lt;/li&gt;
      &lt;li&gt;劣势：功能相对简单&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Fluentd
    &lt;ul&gt;
      &lt;li&gt;优势：CNCF孵化项目&lt;/li&gt;
      &lt;li&gt;劣势：Ruby语言实现&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Log Shipper作为每个应用程序都需要附加的边车组件其中之一，Logstash的内存和CPU消耗在某些情况下是完全不能接受的（1GB内存，开玩笑）。JVM众所周知是比较难搞的虚拟机，如果要用好，调优需要有非常专门的知识，所以算是一个减分项。但放在Elasticsearch堆栈上来说，倒也不是那么严重，因为你无论如何都需要JVM知识来调优Elasticsearch本身。功能强大是Logstash的最大优势，能满足基本上所有的应用场景，在某些架构上，即便使用了Filebeat等高效轻量级的Log Shipper，在进入Elasticsearch入库之前仍旧需要一个Logstash来进行转换等工作。&lt;/p&gt;

&lt;p&gt;Filebeat基本上没有缺点，如果它的功能能满足你的需求的话。如果不能满足，那么最新的Kafka输出能解决你的问题。使用Filebeat作为边车的Log Shipper，输出到Kafka，然后使用Logstash或者自己编写的组件来消费Kafka里的日志，最终入库到Elasticsearch。&lt;/p&gt;

&lt;p&gt;Fluentd的最大优势在于CNCF的加持（背书）。但基于我多年的编程经验，ruby的性能一般来说是不可靠的，甚至使用JVM的Logstash都已经为性能付出了过大的代价，我又有什么理由要去相信口碑一直不怎么样的ruby呢。Logstash至少使用的JVM还和Elasticsearch本身是一个技术栈的，Fluentd会引入一个完全新的ruby虚拟机，就更加增加系统复杂度了。甚至，我在调研的初期就随手找到了：&lt;a href=&quot;https://github.com/fluent/fluentd/issues/1657&quot; target=&quot;_blank&quot;&gt;Fluentd retains excessive amounts of memory after handling traffic peaks #1657&lt;/a&gt;，&lt;code&gt;2017年&lt;/code&gt;的BUG，到现在还是&lt;code&gt;Open状态&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;综上所述，任何情况下都应该使用Filebeat作为边车的Log Shipper。Filebeat能满足需求的直接入库到Elasticsearch，不能满足需求的日志进Kafka，然后使用Logstash或其他Consumer来进行转换，最终入库到Elasticsearch。&lt;/p&gt;

&lt;h2 id=&quot;22-架构设计&quot;&gt;2.2 架构设计&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/resources/2019/04/elasticsearch-note/log_shipper_arc.jpg&quot; alt=&quot;Architecture&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;图中的Logstash部分可以替换成自编写的轻量级Consumer。&lt;/p&gt;

&lt;h1 id=&quot;3-filebeat&quot;&gt;3. Filebeat&lt;/h1&gt;
&lt;p&gt;非常细节的使用及配置，可以查看这篇中文的博客：&lt;a href=&quot;https://www.cnblogs.com/cjsblog/p/9495024.html&quot; target=&quot;_blank&quot;&gt;Filebeat 模块与配置&lt;/a&gt;。&lt;/p&gt;

&lt;h2 id=&quot;31-设计--基础概念&quot;&gt;3.1 设计 &amp;amp; 基础概念&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/resources/2019/04/elasticsearch-note/filebeat.png&quot; alt=&quot;Architecture&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;这张图看看就好，意义不大。&lt;/p&gt;

&lt;p&gt;Filebeat是一种&lt;a href=&quot;https://www.elastic.co/cn/products/beats&quot; target=&quot;_blank&quot;&gt;Elastic Beat&lt;/a&gt;，其实现基于&lt;code&gt;libbeat&lt;/code&gt;框架，更多的可以查看：&lt;a href=&quot;https://www.elastic.co/guide/en/beats/libbeat/7.0/index.html&quot; target=&quot;_blank&quot;&gt;Beats Platform Reference&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;工作流：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;输入：从指定的文件进行监控日志增加行为，并触发读取发送&lt;/li&gt;
  &lt;li&gt;输出：可直接向Elasticsearch集群发送日志，也可以将日志输出到外部的消息队列（Kafka）里&lt;/li&gt;
  &lt;li&gt;模块：对某些日志进行的采集行为及Elasticsearch集群对这些日志进行分析的配置化和固化&lt;/li&gt;
  &lt;li&gt;消费：Elasticsearch集群解析日志入库，或从Kafka读取日志然后解析入库&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;32-使用&quot;&gt;3.2 使用&lt;/h2&gt;
&lt;p&gt;部分说明文档：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;安装请参照：&lt;a href=&quot;https://www.elastic.co/guide/en/beats/filebeat/7.0/filebeat-installation.html#filebeat-installation&quot; target=&quot;_blank&quot;&gt;Step 1: Install Filebeat&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;配置请参照：&lt;a href=&quot;https://www.elastic.co/guide/en/beats/filebeat/7.0/filebeat-configuration.html#filebeat-configuration&quot; target=&quot;_blank&quot;&gt;Step 2: Configure Filebeat&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;33-模块&quot;&gt;3.3 模块&lt;/h2&gt;
&lt;p&gt;官方文档：&lt;a href=&quot;https://www.elastic.co/guide/en/beats/filebeat/7.0/filebeat-modules-overview.html&quot; target=&quot;_blank&quot;&gt;Modules overview&lt;/a&gt;。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Elasticsearch Ingest Node pipeline definition, which is used to parse the log lines.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;首先明确一点，Filebeat的模块并不是一般意义上的&lt;code&gt;功能模块&lt;/code&gt;。按软件设计思维来说，模块意味着功能的拓展，意味着根据模块设计的要求（框架）可以将软件本身能做的事情大幅拓展。而Filebeat的模块则不是，在Filebeat里，模块意味着一系列既有行为的组合：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Nginx有两个日志：access和error&lt;/li&gt;
  &lt;li&gt;Nginx在Elasticsearch上处理的Ingest Pipeline是XXX&lt;/li&gt;
  &lt;li&gt;Nginx的日志格式是XXX，Elasticsearch里对应的字段是XXX&lt;/li&gt;
  &lt;li&gt;Nginx日志对应的Kibana面板有XXX，可以看到XXX数据&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;从上面的例子可见：Filebeat本身并没有做什么，它做的仍旧只是采集日志，发送出去，没了。只不过指定了Elasticsearch集群中处理这个日志的Ingest Pipeline是谁，日志应该怎么入库（事情是在Elasticsearch集群上完成的）。因此Filebeat是&lt;code&gt;不可能替代&lt;/code&gt;Logstash的，它的定位看来永远只能当做一个轻量级的应用端Log Shipper。&lt;/p&gt;

&lt;p&gt;部分文档：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;如何创建一个新的模块：&lt;a href=&quot;https://www.elastic.co/guide/en/beats/devguide/7.0/filebeat-modules-devguide.html#filebeat-modules-devguide&quot; target=&quot;_blank&quot;&gt;Creating a New Filebeat Module&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;模块清单：&lt;a href=&quot;https://www.elastic.co/guide/en/beats/filebeat/7.0/filebeat-modules.html#filebeat-modules&quot; target=&quot;_blank&quot;&gt;Modules&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;命令行列出模块：&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code&gt;docker run --rm --name filebeat elastic/filebeat:7.0.0 modules list
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;34-过滤和丰富&quot;&gt;3.4 过滤和丰富&lt;/h2&gt;
&lt;p&gt;Filebeat可以在配置中指定一些受限的过滤和清洗功能：&lt;a href=&quot;https://www.elastic.co/guide/en/beats/filebeat/current/filtering-and-enhancing-data.html&quot; target=&quot;_blank&quot;&gt;Filter and enhance the exported data&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;可选的processor清单有：&lt;a href=&quot;https://www.elastic.co/guide/en/beats/filebeat/current/defining-processors.html#processors&quot; target=&quot;_blank&quot;&gt;Processors&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;触发的条件：&lt;a href=&quot;https://www.elastic.co/guide/en/beats/filebeat/current/defining-processors.html#conditions&quot; target=&quot;_blank&quot;&gt;Conditions&lt;/a&gt;。&lt;/p&gt;

&lt;h2 id=&quot;35-文件状态记录--投递保证&quot;&gt;3.5 文件状态记录 &amp;amp; 投递保证&lt;/h2&gt;
&lt;p&gt;Filebeat对于输入的日志文件，会制作一个本地的注册文件，将状态都保存下来，因此在重启或者挂掉重新拉起来之后，Filebeat总是能知道之前发送到哪里。&lt;/p&gt;

&lt;p&gt;Filebeat会保证本地的日志文件至少被输出一次，如果在输出的结果返回之前Filebeat就挂掉的话，在下次Filebeat启动之后，它还会将之前最后的日志再投递一次（对于Filebeat来说，它并不知道自己死前已经投递过一次，并被输出方接收到了）。因此，收取数据的服务端&lt;code&gt;可能&lt;/code&gt;在某些情况下收到&lt;code&gt;重复的数据&lt;/code&gt;。&lt;/p&gt;

&lt;h1 id=&quot;4-elasticsearch&quot;&gt;4. Elasticsearch&lt;/h1&gt;
&lt;p&gt;2套电子书非常不错：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://fdv.github.io/running-elasticsearch-fun-profit/&quot; target=&quot;_blank&quot;&gt;Operating Elasticsearch for Fun and Profit&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://es.xiaoleilu.com/index.html&quot; target=&quot;_blank&quot;&gt;Elasticsearch 权威指南（中文版）&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;对于作为Elasticsearch底层的Lucene有兴趣的，可以查看这篇：&lt;a href=&quot;https://www.infoq.cn/article/ejEG02VRoeGVaLw4j_LL&quot; target=&quot;_blank&quot;&gt;Lucene 查询原理及解析&lt;/a&gt;。&lt;/p&gt;

&lt;h2 id=&quot;41-知识点&quot;&gt;4.1 知识点&lt;/h2&gt;
&lt;p&gt;这一节基本上都是简单的知识点和概念罗列，主要阐明：”这是什么”。详细的内容会在后续的章节里分析。&lt;/p&gt;

&lt;h3 id=&quot;411-基础概念&quot;&gt;4.1.1 基础概念&lt;/h3&gt;
&lt;p&gt;官方文档：&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/getting-started-concepts.html#getting-started-concepts&quot; target=&quot;_blank&quot;&gt;Basic Concepts&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;提到了几点：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Near Realtime (NRT)&lt;/li&gt;
  &lt;li&gt;Cluster&lt;/li&gt;
  &lt;li&gt;Node&lt;/li&gt;
  &lt;li&gt;Index&lt;/li&gt;
  &lt;li&gt;Document&lt;/li&gt;
  &lt;li&gt;Shards &amp;amp; Replicas&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;412-安装--配置&quot;&gt;4.1.2 安装 &amp;amp; 配置&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/docker.html#docker&quot; target=&quot;_blank&quot;&gt;Install Elasticsearch with Docker&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/settings.html#settings&quot; target=&quot;_blank&quot;&gt;Configuring Elasticsearch&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/jvm-options.html#jvm-options&quot; target=&quot;_blank&quot;&gt;Setting JVM options&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/important-settings.html#important-settings&quot; target=&quot;_blank&quot;&gt;Important Elasticsearch configuration&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/system-config.html#system-config&quot; target=&quot;_blank&quot;&gt;Important System Configuration&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;后面三条对生产环境影响比较大，需要仔细阅读。&lt;/p&gt;

&lt;h2 id=&quot;413-api&quot;&gt;4.1.3 API&lt;/h2&gt;
&lt;p&gt;Elasticsearch的API文档相当散，主要是以下几项：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/docs.html&quot; target=&quot;_blank&quot;&gt;Document APIs&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/search.html&quot; target=&quot;_blank&quot;&gt;Search APIs&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/search-aggregations.html&quot; target=&quot;_blank&quot;&gt;Aggregations&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/indices.html&quot; target=&quot;_blank&quot;&gt;Indices APIs&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/cat.html&quot; target=&quot;_blank&quot;&gt;cat APIs&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/cluster.html&quot; target=&quot;_blank&quot;&gt;Cluster APIs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;414-query-dsl&quot;&gt;4.1.4 Query DSL&lt;/h2&gt;
&lt;p&gt;官方文档：&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/query-dsl.html&quot; target=&quot;_blank&quot;&gt;Query DSL&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;了解Elasticsearch的人肯定会问：Query DSL和Elasticsearch的基础Lucene之间是什么关系。关于这个知识点可以查看：&lt;a href=&quot;https://stackoverflow.com/questions/27793721/what-is-the-difference-between-lucene-and-elasticsearch&quot; target=&quot;_blank&quot;&gt;What is the difference between Lucene and Elasticsearch&lt;/a&gt;。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Elasticsearch is a JSON Based, Distributed, web server build over Lucene. Though it’s Lucene who is doing the actual work beneath, Elasticsearch provides us a convenient layer over Lucene. Each shard that gets created in Elasticsearch is a separate Lucene instance.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Lucene是底层，Elasticsearch是基于Lucene之上的富集开发，而QueryDSL则是用户和Elasticsearch之间交互的桥梁。&lt;/p&gt;

&lt;h3 id=&quot;415-sql&quot;&gt;4.1.5 SQL&lt;/h3&gt;
&lt;p&gt;Elasticsearch还可以使用SQL进行查询：&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/current/xpack-sql.html&quot; target=&quot;_blank&quot;&gt;SQL access&lt;/a&gt;。&lt;/p&gt;

&lt;h3 id=&quot;416-ingest节点&quot;&gt;4.1.6 Ingest节点&lt;/h3&gt;
&lt;p&gt;在整个&lt;a href=&quot;#ID_ARC_CLUSTER&quot;&gt;Elasticsearch集群&lt;/a&gt;中，有一部分节点是用来进行日志过滤、清洗、丰富化的，这些工作在这个设计出现之前是只能在Agent上实现的，一般来说就是Logstash，而现在在服务器节点上也可以处理相对应的工作了。&lt;/p&gt;

&lt;p&gt;官方文档：&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html#ingest&quot; target=&quot;_blank&quot;&gt;Ingest Node&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;通过定义Processors来进行日志的解析和处理：&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/ingest-processors.html#ingest-processors&quot; target=&quot;_blank&quot;&gt;Processors&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;初步了解下来功能应该还算强大，可以使用脚本化代码进行功能拓展：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/script-processor.html#script-processor&quot; target=&quot;_blank&quot;&gt;Script Processor&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/modules-scripting-using.html#modules-scripting-using&quot; target=&quot;_blank&quot;&gt;How to use scripts&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;此外还有插件机制：&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/plugins/7.0/ingest.html#ingest&quot; target=&quot;_blank&quot;&gt;Ingest Plugins&lt;/a&gt;。&lt;/p&gt;

&lt;h2 id=&quot;ID_INDEX&quot;&gt;4.2 文档数据库 &amp;amp; 索引&lt;/h2&gt;
&lt;p&gt;Elasticsearch是一个文档数据库，从本质上来看，它和Mongo其实相当类似。和传统RDBMS比较起来：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Relational DB -&amp;gt; Databases -&amp;gt; Tables  -&amp;gt; Rows      -&amp;gt; Columns
Elasticsearch -&amp;gt; DEFAULT   -&amp;gt; Indices -&amp;gt; Documents -&amp;gt; Fields
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;举个例子：
PUT /employee/1&lt;/p&gt;

&lt;p&gt;Index：&lt;code&gt;employee&lt;/code&gt;  &lt;br /&gt;
Document：&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-json&quot; data-lang=&quot;json&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;first_name&amp;quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;John&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;last_name&amp;quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;s2&quot;&gt;&amp;quot;Smith&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;age&amp;quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;        &lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;about&amp;quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;      &lt;span class=&quot;s2&quot;&gt;&amp;quot;I love to go rock climbing&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;interests&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;sports&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;music&amp;quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Fields：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;first_name&lt;/li&gt;
  &lt;li&gt;last_name&lt;/li&gt;
  &lt;li&gt;age&lt;/li&gt;
  &lt;li&gt;about&lt;/li&gt;
  &lt;li&gt;interests&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;索引非常重要，在集群模式（cluster）中，索引是用来进行分区的唯一指标。Elasticsearch会根据Index来决定当前数据落到哪台实际的存储服务器上。&lt;/p&gt;

&lt;p&gt;关于索引的细节，以及一些集群相关的索引知识，可以查看：&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/docs-index_.html&quot; target=&quot;_blank&quot;&gt;Index API&lt;/a&gt;。&lt;/p&gt;

&lt;h2 id=&quot;ID_STORAGE&quot;&gt;4.3 存储&lt;/h2&gt;
&lt;p&gt;在官方手册文档中，并没有关于存储相关的设计及实现的详细内容。在Blog中找到一篇：&lt;a href=&quot;https://www.elastic.co/blog/found-dive-into-elasticsearch-storage&quot; target=&quot;_blank&quot;&gt;A Dive into the Elasticsearch Storage&lt;/a&gt;，不过时间也稍微有点久，但还算可以用来一窥存储相关的技术点。&lt;/p&gt;

&lt;p&gt;此外，&lt;strong&gt;shards：Lucene segments&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Each Elasticsearch index is divided into shards. Shards are both logical and physical division of an index. Each Elasticsearch shard is a Lucene index. The maximum number of documents you can have in a Lucene index is 2,147,483,519. The Lucene index is divided into smaller files called segments. A segment is a small Lucene index. Lucene searches in all segments sequentially.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/04/elasticsearch-note/elk_shards.png&quot; alt=&quot;elk_shards&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ID_ARC_CLUSTER&quot;&gt;4.4 集群&lt;/h2&gt;
&lt;p&gt;关于架构和集群的基础概念可以阅读官方的一份PPT：&lt;a href=&quot;https://www.elastic.co/pdf/architecture-best-practices.pdf&quot; target=&quot;_blank&quot;&gt;Elasticsearch Best Practice Architecture&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;主要是了解下Elasticsearch集群的节点分类：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/04/elasticsearch-note/elk_node_types.png&quot; alt=&quot;elk_node_types&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;然后看下之前提到过的ELK整体集群拓扑：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/04/elasticsearch-note/elk_arch.png&quot; alt=&quot;elk_arch&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;此外推荐一篇：&lt;a href=&quot;https://thoughts.t37.net/designing-the-perfect-elasticsearch-cluster-the-almost-definitive-guide-e614eabc1a87&quot; target=&quot;_blank&quot;&gt;Designing the Perfect Elasticsearch Cluster: the (almost) Definitive Guide&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;在官方的文档库中我并没有找到比较新版本的文档有讲解到分布式和高可用之类的架构设计内容，大部分的文档都是各种API和各种细节。在老的版本中倒是找到一点信息：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/guide/current/_how_primary_and_replica_shards_interact.html&quot; target=&quot;_blank&quot;&gt;How Primary and Replica Shards Interact&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/guide/current/distrib-write.html&quot; target=&quot;_blank&quot;&gt;Creating, Indexing, and Deleting a Document&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;此外，中文书里的内容也可以阅读：&lt;a href=&quot;https://es.xiaoleilu.com/020_Distributed_Cluster/00_Intro.html&quot; target=&quot;_blank&quot;&gt;集群内部工作方式&lt;/a&gt;，注意这本中文书的版本已经相当老了，里面的内容有部分和现在的版本明显不同。&lt;/p&gt;

&lt;p&gt;几点整理：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;replica与数据主节点并不一定是1：1的关系（并不一定一个master拖一个slave这样的设计），主节点的数据是完全分散到其他各个replica节点上的，这个replica节点数量是可设置的&lt;/li&gt;
  &lt;li&gt;当你的replica设置越多，写入速度就越慢（参与的节点多），主节点写入完毕之后还要让所有的replica写入，全部都完成才会返回客户端完成&lt;/li&gt;
  &lt;li&gt;当你的replica设置越多，查询（读取）速度就越快（参与的节点多）&lt;/li&gt;
  &lt;li&gt;当发生查询请求时，查询请求是会落到所有的shard上的，所以集群shards做的越多，整个集群的查询性能开销就越大，这里就有一个平衡的问题&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;45-监控--高可用&quot;&gt;4.5 监控 &amp;amp; 高可用&lt;/h2&gt;
&lt;h3 id=&quot;451-监控&quot;&gt;4.5.1 监控&lt;/h3&gt;
&lt;p&gt;对于Elasticsearch的监控，官方有一套解决方案（Elasticsearch算是一个生态了，在上游和下游都有完整的处理）。可以查阅下官方文档：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/current/es-monitoring.html&quot; target=&quot;_blank&quot;&gt;Monitoring Elasticsearch&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-xpack.html#setup-xpack&quot; target=&quot;_blank&quot;&gt;Set up X-Pack&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/7.0/getting-started-cluster-health.html#getting-started-cluster-health&quot; target=&quot;_blank&quot;&gt;Cluster Health&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;当然也可以选用Prometheus作为监控：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/vvanholl/elasticsearch-prometheus-exporter&quot; target=&quot;_blank&quot;&gt;Prometheus Exporter Plugin for Elasticsearch&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;452-高可用&quot;&gt;4.5.2 高可用&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;数据节点数量选择&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://thoughts.t37.net/resizing-your-elasticsearch-indexes-in-production-d7a0402d137e&quot; target=&quot;_blank&quot;&gt;Resizing your Elasticsearch Indexes in Production&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.signalfx.com/blog/scaling-elasticsearch-sharding-availability-hundreds-millions-documents/&quot; target=&quot;_blank&quot;&gt;Scaling Elasticsearch: Sharding and Availability for Hundreds Of Millions of Documents&lt;/a&gt;：这篇当中有一段讲解了&lt;code&gt;Resharding With Zero Downtime&lt;/code&gt;，这是非常有价值的一个topic&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;可恢复的集群最低配置&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;3 locations to host your nodes. 2 locations to run half of your cluster, and one for the backup master node.&lt;/li&gt;
  &lt;li&gt;3 master nodes. You need an odd number of eligible master nodes to avoid split brains when you lose a whole data center. Put one master node in each location so you hopefully never lose the quorum.&lt;/li&gt;
  &lt;li&gt;2 http nodes, one in each primary data center.&lt;/li&gt;
  &lt;li&gt;As many data nodes as you need, split evenly between both main locations.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;故障恢复&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Elasticsearch在集群中分主节点shard和复制节点replica，当集群的设置足够多（数据冗余充分）的情况下，当某个物理节点不可用时，Elasticsearch会自动进行选举，将丢失的主节点shard的replica节点设置成主节点，并重新对集群进行平衡。举个例子：&lt;/p&gt;

&lt;p&gt;事故发生前：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;一共有3个物理节点&lt;/li&gt;
  &lt;li&gt;一共有3个主节点shard&lt;/li&gt;
  &lt;li&gt;每个主节点shard有2个复制节点replica&lt;/li&gt;
  &lt;li&gt;当前物理节点1是作为整个集群的master节点进行服务的&lt;/li&gt;
  &lt;li&gt;后续事故会发生在物理节点1，这个节点会下线&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/04/elasticsearch-note/elk_ha_01.png&quot; alt=&quot;Before&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;事故发生后：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;master节点下线了，因此集群重新开始选取master节点，设定为物理节点2&lt;/li&gt;
  &lt;li&gt;0号主节点shard（P0）本来就在物理节点3上，因此不受影响&lt;/li&gt;
  &lt;li&gt;1号和2号主节点shard之前在物理节点1上，全部丢失，集群将物理节点2上的2号shard的replica（R2）提升为主节点shard（P2），并将物理节点3上的1号shard的replica（R1）提升为主节点shard（P1）&lt;/li&gt;
  &lt;li&gt;此时所有的主节点shard都已恢复，且各主节点shard都存在一份replica&lt;/li&gt;
  &lt;li&gt;后续集群会继续为各主节点shard复制缺失的一份replica&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/04/elasticsearch-note/elk_ha_02.png&quot; alt=&quot;After&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;46-性能调优&quot;&gt;4.6 性能调优&lt;/h2&gt;
&lt;p&gt;Ebay有一篇非常细节非常棒的设计及性能优化分析博文：&lt;a href=&quot;https://www.ebayinc.com/stories/blogs/tech/elasticsearch-performance-tuning-practice-at-ebay/&quot; target=&quot;_blank&quot;&gt;Elasticsearch Performance Tuning Practice at eBay&lt;/a&gt;。从时间上来看，这篇文章也比较近：2018-01-08。&lt;/p&gt;

&lt;p&gt;这篇博文分析了大规模Elasticsearch集群会面临的挑战，以及解决方案，还按实际的应用Scenario进行了问题分析以及给出了解决范例，很棒。&lt;/p&gt;

&lt;h1 id=&quot;5-ui&quot;&gt;5. UI&lt;/h1&gt;
&lt;p&gt;Kibana这块相对来说比较简单（？），这里就只做简单的尝试。下面会列一些关键文档位置：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/kibana/current/docker.html#docker&quot; target=&quot;_blank&quot;&gt;Running Kibana on Docker&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/kibana/7.0/settings.html#settings&quot; target=&quot;_blank&quot;&gt;Configuring Kibana&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/kibana/current/lucene-query.html#lucene-query&quot; target=&quot;_blank&quot;&gt;Lucene Query Syntax&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;6-实践范例&quot;&gt;6. 实践范例&lt;/h1&gt;
&lt;p&gt;和之前做Prometheus实验的时候一样，因为需要把握一些细节，所以实验使用的还是下载下来的Elasticsearch、Kibana以及Filebeat。作为配角的Nginx使用的则是镜像版本。&lt;/p&gt;

&lt;p&gt;范例代码可以在Github查看：&lt;a href=&quot;https://github.com/agreatfool/dist-system-practice/tree/master/experiment/elasticsearch&quot; target=&quot;_blank&quot;&gt;dist-system-practice/experiment/elasticsearch/&lt;/a&gt;。&lt;/p&gt;

&lt;h1 id=&quot;7-todo&quot;&gt;7. TODO&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Elasticsearch集群及一些基本观察用的API熟悉&lt;/li&gt;
  &lt;li&gt;Elasticsearch JVM相关参数和实践研究&lt;/li&gt;
  &lt;li&gt;Elasticsearch reshard的策略，最佳实践&lt;/li&gt;
  &lt;li&gt;Elasticsearch reshard时候的CPU、磁盘、内存，还有特别是网络的影响&lt;/li&gt;
  &lt;li&gt;Elasticsearch reshard在各种集群规模下的耗时&lt;/li&gt;
  &lt;li&gt;Elasticsearch的性能指标研究&lt;/li&gt;
  &lt;li&gt;Elasticsearch性能测试&lt;/li&gt;
  &lt;li&gt;Kibana使用深入&lt;/li&gt;
  &lt;li&gt;添加Logstash部分内容，这块由于时间问题暂时不准备展开&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;资料&quot;&gt;资料&lt;/h1&gt;
&lt;h2 id=&quot;链接&quot;&gt;链接&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://sematext.com/blog/logstash-alternatives/&quot; target=&quot;_blank&quot;&gt;5 Logstash Alternatives&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://gist.github.com/StevenACoffman/4e267f0f60c8e7fcb3f77b9e504f3bd7&quot; target=&quot;_blank&quot;&gt;StevenACoffman/fluent-filebeat-comparison.md&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/fluent/fluentd/issues/1657&quot; target=&quot;_blank&quot;&gt;Fluentd retains excessive amounts of memory after handling traffic peaks #1657&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.cnblogs.com/cjsblog/p/9495024.html&quot; target=&quot;_blank&quot;&gt;Filebeat 模块与配置&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://fdv.github.io/running-elasticsearch-fun-profit/&quot; target=&quot;_blank&quot;&gt;Operating Elasticsearch for Fun and Profit&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://es.xiaoleilu.com/index.html&quot; target=&quot;_blank&quot;&gt;Elasticsearch 权威指南（中文版）&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/27793721/what-is-the-difference-between-lucene-and-elasticsearch&quot; target=&quot;_blank&quot;&gt;What is the difference between Lucene and Elasticsearch&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://thoughts.t37.net/designing-the-perfect-elasticsearch-cluster-the-almost-definitive-guide-e614eabc1a87&quot; target=&quot;_blank&quot;&gt;Designing the Perfect Elasticsearch Cluster: the (almost) Definitive Guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/vvanholl/elasticsearch-prometheus-exporter&quot; target=&quot;_blank&quot;&gt;Prometheus Exporter Plugin for Elasticsearch&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://thoughts.t37.net/resizing-your-elasticsearch-indexes-in-production-d7a0402d137e&quot; target=&quot;_blank&quot;&gt;Resizing your Elasticsearch Indexes in Production&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.signalfx.com/blog/scaling-elasticsearch-sharding-availability-hundreds-millions-documents/&quot; target=&quot;_blank&quot;&gt;Scaling Elasticsearch: Sharding and Availability for Hundreds Of Millions of Documents&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.ebayinc.com/stories/blogs/tech/elasticsearch-performance-tuning-practice-at-ebay/&quot; target=&quot;_blank&quot;&gt;Elasticsearch Performance Tuning Practice at eBay&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;EOF&lt;/p&gt;
&lt;/blockquote&gt;
</description>
				<pubDate>Thu, 25 Apr 2019 10:01:22 +0800</pubDate>
				<link>https://xenojoshua.com/2019/04/elasticsearch-note/</link>
				<guid isPermaLink="true">https://xenojoshua.com/2019/04/elasticsearch-note/</guid>
			</item>
		
			<item>
				<title>Jaeger Notes</title>
				<description>&lt;h4&gt;Table of Contents&lt;/h4&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1-前言&quot; id=&quot;markdown-toc-1-前言&quot;&gt;1. 前言&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-opentracing&quot; id=&quot;markdown-toc-2-opentracing&quot;&gt;2. OpenTracing&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#21-trace&quot; id=&quot;markdown-toc-21-trace&quot;&gt;2.1 Trace&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#22-span&quot; id=&quot;markdown-toc-22-span&quot;&gt;2.2 Span&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#221-trace与span关系&quot; id=&quot;markdown-toc-221-trace与span关系&quot;&gt;2.2.1 Trace与Span关系&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#222-span属性&quot; id=&quot;markdown-toc-222-span属性&quot;&gt;2.2.2 Span属性&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#223-span-context属性&quot; id=&quot;markdown-toc-223-span-context属性&quot;&gt;2.2.3 Span Context属性&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#224-span间关系&quot; id=&quot;markdown-toc-224-span间关系&quot;&gt;2.2.4 Span间关系&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-jaeger架构&quot; id=&quot;markdown-toc-3-jaeger架构&quot;&gt;3. Jaeger架构&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#31-jaeger-client&quot; id=&quot;markdown-toc-31-jaeger-client&quot;&gt;3.1 Jaeger Client&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#32-jaeger-agent&quot; id=&quot;markdown-toc-32-jaeger-agent&quot;&gt;3.2 Jaeger Agent&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#33-jaeger-collector&quot; id=&quot;markdown-toc-33-jaeger-collector&quot;&gt;3.3 Jaeger Collector&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#34-data-store&quot; id=&quot;markdown-toc-34-data-store&quot;&gt;3.4 Data Store&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#35-jaeger-query&quot; id=&quot;markdown-toc-35-jaeger-query&quot;&gt;3.5 Jaeger Query&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#36-jaeger-ingester&quot; id=&quot;markdown-toc-36-jaeger-ingester&quot;&gt;3.6 Jaeger Ingester&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#日志模式&quot; id=&quot;markdown-toc-日志模式&quot;&gt;日志模式&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4-jaeger使用&quot; id=&quot;markdown-toc-4-jaeger使用&quot;&gt;4. Jaeger使用&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#41-jaeger-collector单独启动&quot; id=&quot;markdown-toc-41-jaeger-collector单独启动&quot;&gt;4.1 Jaeger Collector单独启动&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#42-jaeger-agent单独启动&quot; id=&quot;markdown-toc-42-jaeger-agent单独启动&quot;&gt;4.2 Jaeger Agent单独启动&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#43-jaeger-query单独启动&quot; id=&quot;markdown-toc-43-jaeger-query单独启动&quot;&gt;4.3 Jaeger Query单独启动&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5-jaeger高可用&quot; id=&quot;markdown-toc-5-jaeger高可用&quot;&gt;5. Jaeger高可用&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#51-metrics&quot; id=&quot;markdown-toc-51-metrics&quot;&gt;5.1 Metrics&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#52-components&quot; id=&quot;markdown-toc-52-components&quot;&gt;5.2 Components&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#521-client&quot; id=&quot;markdown-toc-521-client&quot;&gt;5.2.1 Client&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#522-agent&quot; id=&quot;markdown-toc-522-agent&quot;&gt;5.2.2 Agent&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#523-collector&quot; id=&quot;markdown-toc-523-collector&quot;&gt;5.2.3 Collector&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#524-data-store&quot; id=&quot;markdown-toc-524-data-store&quot;&gt;5.2.4 Data Store&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#6-jaeger采样&quot; id=&quot;markdown-toc-6-jaeger采样&quot;&gt;6. Jaeger采样&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#61-client配置&quot; id=&quot;markdown-toc-61-client配置&quot;&gt;6.1 Client配置&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#611-constant&quot; id=&quot;markdown-toc-611-constant&quot;&gt;6.1.1 Constant&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#612-probabilistic&quot; id=&quot;markdown-toc-612-probabilistic&quot;&gt;6.1.2 Probabilistic&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#613-rate-limiting&quot; id=&quot;markdown-toc-613-rate-limiting&quot;&gt;6.1.3 Rate Limiting&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#614-remote&quot; id=&quot;markdown-toc-614-remote&quot;&gt;6.1.4 Remote&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#62-collector配置&quot; id=&quot;markdown-toc-62-collector配置&quot;&gt;6.2 Collector配置&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#7-todo&quot; id=&quot;markdown-toc-7-todo&quot;&gt;7. TODO&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#资料&quot; id=&quot;markdown-toc-资料&quot;&gt;资料&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#链接&quot; id=&quot;markdown-toc-链接&quot;&gt;链接&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#help&quot; id=&quot;markdown-toc-help&quot;&gt;Help&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#ID_APP_AGENT_HELP&quot; id=&quot;markdown-toc-ID_APP_AGENT_HELP&quot;&gt;jaeger-agent –help&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#ID_APP_COLLECTOR_HELP&quot; id=&quot;markdown-toc-ID_APP_COLLECTOR_HELP&quot;&gt;jaeger-collector memory –help&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#ID_APP_QUERY_HELP&quot; id=&quot;markdown-toc-ID_APP_QUERY_HELP&quot;&gt;jaeger-query –help&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#metrics&quot; id=&quot;markdown-toc-metrics&quot;&gt;Metrics&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#ID_APP_AGENT_METRICS&quot; id=&quot;markdown-toc-ID_APP_AGENT_METRICS&quot;&gt;jaeger-agent metrics&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#ID_APP_COLLECTOR_METRICS&quot; id=&quot;markdown-toc-ID_APP_COLLECTOR_METRICS&quot;&gt;jaeger-collector metrics&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#ID_APP_QUERY_METRICS&quot; id=&quot;markdown-toc-ID_APP_QUERY_METRICS&quot;&gt;jaeger-query metrics&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;1-前言&quot;&gt;1. 前言&lt;/h1&gt;
&lt;p&gt;Tracing是最近才慢慢开始普及起来的一个概念。现在越来越多的系统转向微服务，或者类似于微服务设计的分布式系统，系统内部的复杂度越来越高，导致观察某一个请求的整个生命周期非常困难，查错也很困难。为了解决这样的问题，Tracing这个需求就被慢慢提出来了。最早的解决方案是一个开源项目被称为：&lt;a href=&quot;https://zipkin.io/&quot; target=&quot;_blank&quot;&gt;Zipkin&lt;/a&gt;。后来CNCF对Tracing做了一个规范：&lt;a href=&quot;https://opentracing.io/&quot; target=&quot;_blank&quot;&gt;OpenTracing&lt;/a&gt;，在CNCF里也孵化了一个项目：&lt;a href=&quot;https://www.jaegertracing.io/&quot; target=&quot;_blank&quot;&gt;Jaeger&lt;/a&gt;。现在基本上有这方面需求的，都会使用Jaeger，前浪死在沙滩上啊。&lt;/p&gt;

&lt;p&gt;关于监控、追踪、日志三者的区别，可以查看：&lt;a href=&quot;/2019/04/monitoring-tracing-logging/&quot; target=&quot;_blank&quot;&gt;Compare: Monitoring | Tracing | Logging&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;以下所有针对Jaeger的讨论都基于版本：&lt;code&gt;1.11.0&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;外部链接：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;阿里云的一篇博文很不错，可以看下：&lt;a href=&quot;https://yq.aliyun.com/articles/514488&quot; target=&quot;_blank&quot;&gt;开放分布式追踪（OpenTracing）入门与 Jaeger 实现&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.jianshu.com/p/a963ad0bbe3e&quot; target=&quot;_blank&quot;&gt;OpenTracing语义标准规范及实现&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;2-opentracing&quot;&gt;2. OpenTracing&lt;/h1&gt;
&lt;p&gt;OpenTracing在CNCF里有其站点：&lt;a href=&quot;https://opentracing.io&quot; target=&quot;_blank&quot;&gt;opentracing.io&lt;/a&gt;，这个站点主要是进行一些大概念的介绍，基本上没什么可用的实现，而实现可以看上面提到过的Jaeger，当然本文后面也会介绍。&lt;/p&gt;

&lt;p&gt;该站点的文档中，有意义的部分从：&lt;a href=&quot;https://opentracing.io/docs/overview/&quot; target=&quot;_blank&quot;&gt;OpenTracing Overview&lt;/a&gt;开始。文档概念性的部分过完之后，其他部分基本上就可以忽略了。&lt;/p&gt;

&lt;p&gt;OpenTracing有官方的Specification：&lt;a href=&quot;https://github.com/opentracing-contrib/opentracing-specification-zh/blob/master/specification.md&quot; target=&quot;_blank&quot;&gt;CN汉化版&lt;/a&gt;，以及&lt;a href=&quot;https://opentracing.io/specification/&quot; target=&quot;_blank&quot;&gt;EN原版&lt;/a&gt;。既然是SPEC，里面也就包含了所有需要了解的信息，有时间的可以通读一遍。&lt;/p&gt;

&lt;p&gt;这里需要注意，SPEC是有明确版本的，当前的版本为：&lt;code&gt;1.1&lt;/code&gt; - &lt;code&gt;19 Sep 2018&lt;/code&gt;。  &lt;br /&gt;
前一版本为：1.0 - 23 Dec 2016，可以看到版本基本上很稳定。&lt;/p&gt;

&lt;p&gt;此外，对于SPEC，有一些&lt;a href=&quot;https://github.com/opentracing-contrib/opentracing-specification-zh/blob/master/semantic_conventions.md&quot; target=&quot;_blank&quot;&gt;语义惯例&lt;/a&gt;可以看下。&lt;/p&gt;

&lt;p&gt;主要需要遵循的有：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/opentracing-contrib/opentracing-specification-zh/blob/master/semantic_conventions.md#span-tag-%E6%B8%85%E5%8D%95&quot; target=&quot;_blank&quot;&gt;Span tag 清单&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/opentracing-contrib/opentracing-specification-zh/blob/master/semantic_conventions.md#log-field-%E6%B8%85%E5%8D%95&quot; target=&quot;_blank&quot;&gt;Log field 清单&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/opentracing-contrib/opentracing-specification-zh/blob/master/semantic_conventions.md#%E5%85%B8%E5%9E%8B%E5%9C%BA%E6%99%AF%E5%BB%BA%E6%A8%A1&quot; target=&quot;_blank&quot;&gt;典型场景建模&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果应用场景符合上述范例中定义的情况，则务必需要遵循这些规范。这有点类似于写代码的时候的Coding Style，虽然代码编译执行可能没有任何问题，但为了统一编码的可读性还是需要遵循规范。&lt;/p&gt;

&lt;p&gt;下文会从组成Tracing的一些概念着手开始逐步介绍。&lt;/p&gt;

&lt;h2 id=&quot;21-trace&quot;&gt;2.1 Trace&lt;/h2&gt;
&lt;blockquote&gt;
  &lt;p&gt;Trace: The description of a transaction as it moves through a distributed system.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Trace：一个在分布式系统内运作的事务。&lt;/p&gt;

&lt;p&gt;Trace代表着一个完整的事务，举个例子来说，如果有一个复杂的API系统，内部的API后台由大量的微服务实现，而一个可能需要十来个甚至更多的微服务协同处理的&lt;code&gt;API请求&lt;/code&gt;，就是一个&lt;code&gt;Trace&lt;/code&gt;。而这个例子中每一个微服务，其所作的工作就可以被认为是一个&lt;code&gt;Span&lt;/code&gt;。&lt;/p&gt;

&lt;h2 id=&quot;22-span&quot;&gt;2.2 Span&lt;/h2&gt;
&lt;blockquote&gt;
  &lt;p&gt;Span: A named, timed operation representing a piece of the workflow. Spans accept key:value tags as well as fine-grained, timestamped, structured logs attached to the particular span instance.
Span context: Trace information that accompanies the distributed transaction, including when it passes the service to service over the network or through a message bus. The span context contains the trace identifier, span identifier, and any other data that the tracing system needs to propagate to the downstream service.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Span：一个被命名、被计时，代表着一段工作流的操作。Spans实例接受键值对的tags，以及含有细节的、计时的、结构化的日志内容。&lt;/p&gt;

&lt;p&gt;Span context：伴随着分布式事务产生的Trace相关的信息，包含了该事务通过网络或消息总线在服务之间传递的时间。此外还包含了：trace标识符、span标识符，以及其他任何tracing系统需要用来衍生下游服务所需要的数据。&lt;/p&gt;

&lt;h3 id=&quot;221-trace与span关系&quot;&gt;2.2.1 Trace与Span关系&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;/resources/2019/04/jaeger-note/spans-traces.png&quot; alt=&quot;Relationship&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;上图是一个Trace和Span的关系范例图。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;从时间轴上可以看到，A覆盖了所有下面子条目的时间，这很容易理解：所有的Span组成一个Trace，而每个Span实际上都消耗了时间，这些时间的总合就是Trace的时间消耗&lt;/li&gt;
  &lt;li&gt;Span有父子级别概念：B和C以及D的关系就是父子，而C和D则不是父子关系，父子的时间是&lt;code&gt;重合&lt;/code&gt;的，就类似所有子Span和Trace之间的时间关系，B消耗的时间是C和D的时间总合，而A消耗的时间则是B和E的总合&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;图中：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在Trace &lt;code&gt;A&lt;/code&gt;中，&lt;code&gt;B&lt;/code&gt;和&lt;code&gt;E&lt;/code&gt;是&lt;code&gt;A&lt;/code&gt;的子Span&lt;/li&gt;
  &lt;li&gt;在Trace &lt;code&gt;A&lt;/code&gt;中，&lt;code&gt;B&lt;/code&gt;和&lt;code&gt;E&lt;/code&gt;顺序执行，&lt;code&gt;E&lt;/code&gt;的执行需要等待&lt;code&gt;B&lt;/code&gt;的完成&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;A&lt;/code&gt;的消耗时长为&lt;code&gt;B&lt;/code&gt;和&lt;code&gt;E&lt;/code&gt;的总合（这里都是理想情况）&lt;/li&gt;
  &lt;li&gt;在Span &lt;code&gt;B&lt;/code&gt;中，&lt;code&gt;C&lt;/code&gt;和&lt;code&gt;D&lt;/code&gt;是&lt;code&gt;B&lt;/code&gt;的子Span&lt;/li&gt;
  &lt;li&gt;在Span &lt;code&gt;B&lt;/code&gt;中，&lt;code&gt;C&lt;/code&gt;和&lt;code&gt;D&lt;/code&gt;顺序执行，&lt;code&gt;D&lt;/code&gt;的执行需要等待&lt;code&gt;C&lt;/code&gt;的完成&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;B&lt;/code&gt;的消耗时长为&lt;code&gt;C&lt;/code&gt;和&lt;code&gt;D&lt;/code&gt;的总合（这里都是理想情况）&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;222-span属性&quot;&gt;2.2.2 Span属性&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code&gt;An operation name&lt;/code&gt;，操作名称&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;A start timestamp&lt;/code&gt;，起始时间&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;A finish timestamp&lt;/code&gt;，结束时间&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;Span Tag&lt;/code&gt;，一组键值对构成的Span标签集合。键值对中，键必须为string，值可以是字符串，布尔，或者数字类型&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;Span Log&lt;/code&gt;，一组span的日志集合
    &lt;ul&gt;
      &lt;li&gt;每次log操作包含一个键值对，以及一个时间戳&lt;/li&gt;
      &lt;li&gt;键值对中，键必须为string，值可以是任意类型&lt;/li&gt;
      &lt;li&gt;但是需要注意，不是所有的支持OpenTracing的Tracer，都需要支持所有的值类型&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code&gt;SpanContext&lt;/code&gt;，Span上下文对象&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;References&lt;/code&gt;，Span间关系，相关的零个或者多个Span（Span间通过SpanContext建立这种关系）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Span Tag 范例：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;db.instance:”jdbc:mysql://127.0.0.1:3306/customers”&lt;/li&gt;
  &lt;li&gt;db.statement:”SELECT * FROM mytable WHERE foo=’bar’;”&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Span Logs 范例：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;message:”Can’t connect to mysql server on ‘127.0.0.1’(10061)”&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;223-span-context属性&quot;&gt;2.2.3 Span Context属性&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;任何一个OpenTracing的实现，都需要将当前调用链的状态（例如：trace和span的id），依赖一个独特的Span去跨进程边界传输&lt;/li&gt;
  &lt;li&gt;Baggage Items，Trace的随行数据，是一个键值对集合，它存在于trace中，也需要跨进程边界传输&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;SpanContext 范例：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;trace_id:”abc123”&lt;/li&gt;
  &lt;li&gt;span_id:”xyz789”&lt;/li&gt;
  &lt;li&gt;Baggage Items:
    &lt;ul&gt;
      &lt;li&gt;special_id:”vsid1738”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;224-span间关系&quot;&gt;2.2.4 Span间关系&lt;/h3&gt;
&lt;p&gt;一个Span可以与一个或者多个SpanContexts存在因果关系。OpenTracing目前定义了两种关系：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ChildOf（父子）&lt;/li&gt;
  &lt;li&gt;FollowsFrom（跟随）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ChildOf引用：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;一个RPC调用的服务端的span，和RPC服务客户端的span构成ChildOf关系&lt;/li&gt;
  &lt;li&gt;一个sql insert操作的span，和ORM的save方法的span构成ChildOf关系&lt;/li&gt;
  &lt;li&gt;很多span可以并行工作（或者分布式工作）都可能是一个父级的span的子项，他会合并所有子span的执行结果，并在指定期限内返回&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;3-jaeger架构&quot;&gt;3. Jaeger架构&lt;/h1&gt;
&lt;p&gt;官网上（&lt;a href=&quot;https://www.jaegertracing.io/docs/1.11/architecture/&quot; target=&quot;_blank&quot;&gt;Architecture&lt;/a&gt;）有一张架构图，可以先看下：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/resources/2019/04/jaeger-note/architecture.png&quot; alt=&quot;Architecture&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;图上的内容主要分几个部分，下面一个个说。&lt;/p&gt;

&lt;h2 id=&quot;31-jaeger-client&quot;&gt;3.1 Jaeger Client&lt;/h2&gt;
&lt;p&gt;Jaeger client是之前提到的OpenTracing API的多语言实现。这部分是嵌在你的应用程序里的一个&lt;code&gt;类库&lt;/code&gt;，它就是你的应用程序的一部分，使用它你就可以在收到Request的时候创建对应的Span，并向下游Request输出对应的Trace上下文。&lt;/p&gt;

&lt;p&gt;Jaeger Client可以直接向Collector发送Trace信息，也可以结合本地的Agent协同工作，降低性能开销。实际上这部分的性能开销不会很大。&lt;/p&gt;

&lt;h2 id=&quot;32-jaeger-agent&quot;&gt;3.2 Jaeger Agent&lt;/h2&gt;
&lt;p&gt;Jaeger Agent是和目标应用程序并行部署的一个组件，可以理解为边车设计中的&lt;code&gt;边车&lt;/code&gt;的组成部分之一。它是一个长期启动的守护进程，通过监听UDP网络接收Client发送过来的Trace信息，并批量向Collector发送。在设计上，Agent可以将路由和服务发现相关的业务从Client里解耦出来。&lt;/p&gt;

&lt;h2 id=&quot;33-jaeger-collector&quot;&gt;3.3 Jaeger Collector&lt;/h2&gt;
&lt;p&gt;Jaeger Collector可以说是Jaeger的&lt;code&gt;服务器&lt;/code&gt;，接收从Agent发送过来的Trace信息，并对其进行验证、索引、转换，并最终将其存储起来。&lt;/p&gt;

&lt;h2 id=&quot;34-data-store&quot;&gt;3.4 Data Store&lt;/h2&gt;
&lt;p&gt;Jaeger的数据存储是可插拔式组件设计，有多种数据后端可选：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Cassandra&lt;/li&gt;
  &lt;li&gt;Elasticsearch&lt;/li&gt;
  &lt;li&gt;Kafka&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;存储选择是个问题，我简单搜索了下，没有找到非常权威的帖子对这三者进行横向比较，也可能是因为这块的技术比较新发展比较快。就我来看，个人建议是熟悉什么用什么，以不增加系统复杂度为第一要务。猜想：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Cassandra大概是稳定性最好的，大数据量的选择应该是这个&lt;/li&gt;
  &lt;li&gt;功能上大概是ELK最好，本来它就是以全文搜索为功能设计出来的系统&lt;/li&gt;
  &lt;li&gt;性能上应该是Kafka最高，毕竟Kafka的吞吐量是有口皆碑的&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;从官方的文档口径上来看，最推荐的应该是使用Kafka和Ingester组成通道，然后使用Cassandra作为存储设备。&lt;/p&gt;

&lt;h2 id=&quot;35-jaeger-query&quot;&gt;3.5 Jaeger Query&lt;/h2&gt;
&lt;p&gt;Jaeger的查询引擎，UI发送查询请求到该组件，然后查询引擎会查询后台数据仓库，返回结果。该组件启动的时候已经附带启动了HTTP的UI界面。&lt;/p&gt;

&lt;h2 id=&quot;36-jaeger-ingester&quot;&gt;3.6 Jaeger Ingester&lt;/h2&gt;
&lt;p&gt;组件上还有个Ingester，但基本上没找到什么相关信息。官方介绍：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Ingester is a service that reads from Kafka topic and writes to another storage backend (Cassandra, Elasticsearch).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;感觉应该是一个解决吞吐量的中间件。&lt;/p&gt;

&lt;h2 id=&quot;日志模式&quot;&gt;日志模式&lt;/h2&gt;
&lt;p&gt;按照Jaeger当前的设计，Client和Agent之间是使用UDP进行通讯，必须是实时连接的，这就对Agent的健壮性提出了要求，如果当前Agent已挂，Client就基本上不可用了。而日志文件化的好处就是将Client和Agent彻底解耦，使用操作系统的磁盘IO来解决Tracing生成的问题，而这方面，官方&lt;code&gt;并没有计划&lt;/code&gt;要这么做，没有任何关于这方面的设计讨论（至少我没找到）。&lt;/p&gt;

&lt;p&gt;而官方倒是有讨论：如果有一个外部存储已经存放了Tracing相关数据，能不能直接使用Query连接上去进行Tracing数据的展示和分析。见：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/jaegertracing/jaeger/issues/649&quot; target=&quot;_blank&quot;&gt;Integration with external logs storage when displaying traces #649&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果这个实现的话，实际上就完全绕过了Jaeger的整个生命周期：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;不再需要在应用程序中嵌入Jaeger的Client（直接使用日志组件将Tracing打成日志）&lt;/li&gt;
  &lt;li&gt;不再需要在边车中放置Jaeger的Agent（只要有日志聚合的Agent即可：Logstash、Filebeat）&lt;/li&gt;
  &lt;li&gt;不再需要启动Collector集群（直接由日志聚合Agent发送到Elaticsearch）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;只需要直接沿用（如果在用的话）ELK系列日志聚合系统，然后用Jaeger的Query直接连接到Elasticsearch上进行Tracing对应的日志分析就可以了。这样即减少了系统的整体复杂度（不需要Jaeger的一整套东西了），又降低了系统整体负载（磁盘IO永远是最便宜的东西）。&lt;/p&gt;

&lt;p&gt;就看今后发展了。不过如果这真的实现了，Jaeger项目还有必要存在么。。。&lt;/p&gt;

&lt;h1 id=&quot;4-jaeger使用&quot;&gt;4. Jaeger使用&lt;/h1&gt;
&lt;p&gt;初步入门可以查看官方文档：&lt;a href=&quot;https://www.jaegertracing.io/docs/1.11/getting-started/&quot; target=&quot;_blank&quot;&gt;Getting started&lt;/a&gt;。实际生产环境的安装和部署，需要仔细阅读官方文档：&lt;a href=&quot;https://www.jaegertracing.io/docs/1.11/deployment/&quot; target=&quot;_blank&quot;&gt;Deployment&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;如果使用&lt;code&gt;all-in-one&lt;/code&gt;范例镜像的话，可以：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ docker run -d --name jaeger \
  -e COLLECTOR_ZIPKIN_HTTP_PORT=9411 \
  -p 5775:5775/udp \
  -p 6831:6831/udp \
  -p 6832:6832/udp \
  -p 5778:5778 \
  -p 16686:16686 \
  -p 14268:14268 \
  -p 9411:9411 \
  jaegertracing/all-in-one:1.11.0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;这里主要要了解下一堆端口：&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Port&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Protocol&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Component&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Function&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;5775&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;UDP&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;agent&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;accept zipkin.thrift over compact thrift protocol (deprecated, used by legacy clients only)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;6831&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;UDP&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;agent&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;accept jaeger.thrift over compact thrift protocol&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;6832&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;UDP&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;agent&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;accept jaeger.thrift over binary thrift protocol&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;5778&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;HTTP&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;agent&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;serve configs&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;16686&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;HTTP&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;query&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;serve frontend&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;16687&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;HTTP&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;query&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;The http port for the health check service&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;14267&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;TChannel&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;collector&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;The TChannel port for the collector service&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;14268&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;HTTP&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;collector&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;accept jaeger.thrift directly from clients&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;14269&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;HTTP&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;collector&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;The http port for the health check service&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;14250&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;gRPC&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;collector&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;accept model.proto&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;9411&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;HTTP&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;collector&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Zipkin compatible endpoint (optional)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;部分补充：&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.jaegertracing.io/docs/1.11/getting-started/&quot; target=&quot;_blank&quot;&gt;Getting started&lt;/a&gt;范例的官方文档里缺一个端口&lt;code&gt;14267&lt;/code&gt;。这个端口的Protocol被描述成&lt;code&gt;TChannel&lt;/code&gt;，可搜索文档&lt;a href=&quot;https://www.jaegertracing.io/docs/1.11/deployment/&quot; target=&quot;_blank&quot;&gt;Deployment&lt;/a&gt;：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ docker run \
  -e SPAN_STORAGE_TYPE=memory \
  jaegertracing/jaeger-collector:1.11.0 \
  --help

...
--collector.port int    The TChannel port for the collector service (default 14267)
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;此外，端口&lt;code&gt;14250&lt;/code&gt;的说明也不够清楚，实际上它是，Protocol是gRPC，也就是HTTP2：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;...
--collector.grpc-port int    The gRPC port for the collector service (default 14250)
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;以及，&lt;code&gt;14268&lt;/code&gt;：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;...
--collector.http-port int    The HTTP port for the collector service (default 14268)
...
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;41-jaeger-collector单独启动&quot;&gt;4.1 Jaeger Collector单独启动&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;#ID_APP_COLLECTOR_HELP&quot;&gt;jaeger-collector memory –help&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ docker run -d --name jaeger-collector \
  -e SPAN_STORAGE_TYPE=memory \
  -p 14267:14267 \
  -p 14268:14268 \
  -p 14250:14250 \
  jaegertracing/jaeger-collector:1.11.0
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;42-jaeger-agent单独启动&quot;&gt;4.2 Jaeger Agent单独启动&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;#ID_APP_AGENT_HELP&quot;&gt;jaeger-agent –help&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ docker run -d --name jaeger-agent \
  --link jaeger-collector \
  -p 5775:5775/udp \
  -p 6831:6831/udp \
  -p 6832:6832/udp \
  -p 5778:5778 \
  jaegertracing/jaeger-agent:1.11.0 \
  --reporter.type=grpc \
  --reporter.grpc.host-port=jaeger-collector:14250
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;43-jaeger-query单独启动&quot;&gt;4.3 Jaeger Query单独启动&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;#ID_APP_QUERY_HELP&quot;&gt;jaeger-query –help&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ docker run -d --name jaeger-query \
  --link jaeger-collector \
  -e SPAN_STORAGE_TYPE=memory \
  -p 16686:16686 \
  jaegertracing/jaeger-query:1.11.0
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&quot;5-jaeger高可用&quot;&gt;5. Jaeger高可用&lt;/h1&gt;
&lt;h2 id=&quot;51-metrics&quot;&gt;5.1 Metrics&lt;/h2&gt;
&lt;p&gt;Jaeger也兼容Prometheus格式的指标输出，有两个命令行参数：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code&gt;--metrics-backend&lt;/code&gt;：metrics暴露的格式，默认为&lt;code&gt;prometheus&lt;/code&gt;，&lt;code&gt;expvar&lt;/code&gt;可选&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;--metrics-http-route&lt;/code&gt;：metrics暴露的endpoint，默认为&lt;code&gt;/metrics&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;此外，几个端口需要了解下：&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Component&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Port&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;jaeger-agent&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;5778&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;jaeger-collector&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;14268&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;jaeger-query&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;16686&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;jaeger-ingester&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;14271&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;范例都在本文下面的资料部分：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#ID_APP_AGENT_METRICS&quot;&gt;jaeger-agent&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ID_APP_COLLECTOR_METRICS&quot;&gt;jaeger-collector&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ID_APP_QUERY_METRICS&quot;&gt;jaeger-query&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;jaeger-ingester（这块启动需要的依赖太重，暂时没做尝试）&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;52-components&quot;&gt;5.2 Components&lt;/h2&gt;
&lt;p&gt;先说结论，Jaeger在高可用这块的设计和实现基本上是空白，很可能在某些极端情况下丢失Tracing的数据。&lt;/p&gt;

&lt;h3 id=&quot;521-client&quot;&gt;5.2.1 Client&lt;/h3&gt;
&lt;p&gt;Client因为只是应用程序的Lib部分，因此不涉及到任何高可用的概念。&lt;/p&gt;

&lt;h3 id=&quot;522-agent&quot;&gt;5.2.2 Agent&lt;/h3&gt;
&lt;p&gt;Agent部分就只是一个转发机关，我查了下对应的文档和网络没找到高可用的设计，此外错误处理基本上也是没有的。也就是说，如果Agent出问题，所有当前未发送缓存中的数据都会丢失，且从Client传输到Agent的数据也会丢失。&lt;/p&gt;

&lt;p&gt;见：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/jaegertracing/jaeger/issues/1255&quot; target=&quot;_blank&quot;&gt;What happens when the jaeger-agent is down on a machine? #1255&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/jaegertracing/jaeger/issues/1430&quot; target=&quot;_blank&quot;&gt;Jaeger Agent does not buffer spans when the Collector is unavailable #1430&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;523-collector&quot;&gt;5.2.3 Collector&lt;/h3&gt;
&lt;blockquote&gt;
  &lt;p&gt;The collectors are stateless and thus many instances of jaeger-collector can be run in parallel.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;这和我一开始的理解有点不同。我之前认为对同个Trace的多个子Span的识别和清洗过滤等行为是在Collector这个环节处理的，但既然官方文档都说明Collector是无状态的了，那就不是了。Collector应该只负责简单的Validation然后就直接存储到后台的Data Store里了。&lt;/p&gt;

&lt;p&gt;如果对Agent配置了以&lt;code&gt;,&lt;/code&gt;分隔的多台无状态Collectors，而其中某台Down了会发生什么，后面需要做测试，按现在Jaeger对错误处理和可用性的支持来看，估计就是直接丢数据了。&lt;/p&gt;

&lt;p&gt;同个Trace的多个组成部分Span是否都到达，是否缺失了一部分，看来是没有任何处理和保证的。这也就是说：可能会有部分Trace在UI中可以查到，但其中组成部分的Spans是不完整的，部分缺失的。说实在的，这还蛮致命的。&lt;/p&gt;

&lt;h3 id=&quot;524-data-store&quot;&gt;5.2.4 Data Store&lt;/h3&gt;
&lt;p&gt;这块就完全由选择的后台数据存储设施自己负责了，Cassandra是出了名的好用，Kafka在扩展上也不错。&lt;/p&gt;

&lt;h1 id=&quot;6-jaeger采样&quot;&gt;6. Jaeger采样&lt;/h1&gt;
&lt;p&gt;在&lt;a href=&quot;/2019/04/monitoring-tracing-logging/&quot; target=&quot;_blank&quot;&gt;Compare: Monitoring | Tracing | Logging&lt;/a&gt;里我已经提到过，tracing是一件频度相当高，且数据量很庞大的工作，因此其性能很可能有问题。Jaeger给了一个新的思路，就是按规则采样，而不是将所有发生的事件全部都发送并存储。&lt;/p&gt;

&lt;p&gt;这里需要说明的是采样的决策。如果一个链路很长的Trace，其中每一个Span都有权决定当前信息是否需要被采样，那么你就永远看不到一个完整的Trace了。组成Trace的A、B、C，Span A决定采样，B决定不采样，C决定采样，结果Trace就丢失了B部分数据。&lt;/p&gt;

&lt;p&gt;Jaeger采样的决策是在链路的第一节点就决定好了的，当前的Trace是否需要被采样，该决策做出之后，后续整个链路中所有的Span都需要按整个决策执行。这样就不会丢失数据了。&lt;/p&gt;

&lt;p&gt;见：&lt;a href=&quot;https://www.jaegertracing.io/docs/1.11/sampling/&quot; target=&quot;_blank&quot;&gt;Sampling&lt;/a&gt;。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The sampling decision will be propagated with the requests to B and to C, so those services will not be making the sampling decision again but instead will respect the decision made by the top service A. This approach guarantees that if a trace is sampled, all its spans will be recorded in the backend. If each service was making its own sampling decision we would rarely get complete traces in the backend.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;关于采样的策略，官方也看到了不少问题，后续有一个正在制作中的功能&lt;code&gt;Adaptive Sampling&lt;/code&gt;，具体的问题和设计可以看：&lt;a href=&quot;https://github.com/jaegertracing/jaeger/issues/365&quot; target=&quot;_blank&quot;&gt;Adaptive Sampling #365&lt;/a&gt;。简单来说就是可以按更复杂的策略进行采样的决策。&lt;/p&gt;

&lt;h2 id=&quot;61-client配置&quot;&gt;6.1 Client配置&lt;/h2&gt;
&lt;p&gt;最基础的策略，采样是按&lt;code&gt;Client&lt;/code&gt;的配置进行执行的，记住，这种情况下采样是在客户端做的，而不是服务器，而且每个客户端都可以做不同的策略。&lt;/p&gt;

&lt;p&gt;此外，光阅读文档可能会理解不全，可以查看issue来加深理解：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/jaegertracing/jaeger/issues/832&quot; target=&quot;_blank&quot;&gt;How sampler.type=remote works #832&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;611-constant&quot;&gt;6.1.1 Constant&lt;/h3&gt;
&lt;p&gt;常量决策。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;类型：&lt;code&gt;sampler.type=const&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;值：
    &lt;ul&gt;
      &lt;li&gt;&lt;code&gt;sampler.param=1&lt;/code&gt;：全部采样&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;sampler.param=0&lt;/code&gt;：全部丢弃&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;612-probabilistic&quot;&gt;6.1.2 Probabilistic&lt;/h3&gt;
&lt;p&gt;概率决策。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;类型：&lt;code&gt;sampler.type=probabilistic&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;值：&lt;code&gt;sampler.param=0.1&lt;/code&gt;表示 采样 1/10&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;613-rate-limiting&quot;&gt;6.1.3 Rate Limiting&lt;/h3&gt;
&lt;p&gt;频次策略。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;类型：&lt;code&gt;sampler.type=ratelimiting&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;值：&lt;code&gt;sampler.param=2.0&lt;/code&gt;表示 每秒 采样2次&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;614-remote&quot;&gt;6.1.4 Remote&lt;/h3&gt;
&lt;p&gt;远端决策。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;类型：&lt;code&gt;sampler.type=remote&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;这种情况下，Client会把请求发到Agent，而Agent则会进行判断是否进行采样。实际的配置则是放在Collector上，参见下面的&lt;code&gt;6.2&lt;/code&gt;。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;sampler consults Jaeger agent for the appropriate sampling strategy to use in the current service.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;62-collector配置&quot;&gt;6.2 Collector配置&lt;/h2&gt;
&lt;p&gt;官方文档在：&lt;a href=&quot;https://www.jaegertracing.io/docs/1.11/sampling/#collector-sampling-configuration&quot; target=&quot;_blank&quot;&gt;Collector Sampling Configuration&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;在&lt;code&gt;Client&lt;/code&gt;采样策略配置为：&lt;code&gt;sampler.type=remote&lt;/code&gt;的情况下，Agent会向Collector进行采样策略询问，这部分配置是放在&lt;code&gt;Collector&lt;/code&gt;上的。需要在Collector启动的时候指定配置文件：&lt;code&gt;--sampling.strategies-file&lt;/code&gt;。见：&lt;a href=&quot;#ID_APP_COLLECTOR_HELP&quot;&gt;jaeger-collector memory –help&lt;/a&gt;。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;This option requires a path to a json file which have the sampling strategies defined.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-json&quot; data-lang=&quot;json&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;quot;service_strategies&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;quot;service&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;probabilistic&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;quot;param&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;quot;operation_strategies&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;nt&quot;&gt;&amp;quot;operation&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;op1&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;nt&quot;&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;probabilistic&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;nt&quot;&gt;&amp;quot;param&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.2&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;nt&quot;&gt;&amp;quot;operation&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;op2&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;nt&quot;&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;probabilistic&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;nt&quot;&gt;&amp;quot;param&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.4&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;quot;service&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;bar&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;ratelimiting&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;quot;param&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;quot;default_strategy&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;probabilistic&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;param&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;code&gt;service_strategies&lt;/code&gt;定义了服务级别的采样策略，&lt;code&gt;operation_strategies&lt;/code&gt;则定义了操作级别的采样策略。而实施的采样策略有两种可能：&lt;code&gt;概率策略&lt;/code&gt;和&lt;code&gt;频次策略&lt;/code&gt;（注意：操作级别的采样策略 不支持 频次策略）。&lt;code&gt;default_strategy&lt;/code&gt;定义了上述定义之外的情况下的采样策略。&lt;/p&gt;

&lt;p&gt;在上面的例子中：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;所有的&lt;code&gt;foo&lt;/code&gt;服务，都按0.8的概率策略进行采样&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;op1&lt;/code&gt;和&lt;code&gt;op2&lt;/code&gt;虽然属于&lt;code&gt;foo&lt;/code&gt;服务，但因为它们各自有自己的配置，因此按自己的配置实施，分别是0.2和0.4的概率策略&lt;/li&gt;
  &lt;li&gt;所有的&lt;code&gt;bar&lt;/code&gt;服务，都按每分钟5次的频次策略进行采样&lt;/li&gt;
  &lt;li&gt;除此之外的所有都按0.5的概率频次进行采样&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;7-todo&quot;&gt;7. TODO&lt;/h1&gt;
&lt;p&gt;囿于当前使用的深度及项目调研的时间限制，有部分内容做的还不够深入，后续可以考虑补全：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Jaeger自身的几项Metrics深入研究：Agent、Collector、Query&lt;/li&gt;
  &lt;li&gt;Jaeger的Benchmark&lt;/li&gt;
  &lt;li&gt;特别需要关注Jaeger在高负载情况下的数据丢失情况&lt;/li&gt;
  &lt;li&gt;后端Data Store的选择问题&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;资料&quot;&gt;资料&lt;/h1&gt;
&lt;h2 id=&quot;链接&quot;&gt;链接&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://yq.aliyun.com/articles/514488&quot; target=&quot;_blank&quot;&gt;开放分布式追踪（OpenTracing）入门与 Jaeger 实现&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.jianshu.com/p/a963ad0bbe3e&quot; target=&quot;_blank&quot;&gt;OpenTracing语义标准规范及实现&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/jaegertracing/the-life-of-a-span-ee508410200b&quot; target=&quot;_blank&quot;&gt;The life of a span&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/jaegertracing/jaeger/issues/1255&quot; target=&quot;_blank&quot;&gt;What happens when the jaeger-agent is down on a machine? #1255&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/jaegertracing/jaeger/issues/1430&quot; target=&quot;_blank&quot;&gt;Jaeger Agent does not buffer spans when the Collector is unavailable #1430&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/jaegertracing/jaeger/issues/365&quot; target=&quot;_blank&quot;&gt;Adaptive Sampling #365&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/jaegertracing/jaeger/issues/832&quot; target=&quot;_blank&quot;&gt;How sampler.type=remote works #832&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/jaegertracing/jaeger/issues/649&quot; target=&quot;_blank&quot;&gt;Integration with external logs storage when displaying traces #649&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;help&quot;&gt;Help&lt;/h2&gt;
&lt;h3 id=&quot;ID_APP_AGENT_HELP&quot;&gt;jaeger-agent –help&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;$ docker run --rm jaegertracing/jaeger-agent:1.11.0 --help

Jaeger agent is a daemon program that runs on every host and receives tracing data submitted by Jaeger client libraries.

Usage:
  jaeger-agent [flags]
  jaeger-agent [command]

Available Commands:
  help        Help about any command
  version     Print the version

Flags:
      --collector.host-port string                                Deprecated; comma-separated string representing host:ports of a static list of collectors to connect to directly (e.g. when not using service discovery)
      --config-file string                                        Configuration file in JSON, TOML, YAML, HCL, or Java properties formats (default none). See spf13/viper for precedence.
      --discovery.conn-check-timeout duration                     Deprecated; sets the timeout used when establishing new connections (default 250ms)
      --discovery.min-peers int                                   Deprecated; if using service discovery, the min number of connections to maintain to the backend (default 3)
  -h, --help                                                      help for jaeger-agent
      --http-server.host-port string                              host:port of the http server (e.g. for /sampling point and /baggageRestrictions endpoint) (default &quot;:5778&quot;)
      --log-level string                                          Minimal allowed log Level. For more levels see https://github.com/uber-go/zap (default &quot;info&quot;)
      --metrics-backend string                                    Defines which metrics backend to use for metrics reporting: expvar, prometheus, none (default &quot;prometheus&quot;)
      --metrics-http-route string                                 Defines the route of HTTP endpoint for metrics backends that support scraping (default &quot;/metrics&quot;)
      --processor.jaeger-binary.server-host-port string           host:port for the UDP server (default &quot;:6832&quot;)
      --processor.jaeger-binary.server-max-packet-size int        max packet size for the UDP server (default 65000)
      --processor.jaeger-binary.server-queue-size int             length of the queue for the UDP server (default 1000)
      --processor.jaeger-binary.workers int                       how many workers the processor should run (default 10)
      --processor.jaeger-compact.server-host-port string          host:port for the UDP server (default &quot;:6831&quot;)
      --processor.jaeger-compact.server-max-packet-size int       max packet size for the UDP server (default 65000)
      --processor.jaeger-compact.server-queue-size int            length of the queue for the UDP server (default 1000)
      --processor.jaeger-compact.workers int                      how many workers the processor should run (default 10)
      --processor.zipkin-compact.server-host-port string          host:port for the UDP server (default &quot;:5775&quot;)
      --processor.zipkin-compact.server-max-packet-size int       max packet size for the UDP server (default 65000)
      --processor.zipkin-compact.server-queue-size int            length of the queue for the UDP server (default 1000)
      --processor.zipkin-compact.workers int                      how many workers the processor should run (default 10)
      --reporter.grpc.host-port string                            Comma-separated string representing host:port of a static list of collectors to connect to directly.
      --reporter.grpc.retry.max uint                              Sets the maximum number of retries for a call. (default 3)
      --reporter.grpc.tls                                         Enable TLS.
      --reporter.grpc.tls.ca string                               Path to a TLS CA file. (default use the systems truststore)
      --reporter.grpc.tls.server-name string                      Override the TLS server name.
      --reporter.tchannel.discovery.conn-check-timeout duration   sets the timeout used when establishing new connections (default 250ms)
      --reporter.tchannel.discovery.min-peers int                 if using service discovery, the min number of connections to maintain to the backend (default 3)
      --reporter.tchannel.host-port string                        comma-separated string representing host:ports of a static list of collectors to connect to directly (e.g. when not using service discovery)
      --reporter.tchannel.report-timeout duration                 sets the timeout used when reporting spans (default 1s)
      --reporter.type string                                      Reporter type to use e.g. grpc, tchannel (default &quot;grpc&quot;)

Use &quot;jaeger-agent [command] --help&quot; for more information about a command.
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;ID_APP_COLLECTOR_HELP&quot;&gt;jaeger-collector memory –help&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;$ docker run --rm -e SPAN_STORAGE_TYPE=memory jaegertracing/jaeger-collector:1.11.0 --help

Jaeger collector receives traces from Jaeger agents and runs them through a processing pipeline.

Usage:
  jaeger-collector [flags]
  jaeger-collector [command]

Available Commands:
  env         Help about environment variables
  help        Help about any command
  version     Print the version

Flags:
      --collector.grpc-port int           The gRPC port for the collector service (default 14250)
      --collector.grpc.tls                Enable TLS
      --collector.grpc.tls.cert string    Path to TLS certificate file
      --collector.grpc.tls.key string     Path to TLS key file
      --collector.http-port int           The HTTP port for the collector service (default 14268)
      --collector.num-workers int         The number of workers pulling items from the queue (default 50)
      --collector.port int                The TChannel port for the collector service (default 14267)
      --collector.queue-size int          The queue size of the collector (default 2000)
      --collector.zipkin.http-port int    The HTTP port for the Zipkin collector service e.g. 9411
      --config-file string                Configuration file in JSON, TOML, YAML, HCL, or Java properties formats (default none). See spf13/viper for precedence.
      --health-check-http-port int        The http port for the health check service (default 14269)
  -h, --help                              help for jaeger-collector
      --log-level string                  Minimal allowed log Level. For more levels see https://github.com/uber-go/zap (default &quot;info&quot;)
      --memory.max-traces int             The maximum amount of traces to store in memory
      --metrics-backend string            Defines which metrics backend to use for metrics reporting: expvar, prometheus, none (default &quot;prometheus&quot;)
      --metrics-http-route string         Defines the route of HTTP endpoint for metrics backends that support scraping (default &quot;/metrics&quot;)
      --sampling.strategies-file string   The path for the sampling strategies file in JSON format. See sampling documentation to see format of the file
      --span-storage.type string          Deprecated; please use SPAN_STORAGE_TYPE environment variable. Run this binary with &quot;env&quot; command for help.

Use &quot;jaeger-collector [command] --help&quot; for more information about a command.
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;ID_APP_QUERY_HELP&quot;&gt;jaeger-query –help&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;$ docker run --rm jaegertracing/jaeger-query:1.11.0 --help

Jaeger query service provides a Web UI and an API for accessing trace data.

Usage:
  jaeger-query [flags]
  jaeger-query [command]

Available Commands:
  env         Help about environment variables
  help        Help about any command
  version     Print the version

Flags:
      --cassandra...
      --config-file string                              Configuration file in JSON, TOML, YAML, HCL, or Java properties formats (default none). See spf13/viper for precedence.
      --health-check-http-port int                      The http port for the health check service (default 16687)
  -h, --help                                            help for jaeger-query
      --log-level string                                Minimal allowed log Level. For more levels see https://github.com/uber-go/zap (default &quot;info&quot;)
      --metrics-backend string                          Defines which metrics backend to use for metrics reporting: expvar, prometheus, none (default &quot;prometheus&quot;)
      --metrics-http-route string                       Defines the route of HTTP endpoint for metrics backends that support scraping (default &quot;/metrics&quot;)
      --query.base-path string                          The base path for all HTTP routes, e.g. /jaeger; useful when running behind a reverse proxy (default &quot;/&quot;)
      --query.port int                                  The port for the query service (default 16686)
      --query.static-files string                       The directory path override for the static assets for the UI
      --query.ui-config string                          The path to the UI configuration file in JSON format
      --span-storage.type string                        Deprecated; please use SPAN_STORAGE_TYPE environment variable. Run this binary with &quot;env&quot; command for help.

Use &quot;jaeger-query [command] --help&quot; for more information about a command.
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;metrics&quot;&gt;Metrics&lt;/h2&gt;
&lt;h3 id=&quot;ID_APP_AGENT_METRICS&quot;&gt;jaeger-agent metrics&lt;/h3&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# HELP go_gc_duration_seconds A summary of the GC invocation durations.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE go_gc_duration_seconds summary&lt;/span&gt;
...
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_agent_collector_proxy_total collector-proxy&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_agent_collector_proxy_total counter&lt;/span&gt;
jaeger_agent_collector_proxy_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;endpoint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;baggage&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;grpc&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_collector_proxy_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;endpoint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;baggage&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;grpc&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_collector_proxy_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;endpoint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;sampling&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;grpc&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_collector_proxy_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;endpoint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;sampling&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;grpc&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_agent_http_server_errors_total http-server.errors&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_agent_http_server_errors_total counter&lt;/span&gt;
jaeger_agent_http_server_errors_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;all&amp;quot;&lt;/span&gt;,status&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;4xx&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_http_server_errors_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;collector-proxy&amp;quot;&lt;/span&gt;,status&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5xx&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_http_server_errors_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;thrift&amp;quot;&lt;/span&gt;,status&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5xx&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_http_server_errors_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;write&amp;quot;&lt;/span&gt;,status&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5xx&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_agent_http_server_requests_total http-server.requests&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_agent_http_server_requests_total counter&lt;/span&gt;
jaeger_agent_http_server_requests_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;baggage&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_http_server_requests_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;sampling&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_http_server_requests_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;sampling-legacy&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_agent_reporter_batch_size batch_size&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_agent_reporter_batch_size gauge&lt;/span&gt;
jaeger_agent_reporter_batch_size&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;grpc&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_reporter_batch_size&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;grpc&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_agent_reporter_batches_failures_total batches.failures&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_agent_reporter_batches_failures_total counter&lt;/span&gt;
jaeger_agent_reporter_batches_failures_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;grpc&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_reporter_batches_failures_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;grpc&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_agent_reporter_batches_submitted_total batches.submitted&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_agent_reporter_batches_submitted_total counter&lt;/span&gt;
jaeger_agent_reporter_batches_submitted_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;grpc&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_reporter_batches_submitted_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;grpc&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_agent_reporter_spans_failures_total spans.failures&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_agent_reporter_spans_failures_total counter&lt;/span&gt;
jaeger_agent_reporter_spans_failures_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;grpc&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_reporter_spans_failures_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;grpc&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_agent_reporter_spans_submitted_total spans.submitted&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_agent_reporter_spans_submitted_total counter&lt;/span&gt;
jaeger_agent_reporter_spans_submitted_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;grpc&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_reporter_spans_submitted_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;grpc&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_agent_thrift_udp_server_packet_size thrift.udp.server.packet_size&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_agent_thrift_udp_server_packet_size gauge&lt;/span&gt;
jaeger_agent_thrift_udp_server_packet_size&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_server_packet_size&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_server_packet_size&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_agent_thrift_udp_server_packets_dropped_total thrift.udp.server.packets.dropped&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_agent_thrift_udp_server_packets_dropped_total counter&lt;/span&gt;
jaeger_agent_thrift_udp_server_packets_dropped_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_server_packets_dropped_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_server_packets_dropped_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_agent_thrift_udp_server_packets_processed_total thrift.udp.server.packets.processed&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_agent_thrift_udp_server_packets_processed_total counter&lt;/span&gt;
jaeger_agent_thrift_udp_server_packets_processed_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_server_packets_processed_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_server_packets_processed_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_agent_thrift_udp_server_queue_size thrift.udp.server.queue_size&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_agent_thrift_udp_server_queue_size gauge&lt;/span&gt;
jaeger_agent_thrift_udp_server_queue_size&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_server_queue_size&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_server_queue_size&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_agent_thrift_udp_server_read_errors_total thrift.udp.server.read.errors&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_agent_thrift_udp_server_read_errors_total counter&lt;/span&gt;
jaeger_agent_thrift_udp_server_read_errors_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_server_read_errors_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_server_read_errors_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_agent_thrift_udp_t_processor_close_time thrift.udp.t-processor.close-time&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_agent_thrift_udp_t_processor_close_time histogram&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_close_time_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_agent_thrift_udp_t_processor_handler_errors_total thrift.udp.t-processor.handler-errors&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_agent_thrift_udp_t_processor_handler_errors_total counter&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_handler_errors_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_handler_errors_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_agent_thrift_udp_t_processor_handler_errors_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,protocol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;compact&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP process_cpu_seconds_total Total user and system CPU time spent in seconds.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_cpu_seconds_total counter&lt;/span&gt;
process_cpu_seconds_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;.05
&lt;span class=&quot;c1&quot;&gt;# HELP process_max_fds Maximum number of open file descriptors.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_max_fds gauge&lt;/span&gt;
process_max_fds &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.048576e+06
&lt;span class=&quot;c1&quot;&gt;# HELP process_open_fds Number of open file descriptors.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_open_fds gauge&lt;/span&gt;
process_open_fds &lt;span class=&quot;m&quot;&gt;11&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP process_resident_memory_bytes Resident memory size in bytes.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_resident_memory_bytes gauge&lt;/span&gt;
process_resident_memory_bytes &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.3283328e+07
&lt;span class=&quot;c1&quot;&gt;# HELP process_start_time_seconds Start time of the process since unix epoch in seconds.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_start_time_seconds gauge&lt;/span&gt;
process_start_time_seconds &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.55540751234e+09
&lt;span class=&quot;c1&quot;&gt;# HELP process_virtual_memory_bytes Virtual memory size in bytes.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_virtual_memory_bytes gauge&lt;/span&gt;
process_virtual_memory_bytes &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.22187776e+08&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;ID_APP_COLLECTOR_METRICS&quot;&gt;jaeger-collector metrics&lt;/h3&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# HELP go_gc_duration_seconds A summary of the GC invocation durations.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE go_gc_duration_seconds summary&lt;/span&gt;
...
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_collector_batch_size batch-size&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_collector_batch_size gauge&lt;/span&gt;
jaeger_collector_batch_size&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_collector_in_queue_latency in-queue-latency&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_collector_in_queue_latency histogram&lt;/span&gt;
jaeger_collector_in_queue_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_in_queue_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_in_queue_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_in_queue_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_in_queue_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_in_queue_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_in_queue_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_in_queue_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_in_queue_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_in_queue_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_in_queue_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_in_queue_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_in_queue_latency_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_in_queue_latency_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_collector_queue_length queue-length&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_collector_queue_length gauge&lt;/span&gt;
jaeger_collector_queue_length&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_collector_save_latency save-latency&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_collector_save_latency histogram&lt;/span&gt;
jaeger_collector_save_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_save_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_save_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_save_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_save_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_save_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_save_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_save_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_save_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_save_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_save_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_save_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_save_latency_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_save_latency_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_collector_spans_dropped_total spans.dropped&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_collector_spans_dropped_total counter&lt;/span&gt;
jaeger_collector_spans_dropped_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_collector_spans_received_total received&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_collector_spans_received_total counter&lt;/span&gt;
jaeger_collector_spans_received_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_spans_received_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;unknown&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_spans_received_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_spans_received_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_spans_received_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;unknown&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_spans_received_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_collector_spans_rejected_total rejected&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_collector_spans_rejected_total counter&lt;/span&gt;
jaeger_collector_spans_rejected_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_spans_rejected_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;unknown&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_spans_rejected_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_spans_rejected_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_spans_rejected_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;unknown&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_spans_rejected_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_collector_spans_saved_by_svc_total saved-by-svc&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_collector_spans_saved_by_svc_total counter&lt;/span&gt;
jaeger_collector_spans_saved_by_svc_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_spans_saved_by_svc_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_spans_saved_by_svc_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_spans_saved_by_svc_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_collector_spans_serviceNames spans.serviceNames&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_collector_spans_serviceNames gauge&lt;/span&gt;
jaeger_collector_spans_serviceNames&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1bd33f303256&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_collector_traces_received_total received&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_collector_traces_received_total counter&lt;/span&gt;
jaeger_collector_traces_received_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_traces_received_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;unknown&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_traces_received_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_traces_received_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_traces_received_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;unknown&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_traces_received_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_collector_traces_rejected_total rejected&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_collector_traces_rejected_total counter&lt;/span&gt;
jaeger_collector_traces_rejected_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_traces_rejected_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;unknown&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_traces_rejected_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_traces_rejected_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;jaeger&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_traces_rejected_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;unknown&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_traces_rejected_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;,format&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;zipkin&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_collector_traces_saved_by_svc_total saved-by-svc&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_collector_traces_saved_by_svc_total counter&lt;/span&gt;
jaeger_collector_traces_saved_by_svc_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_traces_saved_by_svc_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_traces_saved_by_svc_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_collector_traces_saved_by_svc_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,svc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;other-services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP process_cpu_seconds_total Total user and system CPU time spent in seconds.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_cpu_seconds_total counter&lt;/span&gt;
process_cpu_seconds_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;.71
&lt;span class=&quot;c1&quot;&gt;# HELP process_max_fds Maximum number of open file descriptors.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_max_fds gauge&lt;/span&gt;
process_max_fds &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.048576e+06
&lt;span class=&quot;c1&quot;&gt;# HELP process_open_fds Number of open file descriptors.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_open_fds gauge&lt;/span&gt;
process_open_fds &lt;span class=&quot;m&quot;&gt;11&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP process_resident_memory_bytes Resident memory size in bytes.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_resident_memory_bytes gauge&lt;/span&gt;
process_resident_memory_bytes &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.9329024e+07
&lt;span class=&quot;c1&quot;&gt;# HELP process_start_time_seconds Start time of the process since unix epoch in seconds.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_start_time_seconds gauge&lt;/span&gt;
process_start_time_seconds &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.55540675992e+09
&lt;span class=&quot;c1&quot;&gt;# HELP process_virtual_memory_bytes Virtual memory size in bytes.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_virtual_memory_bytes gauge&lt;/span&gt;
process_virtual_memory_bytes &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.3008896e+08&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;ID_APP_QUERY_METRICS&quot;&gt;jaeger-query metrics&lt;/h3&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# HELP go_gc_duration_seconds A summary of the GC invocation durations.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE go_gc_duration_seconds summary&lt;/span&gt;
...
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_query_latency latency&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_query_latency histogram&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_latency_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_query_requests_total requests&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_query_requests_total counter&lt;/span&gt;
jaeger_query_requests_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_requests_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_requests_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_requests_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_requests_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_requests_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_requests_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_requests_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_requests_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_requests_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,result&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_query_responses responses&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_query_responses histogram&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_trace_ids&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;find_traces&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_operations&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_services&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_query_responses_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;get_trace&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_tracer_baggage_restrictions_updates_total Number of times baggage restrictions were successfully updated&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_tracer_baggage_restrictions_updates_total counter&lt;/span&gt;
jaeger_tracer_baggage_restrictions_updates_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_tracer_baggage_restrictions_updates_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_tracer_baggage_truncations_total Number of times baggage was truncated as per baggage restrictions&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_tracer_baggage_truncations_total counter&lt;/span&gt;
jaeger_tracer_baggage_truncations_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_tracer_baggage_updates_total Number of times baggage was successfully written or updated on spans&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_tracer_baggage_updates_total counter&lt;/span&gt;
jaeger_tracer_baggage_updates_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_tracer_baggage_updates_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_tracer_finished_spans_total Number of spans finished by this tracer&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_tracer_finished_spans_total counter&lt;/span&gt;
jaeger_tracer_finished_spans_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_tracer_reporter_queue_length Current number of spans in the reporter queue&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_tracer_reporter_queue_length gauge&lt;/span&gt;
jaeger_tracer_reporter_queue_length &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_tracer_reporter_spans_total Number of spans successfully reported&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_tracer_reporter_spans_total counter&lt;/span&gt;
jaeger_tracer_reporter_spans_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;dropped&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_tracer_reporter_spans_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_tracer_reporter_spans_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_tracer_sampler_queries_total Number of times the Sampler succeeded to retrieve sampling strategy&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_tracer_sampler_queries_total counter&lt;/span&gt;
jaeger_tracer_sampler_queries_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_tracer_sampler_queries_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_tracer_sampler_updates_total Number of times the Sampler succeeded to retrieve and update sampling strategy&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_tracer_sampler_updates_total counter&lt;/span&gt;
jaeger_tracer_sampler_updates_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_tracer_sampler_updates_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_tracer_span_context_decoding_errors_total Number of errors decoding tracing context&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_tracer_span_context_decoding_errors_total counter&lt;/span&gt;
jaeger_tracer_span_context_decoding_errors_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_tracer_started_spans_total Number of sampled spans started by this tracer&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_tracer_started_spans_total counter&lt;/span&gt;
jaeger_tracer_started_spans_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;sampled&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;n&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_tracer_started_spans_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;sampled&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;y&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_tracer_throttled_debug_spans_total Number of times debug spans were throttled&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_tracer_throttled_debug_spans_total counter&lt;/span&gt;
jaeger_tracer_throttled_debug_spans_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_tracer_throttler_updates_total Number of times throttler successfully updated&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_tracer_throttler_updates_total counter&lt;/span&gt;
jaeger_tracer_throttler_updates_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;err&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_tracer_throttler_updates_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP jaeger_tracer_traces_total Number of traces started by this tracer as sampled&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE jaeger_tracer_traces_total counter&lt;/span&gt;
jaeger_tracer_traces_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;sampled&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;n&amp;quot;&lt;/span&gt;,state&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;joined&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_tracer_traces_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;sampled&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;n&amp;quot;&lt;/span&gt;,state&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;started&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_tracer_traces_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;sampled&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;y&amp;quot;&lt;/span&gt;,state&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;joined&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
jaeger_tracer_traces_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;sampled&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;y&amp;quot;&lt;/span&gt;,state&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;started&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP process_cpu_seconds_total Total user and system CPU time spent in seconds.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_cpu_seconds_total counter&lt;/span&gt;
process_cpu_seconds_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;.09
&lt;span class=&quot;c1&quot;&gt;# HELP process_max_fds Maximum number of open file descriptors.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_max_fds gauge&lt;/span&gt;
process_max_fds &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.048576e+06
&lt;span class=&quot;c1&quot;&gt;# HELP process_open_fds Number of open file descriptors.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_open_fds gauge&lt;/span&gt;
process_open_fds &lt;span class=&quot;m&quot;&gt;9&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP process_resident_memory_bytes Resident memory size in bytes.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_resident_memory_bytes gauge&lt;/span&gt;
process_resident_memory_bytes &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.4475264e+07
&lt;span class=&quot;c1&quot;&gt;# HELP process_start_time_seconds Start time of the process since unix epoch in seconds.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_start_time_seconds gauge&lt;/span&gt;
process_start_time_seconds &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.55540951442e+09
&lt;span class=&quot;c1&quot;&gt;# HELP process_virtual_memory_bytes Virtual memory size in bytes.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE process_virtual_memory_bytes gauge&lt;/span&gt;
process_virtual_memory_bytes &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.31395584e+08&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;blockquote&gt;
  &lt;p&gt;EOF&lt;/p&gt;
&lt;/blockquote&gt;
</description>
				<pubDate>Wed, 17 Apr 2019 10:01:22 +0800</pubDate>
				<link>https://xenojoshua.com/2019/04/jaeger-note/</link>
				<guid isPermaLink="true">https://xenojoshua.com/2019/04/jaeger-note/</guid>
			</item>
		
			<item>
				<title>Compare: Monitoring | Tracing | Logging</title>
				<description>&lt;h4&gt;Table of Contents&lt;/h4&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1-monitoring--tracing--logging&quot; id=&quot;markdown-toc-1-monitoring--tracing--logging&quot;&gt;1. Monitoring &amp;amp; Tracing &amp;amp; Logging&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-monitoring&quot; id=&quot;markdown-toc-2-monitoring&quot;&gt;2. Monitoring&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-tracing&quot; id=&quot;markdown-toc-3-tracing&quot;&gt;3. Tracing&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4-logging&quot; id=&quot;markdown-toc-4-logging&quot;&gt;4. Logging&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5-总结&quot; id=&quot;markdown-toc-5-总结&quot;&gt;5. 总结&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;1-monitoring--tracing--logging&quot;&gt;1. Monitoring &amp;amp; Tracing &amp;amp; Logging&lt;/h1&gt;
&lt;p&gt;对于一个系统来说，标题中提到的这三者需求都是必然存在的，而有的时候我们会搞不清楚这三者相互之间是什么关系。我之前在做系统设计的时候也考虑过，是不是有必要引入那么多组件，毕竟如果这三者完全分开每一个一项的话，就有三个组件了（事实上就是：Prometheus+Grafana、Jaeger、ELK）。&lt;/p&gt;

&lt;p&gt;因此想做个笔记尝试举例来梳理下。&lt;/p&gt;

&lt;p&gt;外部链接：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://peter.bourgon.org/blog/2017/02/21/metrics-tracing-and-logging.html&quot; target=&quot;_blank&quot;&gt;Metrics, tracing, and logging&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;2-monitoring&quot;&gt;2. Monitoring&lt;/h1&gt;
&lt;p&gt;Monitoring（监控）举例来说就是：&lt;code&gt;定期体检&lt;/code&gt;。使用监控系统把需要关注的指标采集起来，形成报告，并对需要关注的异常数据进行分析形成告警。&lt;/p&gt;

&lt;p&gt;特点是：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;低频&lt;/li&gt;
  &lt;li&gt;定期&lt;/li&gt;
  &lt;li&gt;定量&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;这也是Prometheus的架构做得非常简单的原因，Monitoring的需求并没有包含非常高的并发量和通讯量。反过来说：高并发、大数据量的需求并不适用于Monitoring这个点。&lt;/p&gt;

&lt;h1 id=&quot;3-tracing&quot;&gt;3. Tracing&lt;/h1&gt;
&lt;p&gt;Tracing（链路追踪）举例来说就是：&lt;code&gt;对某一项工作的定期汇报&lt;/code&gt;。某个工作开始做了A，制作A事件的报告，收集起来，然后这个工作还有B、C、D等条目，一个个处理，然后都汇总进报告，最终的结果就是一个Tracing。&lt;/p&gt;

&lt;p&gt;特点是：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;高频&lt;/li&gt;
  &lt;li&gt;巨量&lt;/li&gt;
  &lt;li&gt;有固定格式&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;因为Tracing是针对某一个事件（一般来说就是一个API），而这个API可能会和很多组件进行沟通，后续的所有的组件沟通无论是内部还是外部的IO，都算作这个API调用的Tracing的一部分。可以想见在一个业务繁忙的系统中，API调用的数量已经是天文数字，而其衍生出来的Tracing记录更是不得了的量。其特点就是高频、巨量，一个API会衍生出大量的子调用。&lt;/p&gt;

&lt;p&gt;也因此适合用来做Monitoring的系统就不一定适合做Tracing了，用Prometheus这样的系统来做Tracing肯定完蛋（Prometheus只有拉模式，全部都是HTTP请求，高并发直接挂掉）。一般来说Tracing系统都会在本地磁盘IO上做日志（最高效、也是最低的Cost），然后再通过本地Agent慢慢把文本日志数据发送到聚合服务器上，甚至可能在聚合服务器和本地的Agent之间还需要做消息队列，让聚合服务器慢慢消化巨量的消息。&lt;/p&gt;

&lt;p&gt;Tracing在现在的业界是有标准的：&lt;code&gt;OpenTracing&lt;/code&gt;，因此它不是很随意的日志/事件聚合，而是有格式要求的日志/事件聚合，这就是Tracing和Logging最大的不同。&lt;/p&gt;

&lt;h1 id=&quot;4-logging&quot;&gt;4. Logging&lt;/h1&gt;
&lt;p&gt;Logging（日志）举例来说就是：&lt;code&gt;废品回收站&lt;/code&gt;。各种各样的物品都会汇总进入到配品回收站里，然后经过分门别类归纳整理，成为各种可回收资源分别回收到商家那里。一般来说我们在大型系统中提到Logging说的都不是简单的&lt;code&gt;日志&lt;/code&gt;，而是&lt;code&gt;日志聚合系统&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;从本质上来说，Monitoring和Tracing都是Logging，Logging是这三者中覆盖面最大的超集，而前两者则是其一部分的子集。Logging最麻烦的是，开发者也不会完全知道最后记录进入到日志系统里的一共会有哪些东西，只有在使用（检索）的时候才可能需要汇总查询总量中的一部分。&lt;/p&gt;

&lt;p&gt;要在一般的Loggin系统中进行Monitoring也是可以的，直接把聚合进来的日志数据提取出来，定期形成数据报告，就是监控了。Tracing也是一样，只要聚合进了Logging系统，有了原始数据，后面要做都是可以做的。因此Logging系统最为通用，其特点和Tracing基本一致，也是需要处理高频并发和巨大的数据量。&lt;/p&gt;

&lt;h1 id=&quot;5-总结&quot;&gt;5. 总结&lt;/h1&gt;
&lt;p&gt;这样一看就很清楚了，每个组件都有其存在的必要性：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Monitoring系统（Prometheus）从根本的需求和基本设计上就不可能支持Tracing和Logging：低频 vs 高频、低量 vs 高量，其从设计到实现就只为了监控服务&lt;/li&gt;
  &lt;li&gt;Tracing系统（Jaeger）对提供的数据有格式要求，且处理方式和一般的Logging也不同，有更限定的应用范围&lt;/li&gt;
  &lt;li&gt;Logging系统（ELK）可以处理前两者的需求，但前两者的领域有更专业的工具就不推荐直接使用普通的日志聚合系统了；Logging系统一般用来处理大型系统的日志聚合以及检索查询&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;EOF&lt;/p&gt;
&lt;/blockquote&gt;
</description>
				<pubDate>Fri, 12 Apr 2019 10:01:22 +0800</pubDate>
				<link>https://xenojoshua.com/2019/04/monitoring-tracing-logging/</link>
				<guid isPermaLink="true">https://xenojoshua.com/2019/04/monitoring-tracing-logging/</guid>
			</item>
		
			<item>
				<title>Grafana Notes</title>
				<description>&lt;h4&gt;Table of Contents&lt;/h4&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1-前言&quot; id=&quot;markdown-toc-1-前言&quot;&gt;1. 前言&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-安装--文件位置--启动&quot; id=&quot;markdown-toc-2-安装--文件位置--启动&quot;&gt;2. 安装 &amp;amp; 文件位置 &amp;amp; 启动&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#21-安装&quot; id=&quot;markdown-toc-21-安装&quot;&gt;2.1 安装&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#22-文件位置&quot; id=&quot;markdown-toc-22-文件位置&quot;&gt;2.2 文件位置&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#23-配置文件&quot; id=&quot;markdown-toc-23-配置文件&quot;&gt;2.3 配置文件&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#24-启动&quot; id=&quot;markdown-toc-24-启动&quot;&gt;2.4 启动&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#25-cli&quot; id=&quot;markdown-toc-25-cli&quot;&gt;2.5 CLI&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#26-登录--访问&quot; id=&quot;markdown-toc-26-登录--访问&quot;&gt;2.6 登录 &amp;amp; 访问&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-概念&quot; id=&quot;markdown-toc-3-概念&quot;&gt;3. 概念&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4-使用简介&quot; id=&quot;markdown-toc-4-使用简介&quot;&gt;4. 使用简介&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#41-日常使用&quot; id=&quot;markdown-toc-41-日常使用&quot;&gt;4.1 日常使用&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#42-数据保存--导出&quot; id=&quot;markdown-toc-42-数据保存--导出&quot;&gt;4.2 数据保存 &amp;amp; 导出&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#43-数据源&quot; id=&quot;markdown-toc-43-数据源&quot;&gt;4.3 数据源&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5-监控指标&quot; id=&quot;markdown-toc-5-监控指标&quot;&gt;5. 监控指标&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#6-todo&quot; id=&quot;markdown-toc-6-todo&quot;&gt;6. TODO&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#7-写在最后&quot; id=&quot;markdown-toc-7-写在最后&quot;&gt;7. 写在最后&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#资料&quot; id=&quot;markdown-toc-资料&quot;&gt;资料&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#链接&quot; id=&quot;markdown-toc-链接&quot;&gt;链接&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ID_APP_GRAFANA_HELP&quot; id=&quot;markdown-toc-ID_APP_GRAFANA_HELP&quot;&gt;grafana -h&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ID_APP_SELF_METRICS&quot; id=&quot;markdown-toc-ID_APP_SELF_METRICS&quot;&gt;grafana/metrics&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;1-前言&quot;&gt;1. 前言&lt;/h1&gt;
&lt;p&gt;Grafana常被用作数据展示界面，虽然实际上它还有很多其他相关的功能，但一般都不会使用。在CNCF的项目中，一般Grafana都和Prometheus结合使用。Grafana的最大优势在于其灵活性，它作为数据界面可以利用相当多种类的后台数据源。在我构想中的系统里，ELK也是相当重要的一个组成部分，而Grafana也可以作为ElasticSearch的前台界面，这就相当好用。&lt;/p&gt;

&lt;p&gt;由于其相当于仅只是一个UI，所以本文中架构之类的内容基本上会很少，主要是概念介绍和使用细节方面的。&lt;/p&gt;

&lt;p&gt;下文所有内容都基于版本：&lt;code&gt;v6.1.2&lt;/code&gt;。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ./bin/grafana-server -v
Version 6.1.2 (commit: de8f6ac, branch: HEAD)
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&quot;2-安装--文件位置--启动&quot;&gt;2. 安装 &amp;amp; 文件位置 &amp;amp; 启动&lt;/h1&gt;
&lt;h2 id=&quot;21-安装&quot;&gt;2.1 安装&lt;/h2&gt;
&lt;p&gt;官方文档：&lt;a href=&quot;https://grafana.com/grafana/download&quot; target=&quot;_blank&quot;&gt;Download Grafana&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;官方站点做得很好，直接按指示操作即可。MAC安装很方便，使用brew装是最佳选择，另外也可以wget下载tar包，解压即用。Go应用程序就这点，真的太赞了。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;brew update 
brew install grafana

or

wget https://dl.grafana.com/oss/release/grafana-6.1.2.darwin-amd64.tar.gz 
tar -zxvf grafana-6.1.2.darwin-amd64.tar.gz
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;22-文件位置&quot;&gt;2.2 文件位置&lt;/h2&gt;
&lt;p&gt;解压出来的Grafana文件夹可以简单看一下，基本上运行的文件位置就是按这个安排的：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;bin                 # grafana-server &amp;amp; grafana-cli
conf                # 配置文件夹
data \              # 运行时产生的文件，刚解压出来时还不存在
     | log          # 日志输出
     | plugins      # 安装的第三方插件等
     | png
     | grafana.db   # sqlite3数据库
public              # 展示相关的内容，HTML、CSS等
scripts             # bash脚本，忽略
tools               # 忽略
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;上面的&lt;code&gt;data&lt;/code&gt;文件夹及里面的内容等，都是默认的配置文件的设定，如果没有特殊需求，一般直接这样运行就可以了。&lt;/p&gt;

&lt;p&gt;如果将Grafana的运行文件夹指定在某个位置的话，一些文件夹是可能需要调整（配置文件中）：&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ini&quot; data-lang=&quot;ini&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Path to where grafana can store temp files, sessions, and the sqlite3 db (if that is used)&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;data/grafana&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Directory where grafana can store logs&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;logs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;log&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Directory where grafana will automatically scan and look for plugins&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;plugins&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;data/grafana/plugins&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# folder that contains provisioning config files that grafana will apply on startup and while running.&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;provisioning&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;conf/provisioning&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# the path relative working path&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;static_root_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;data/grafana/public&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;上面的所有文件夹实际上都是相对路径，相对于Grafana启动时候指定的工作路径：&lt;code&gt;--homepath&lt;/code&gt;。&lt;/p&gt;

&lt;h2 id=&quot;23-配置文件&quot;&gt;2.3 配置文件&lt;/h2&gt;
&lt;p&gt;官方文档：&lt;a href=&quot;https://grafana.com/docs/installation/configuration/&quot; target=&quot;_blank&quot;&gt;Configuration&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;配置文件中的选项基本上和运行时和监控关系不大，都是一些设置向的内容，配置过一次之后就不需要变动了。一些可能需要关心的选项：&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ini&quot; data-lang=&quot;ini&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Protocol (http, https, socket)&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;protocol&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;http&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# The ip address to bind to, empty will bind to all interfaces&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;http_addr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;127.0.0.1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# The http port to use&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;http_port&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;3000&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# The public facing domain name used to access grafana from a browser&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;domain&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;localhost&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Either &amp;quot;mysql&amp;quot;, &amp;quot;postgres&amp;quot; or &amp;quot;sqlite3&amp;quot;, it&amp;#39;s your choice&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;sqlite3&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Server reporting, sends usage counters to stats.grafana.org every 24 hours.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# No ip addresses are being tracked, only simple counters to track&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# running instances, dashboard and error counts. It is very helpful to us.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Change this option to false to disable reporting.&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;reporting_enabled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Set to false to disable all checks to https://grafana.com&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# for new versions (grafana itself and plugins), check is used&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# in some UI views to notify that grafana or plugin update exists&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# This option does not cause any auto updates, nor send any information&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# only a GET request to https://grafana.com to get latest versions&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;check_for_updates&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# disable user signup / registration&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;allow_sign_up&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Allow non admin users to create organizations&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;allow_org_create&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;false&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;24-启动&quot;&gt;2.4 启动&lt;/h2&gt;
&lt;p&gt;启动这块就有个让人很头疼的事情，真的让我始料未及。&lt;/p&gt;

&lt;p&gt;让Grafana作为一个WEB应用启动，需要用到的是&lt;code&gt;bin/grafana-server&lt;/code&gt;这个命令，其帮助可以在&lt;a href=&quot;#ID_APP_GRAFANA_HELP&quot;&gt;资料&lt;/a&gt;查看。&lt;/p&gt;

&lt;p&gt;有用的参数只有两个：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code&gt;--config&lt;/code&gt;：指定配置文件位置&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;--homepath&lt;/code&gt;：指定Grafana工作的根目录&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果是将下载下来的Grafana直接解包运行，不更改路径的话，那就不需要任何启动参数，直接运行即可。但如果需要更改运行根目录的话，就需要使用&lt;code&gt;--homepath&lt;/code&gt;这个选项：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ./bin/grafana-server --homepath &quot;/Users/XXX/.../&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;而我遇到的问题是&lt;code&gt;--config&lt;/code&gt;这个选项，无论我指定任何内容：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;相对于&lt;code&gt;--homepath&lt;/code&gt;的相对文件位置：&lt;code&gt;config/grafana/grafana.ini&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;相对于&lt;code&gt;--homepath&lt;/code&gt;的相对文件夹：&lt;code&gt;config/grafana/&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;绝对文件路径：&lt;code&gt;/Users/XXX/.../config/grafana/grafana.ini&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;绝对文件夹：&lt;code&gt;/Users/XXX/.../config/grafana/&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;它都不能正常工作，只会返回给我错误：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Grafana-server Init Failed: Could not find config defaults, make sure homepath command line parameter is set or working directory is homepath&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;真的让人相当恼火，官方文档里还有这块的解说，但说了根本就和没说一个样：&lt;a href=&quot;https://grafana.com/docs/installation/configuration/#config-file-locations&quot; target=&quot;_blank&quot;&gt;Config file locations&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;最后只能使用：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Default configuration from $WORKING_DIR/conf/defaults.ini&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;也就是在默认的配置文件位置上放上文件：&lt;code&gt;${--homepath}/conf/defaults.ini&lt;/code&gt;，才正常工作起来，哎。&lt;/p&gt;

&lt;h2 id=&quot;25-cli&quot;&gt;2.5 CLI&lt;/h2&gt;
&lt;p&gt;官方文档：&lt;a href=&quot;https://grafana.com/docs/administration/cli/&quot; target=&quot;_blank&quot;&gt;Grafana CLI&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;Grafana还提供了一个命令行工具来辅助admin平时的操作：&lt;code&gt;bin/grafana-cli&lt;/code&gt;，使用可以看：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ./bin/grafana-cli -h
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;26-登录--访问&quot;&gt;2.6 登录 &amp;amp; 访问&lt;/h2&gt;
&lt;p&gt;默认第一次使用的用户名和密码是：&lt;code&gt;admin:admin&lt;/code&gt;，第一次登录进去之后系统就会要求更改admin密码。访问地址在配置文件里是可以更改的，默认为：&lt;code&gt;http://localhost:3000&lt;/code&gt;。&lt;/p&gt;

&lt;h1 id=&quot;3-概念&quot;&gt;3. 概念&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code&gt;DataSource&lt;/code&gt;：数据源，Grafana仅只是一个UI，真正保存数据的是数据源，根据版本不同支持的数据源可能不尽相同，有需要可以查看官方文档：&lt;a href=&quot;https://grafana.com/docs/features/datasources/&quot; target=&quot;_blank&quot;&gt;Data Source Overview&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;用户 &amp;amp; 权限：
    &lt;ul&gt;
      &lt;li&gt;&lt;code&gt;Organization&lt;/code&gt;：组织，用在多个组织部门使用同一个Grafana的情况，可以根据组织的不同区分可访问的面板&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;User&lt;/code&gt;：用户&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;Role&lt;/code&gt;：角色，目前暂时只支持固定的角色：Admin、Editor、Read Only Editor、Viewer，相关：&lt;a href=&quot;https://github.com/grafana/grafana/issues/9877&quot; target=&quot;_blank&quot;&gt;How to create new user roles? #9877&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code&gt;Panel&lt;/code&gt;：面板，Grafana的核心，实际上负责进行图形展示的单元，类型非常多，有需要可以查看官方文档：&lt;a href=&quot;https://grafana.com/docs/features/panels/graph/&quot; target=&quot;_blank&quot;&gt;Graph Panel&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;Row&lt;/code&gt;：行，Dashboard的下级逻辑分隔概念，一个Row里可以放入很多Panel，而且这里需要理解Row并不是物理上的&lt;code&gt;行&lt;/code&gt;（实际上一个Row可以容纳很多行Panel）&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;Dashboard&lt;/code&gt;：仪表盘，由大量Panel组成的集合，一般来说Dashboard是按某个目标进行设计的，比如说：机房的当前状况，某个应用的服务状况等&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;Plugins&lt;/code&gt;：插件，提供更多的额外功能集成，官方商店在：&lt;a href=&quot;https://grafana.com/plugins&quot; target=&quot;_blank&quot;&gt;Plugins&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;Playlist&lt;/code&gt;：举例来说就是某些大公司在门口做的数据滚动播放展示，类似那样的功能，官方文档：&lt;a href=&quot;https://grafana.com/docs/reference/playlist/&quot; target=&quot;_blank&quot;&gt;Playlist&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;Provisioning&lt;/code&gt;：通过配置文件的方式对DataSource及Dashboard进行设置，这是Grafana在使用API进行相关设置之外的另一种方法，且其不要求Grafana首先启动，使用上更为便利&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;Templating&lt;/code&gt;：模板，对某些共性的Panel或Dashboard进行抽象，以便后续进行复用&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Provisioning官方文档：&lt;a href=&quot;https://grafana.com/docs/administration/provisioning/&quot; target=&quot;_blank&quot;&gt;Provisioning Grafana&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;在以前的Grafana版本中，你只能使用API来配置数据源和仪表盘，但是，这需要在开始创建仪表板之前运行服务，并且还需要为HTTP API设置证书。在v5.0中，我们决定通过添加使用配置文件的新的活动Provisioning系统来改善这种体验，这将使GitOps更加自然，因为可以通过可以进行版本控制的文件来定义数据源和仪表盘，我们希望扩展此系统以便稍后添加对用户，组织和警报的支持。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;4-使用简介&quot;&gt;4. 使用简介&lt;/h1&gt;
&lt;h1 id=&quot;41-日常使用&quot;&gt;4.1 日常使用&lt;/h1&gt;
&lt;p&gt;理解了上面的概念之后，日常功能无非就是以下几项：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;创建User&lt;/li&gt;
  &lt;li&gt;创建organization&lt;/li&gt;
  &lt;li&gt;管理User和Organization以及Roles&lt;/li&gt;
  &lt;li&gt;创建Dashboard，需要根据实际应用场景进行规划&lt;/li&gt;
  &lt;li&gt;创建Rows，如果有必要的话&lt;/li&gt;
  &lt;li&gt;在Dashboard上创建Panel&lt;/li&gt;
  &lt;li&gt;将Panel及Dashboard做成Templating复用，如果有必要的话&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;42-数据保存--导出&quot;&gt;4.2 数据保存 &amp;amp; 导出&lt;/h1&gt;
&lt;p&gt;Dashboard在面板上面的工具栏里有&lt;code&gt;Settings&lt;/code&gt;选项，进入之后有一项&lt;code&gt;JSON Model&lt;/code&gt;，这就是当前Dashboard的所有内容了，都做成了JSON文本进行描述。如果你查看过Grafana的数据库的话，你也可以看到Dashboard表只有一列，是用来存储这个数据的，其他任何地方都没有和Dashboard的内容相关的字段。只要复制了这个字段，也就完成了当前Dashboard的备份，当然也可以将这个JSON字符串做成*.json文件进行备份。&lt;/p&gt;

&lt;p&gt;Panel也有类似的功能，在Panel的Title进行点击，会有下拉菜单，然后&lt;code&gt;More &amp;gt; Panel Json&lt;/code&gt;就是了。&lt;/p&gt;

&lt;h1 id=&quot;43-数据源&quot;&gt;4.3 数据源&lt;/h1&gt;
&lt;p&gt;Grafana支持多种数据源，根据不同数据源有不同的一些细微的功能差别以及配置差别，可以查看官方文档：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://grafana.com/docs/features/datasources/prometheus/&quot; target=&quot;_blank&quot;&gt;Using Prometheus in Grafana&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://grafana.com/docs/features/datasources/elasticsearch/&quot; target=&quot;_blank&quot;&gt;Using Elasticsearch in Grafana&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;这里面最有可能会用得到的就是&lt;code&gt;Templating&lt;/code&gt;相关内容，在制作数据模板的时候很有用。&lt;/p&gt;

&lt;p&gt;Grafana和ELK相整合的文章可以看这篇：&lt;a href=&quot;https://elkguide.elasticsearch.cn/elasticsearch/other/grafana.html&quot; target=&quot;_blank&quot;&gt;ELKstack 中文指南 &amp;gt; Grafana&lt;/a&gt;。&lt;/p&gt;

&lt;h1 id=&quot;5-监控指标&quot;&gt;5. 监控指标&lt;/h1&gt;
&lt;p&gt;Grafana做的好就好在其和其他监控系统的集成相当好，Grafana自身的相关监控指标也可以和Prometheus一样暴露出来，使用的格式也是Prometheus的格式，默认是在：&lt;code&gt;http://localhost:3000/metrics&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;我在本文中也留了一份，有必要可以研究下里面的内容：&lt;a href=&quot;#ID_APP_SELF_METRICS&quot;&gt;grafana/metrics&lt;/a&gt;。&lt;/p&gt;

&lt;h1 id=&quot;6-todo&quot;&gt;6. TODO&lt;/h1&gt;
&lt;p&gt;囿于当前使用的深度及项目调研的时间限制，有部分内容做的还不够深入，后续可以考虑补全：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Grafana本身的性能，应该如何衡量&lt;/li&gt;
  &lt;li&gt;Grafana暴露出来的&lt;a href=&quot;#ID_APP_SELF_METRICS&quot;&gt;Metrics&lt;/a&gt;需要仔细研究下&lt;/li&gt;
  &lt;li&gt;所有的图表全部尝试一遍&lt;/li&gt;
  &lt;li&gt;热力图的应用范围及实际使用范例&lt;/li&gt;
  &lt;li&gt;常用 &amp;amp; 有用的插件列表整理&lt;/li&gt;
  &lt;li&gt;ELK整合使用必要性调研，Kibana是否够用，是否有必要使用Grafana作为ELK的前台UI&lt;/li&gt;
  &lt;li&gt;ELK结合使用范例&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;7-写在最后&quot;&gt;7. 写在最后&lt;/h1&gt;
&lt;p&gt;了解Metrics的含义才是最关键的，就像我在写Prometheus Notes说的，很多exporter会吐出巨量的Metrics数据，你都了解这些Metrics代表的意义吗？如果不了解的话，那些数据即便采集进去了，你又会去用了？说到底Prometheus和Grafana不过就是个工具，关键还是在于工程师想要了解什么，对自己的系统的监控需求是什么。&lt;/p&gt;

&lt;p&gt;监控相关工作的第一步是梳理当前系统的组成组件，将每一个都列出来，将它们负责的职责明确清楚，然后将需要监控的Metrics都枚举出来，将这些Metrics需要做成的表类型都想清楚，最后才是使用Prometheus采集数据，使用Grafana制图。&lt;/p&gt;

&lt;p&gt;和写代码一样，优秀的工程师花的更多的时间是在思考和设计上，而不是实际的编写代码。如果不理解这点，那就永远只能是二流。&lt;/p&gt;

&lt;h1 id=&quot;资料&quot;&gt;资料&lt;/h1&gt;
&lt;h2 id=&quot;链接&quot;&gt;链接&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/grafana/grafana/issues/9877&quot; target=&quot;_blank&quot;&gt;How to create new user roles? #9877&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://elkguide.elasticsearch.cn/elasticsearch/other/grafana.html&quot; target=&quot;_blank&quot;&gt;ELKstack 中文指南 &amp;gt; Grafana&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kiswo.com/article/1021&quot; target=&quot;_blank&quot;&gt;Grafana使用&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/grafana/grafana-panels&quot; target=&quot;_blank&quot;&gt;Grafana与数据可视化&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ID_APP_GRAFANA_HELP&quot;&gt;grafana -h&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;$ ./bin/grafana-server -h
Usage of ./bin/grafana-server:
  -config string
    	path to config file
  -homepath string
    	path to grafana install/home path, defaults to working directory
  -packaging string
    	describes the way Grafana was installed (default &quot;unknown&quot;)
  -pidfile string
    	path to pid file
  -profile
    	Turn on pprof profiling
  -profile-port int
    	Define custom port for profiling (default 6060)
  -test.bench regexp
    	run only benchmarks matching regexp
  -test.benchmem
    	print memory allocations for benchmarks
  -test.benchtime d
    	run each benchmark for duration d (default 1s)
  -test.blockprofile file
    	write a goroutine blocking profile to file
  -test.blockprofilerate rate
    	set blocking profile rate (see runtime.SetBlockProfileRate) (default 1)
  -test.count n
    	run tests and benchmarks n times (default 1)
  -test.coverprofile file
    	write a coverage profile to file
  -test.cpu list
    	comma-separated list of cpu counts to run each test with
  -test.cpuprofile file
    	write a cpu profile to file
  -test.failfast
    	do not start new tests after the first test failure
  -test.list regexp
    	list tests, examples, and benchmarks matching regexp then exit
  -test.memprofile file
    	write an allocation profile to file
  -test.memprofilerate rate
    	set memory allocation profiling rate (see runtime.MemProfileRate)
  -test.mutexprofile string
    	write a mutex contention profile to the named file after execution
  -test.mutexprofilefraction int
    	if &amp;gt;= 0, calls runtime.SetMutexProfileFraction() (default 1)
  -test.outputdir dir
    	write profiles to dir
  -test.parallel n
    	run at most n tests in parallel (default 8)
  -test.run regexp
    	run only tests and examples matching regexp
  -test.short
    	run smaller test suite to save time
  -test.testlogfile file
    	write test action log to file (for use only by cmd/go)
  -test.timeout d
    	panic test binary after duration d (default 0, timeout disabled)
  -test.trace file
    	write an execution trace to file
  -test.v
    	verbose: print additional output
  -v	prints current version and exits
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;ID_APP_SELF_METRICS&quot;&gt;grafana/metrics&lt;/h2&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# HELP grafana_alerting_active_alerts amount of active alerts&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_alerting_active_alerts gauge&lt;/span&gt;
grafana_alerting_active_alerts &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_alerting_execution_time_milliseconds summary of alert exeuction duration&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_alerting_execution_time_milliseconds summary&lt;/span&gt;
grafana_alerting_execution_time_milliseconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
grafana_alerting_execution_time_milliseconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
grafana_alerting_execution_time_milliseconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
grafana_alerting_execution_time_milliseconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
grafana_alerting_execution_time_milliseconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_api_admin_user_created_total api admin user created counter&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_api_admin_user_created_total counter&lt;/span&gt;
grafana_api_admin_user_created_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_api_dashboard_get_milliseconds summary for dashboard get duration&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_api_dashboard_get_milliseconds summary&lt;/span&gt;
grafana_api_dashboard_get_milliseconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
grafana_api_dashboard_get_milliseconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
grafana_api_dashboard_get_milliseconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
grafana_api_dashboard_get_milliseconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
grafana_api_dashboard_get_milliseconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_api_dashboard_save_milliseconds summary for dashboard save duration&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_api_dashboard_save_milliseconds summary&lt;/span&gt;
grafana_api_dashboard_save_milliseconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
grafana_api_dashboard_save_milliseconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
grafana_api_dashboard_save_milliseconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
grafana_api_dashboard_save_milliseconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
grafana_api_dashboard_save_milliseconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_api_dashboard_search_milliseconds summary for dashboard search duration&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_api_dashboard_search_milliseconds summary&lt;/span&gt;
grafana_api_dashboard_search_milliseconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
grafana_api_dashboard_search_milliseconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
grafana_api_dashboard_search_milliseconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
grafana_api_dashboard_search_milliseconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
grafana_api_dashboard_search_milliseconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_api_dashboard_snapshot_create_total dashboard snapshots created&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_api_dashboard_snapshot_create_total counter&lt;/span&gt;
grafana_api_dashboard_snapshot_create_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_api_dashboard_snapshot_external_total external dashboard snapshots created&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_api_dashboard_snapshot_external_total counter&lt;/span&gt;
grafana_api_dashboard_snapshot_external_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_api_dashboard_snapshot_get_total loaded dashboards&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_api_dashboard_snapshot_get_total counter&lt;/span&gt;
grafana_api_dashboard_snapshot_get_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_api_dataproxy_request_all_milliseconds summary for dataproxy request duration&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_api_dataproxy_request_all_milliseconds summary&lt;/span&gt;
grafana_api_dataproxy_request_all_milliseconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
grafana_api_dataproxy_request_all_milliseconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
grafana_api_dataproxy_request_all_milliseconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
grafana_api_dataproxy_request_all_milliseconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
grafana_api_dataproxy_request_all_milliseconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_api_login_oauth_total api login oauth counter&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_api_login_oauth_total counter&lt;/span&gt;
grafana_api_login_oauth_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_api_login_post_total api login post counter&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_api_login_post_total counter&lt;/span&gt;
grafana_api_login_post_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_api_models_dashboard_insert_total dashboards inserted &lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_api_models_dashboard_insert_total counter&lt;/span&gt;
grafana_api_models_dashboard_insert_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_api_org_create_total api org created counter&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_api_org_create_total counter&lt;/span&gt;
grafana_api_org_create_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_api_response_status_total api http response status&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_api_response_status_total counter&lt;/span&gt;
grafana_api_response_status_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;200&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
grafana_api_response_status_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;404&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
grafana_api_response_status_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
grafana_api_response_status_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;unknown&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_api_user_signup_completed_total amount of users who completed the signup flow&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_api_user_signup_completed_total counter&lt;/span&gt;
grafana_api_user_signup_completed_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_api_user_signup_invite_total amount of users who have been invited&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_api_user_signup_invite_total counter&lt;/span&gt;
grafana_api_user_signup_invite_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_api_user_signup_started_total amount of users who started the signup flow&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_api_user_signup_started_total counter&lt;/span&gt;
grafana_api_user_signup_started_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_aws_cloudwatch_get_metric_data_total counter for getting metric data time series from aws&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_aws_cloudwatch_get_metric_data_total counter&lt;/span&gt;
grafana_aws_cloudwatch_get_metric_data_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_aws_cloudwatch_get_metric_statistics_total counter for getting metric statistics from aws&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_aws_cloudwatch_get_metric_statistics_total counter&lt;/span&gt;
grafana_aws_cloudwatch_get_metric_statistics_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_aws_cloudwatch_list_metrics_total counter for getting list of metrics from aws&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_aws_cloudwatch_list_metrics_total counter&lt;/span&gt;
grafana_aws_cloudwatch_list_metrics_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_build_info A metric with a constant &amp;#39;1&amp;#39; value labeled by version, revision, branch, and goversion from which Grafana was built.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_build_info gauge&lt;/span&gt;
grafana_build_info&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;branch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;HEAD&amp;quot;&lt;/span&gt;,edition&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;oss&amp;quot;&lt;/span&gt;,goversion&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;go1.11.5&amp;quot;&lt;/span&gt;,revision&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;de8f6ac&amp;quot;&lt;/span&gt;,version&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;6.1.2&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_db_datasource_query_by_id_total counter for getting datasource by id&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_db_datasource_query_by_id_total counter&lt;/span&gt;
grafana_db_datasource_query_by_id_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_info Information about the Grafana. This metric is deprecated. please use `grafana_build_info`&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_info gauge&lt;/span&gt;
grafana_info&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;6.1.2&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_instance_start_total counter for started instances&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_instance_start_total counter&lt;/span&gt;
grafana_instance_start_total &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_page_response_status_total page http response status&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_page_response_status_total counter&lt;/span&gt;
grafana_page_response_status_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;200&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
grafana_page_response_status_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;404&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
grafana_page_response_status_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
grafana_page_response_status_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;unknown&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_proxy_response_status_total proxy http response status&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_proxy_response_status_total counter&lt;/span&gt;
grafana_proxy_response_status_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;200&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
grafana_proxy_response_status_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;404&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
grafana_proxy_response_status_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
grafana_proxy_response_status_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;unknown&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_stat_active_users number of active users&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_stat_active_users gauge&lt;/span&gt;
grafana_stat_active_users &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_stat_total_orgs total amount of orgs&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_stat_total_orgs gauge&lt;/span&gt;
grafana_stat_total_orgs &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_stat_total_playlists total amount of playlists&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_stat_total_playlists gauge&lt;/span&gt;
grafana_stat_total_playlists &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_stat_total_users total amount of users&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_stat_total_users gauge&lt;/span&gt;
grafana_stat_total_users &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP grafana_stat_totals_dashboard total amount of dashboards&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE grafana_stat_totals_dashboard gauge&lt;/span&gt;
grafana_stat_totals_dashboard &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;blockquote&gt;
  &lt;p&gt;EOF&lt;/p&gt;
&lt;/blockquote&gt;
</description>
				<pubDate>Thu, 11 Apr 2019 10:01:22 +0800</pubDate>
				<link>https://xenojoshua.com/2019/04/grafana-note/</link>
				<guid isPermaLink="true">https://xenojoshua.com/2019/04/grafana-note/</guid>
			</item>
		
			<item>
				<title>Prometheus Notes</title>
				<description>&lt;h4&gt;Table of Contents&lt;/h4&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1-前言&quot; id=&quot;markdown-toc-1-前言&quot;&gt;1. 前言&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-竞品比较&quot; id=&quot;markdown-toc-2-竞品比较&quot;&gt;2. 竞品比较&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#21-comparison-to-alternatives-小结&quot; id=&quot;markdown-toc-21-comparison-to-alternatives-小结&quot;&gt;2.1 COMPARISON TO ALTERNATIVES 小结&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#22-优势&quot; id=&quot;markdown-toc-22-优势&quot;&gt;2.2 优势&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-基础--日常使用&quot; id=&quot;markdown-toc-3-基础--日常使用&quot;&gt;3. 基础 &amp;amp; 日常使用&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#31-资源--安装&quot; id=&quot;markdown-toc-31-资源--安装&quot;&gt;3.1 资源 &amp;amp; 安装&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#32-概念&quot; id=&quot;markdown-toc-32-概念&quot;&gt;3.2 概念&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#33-metrics-type&quot; id=&quot;markdown-toc-33-metrics-type&quot;&gt;3.3 Metrics Type&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#34-exporter&quot; id=&quot;markdown-toc-34-exporter&quot;&gt;3.4 Exporter&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#341-exporter-过滤&quot; id=&quot;markdown-toc-341-exporter-过滤&quot;&gt;3.4.1 Exporter 过滤&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#342-metric_relabel_configs-过滤&quot; id=&quot;markdown-toc-342-metric_relabel_configs-过滤&quot;&gt;3.4.2 metric_relabel_configs 过滤&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#35-配置文件&quot; id=&quot;markdown-toc-35-配置文件&quot;&gt;3.5 配置文件&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#36-promql&quot; id=&quot;markdown-toc-36-promql&quot;&gt;3.6 PromQL&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#37-告警&quot; id=&quot;markdown-toc-37-告警&quot;&gt;3.7 告警&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#38-graph&quot; id=&quot;markdown-toc-38-graph&quot;&gt;3.8 Graph&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#381-console-template&quot; id=&quot;markdown-toc-381-console-template&quot;&gt;3.8.1 Console Template&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#382-grafana&quot; id=&quot;markdown-toc-382-grafana&quot;&gt;3.8.2 Grafana&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#39-存储&quot; id=&quot;markdown-toc-39-存储&quot;&gt;3.9 存储&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#391-本地存储&quot; id=&quot;markdown-toc-391-本地存储&quot;&gt;3.9.1 本地存储&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#392-远程存储&quot; id=&quot;markdown-toc-392-远程存储&quot;&gt;3.9.2 远程存储&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#310-重复的metrics-name&quot; id=&quot;markdown-toc-310-重复的metrics-name&quot;&gt;3.10 重复的Metrics name&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4-架构设计&quot; id=&quot;markdown-toc-4-架构设计&quot;&gt;4. 架构设计&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#41-架构图&quot; id=&quot;markdown-toc-41-架构图&quot;&gt;4.1 架构图&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#42-集群化&quot; id=&quot;markdown-toc-42-集群化&quot;&gt;4.2 集群化&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#43-联邦集群-federation&quot; id=&quot;markdown-toc-43-联邦集群-federation&quot;&gt;4.3 联邦集群 federation&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#44-高可用&quot; id=&quot;markdown-toc-44-高可用&quot;&gt;4.4 高可用&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5-prometheus监控指标&quot; id=&quot;markdown-toc-5-prometheus监控指标&quot;&gt;5. Prometheus监控指标&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#6-范例&quot; id=&quot;markdown-toc-6-范例&quot;&gt;6. 范例&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#7-todo&quot; id=&quot;markdown-toc-7-todo&quot;&gt;7. TODO&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#资料&quot; id=&quot;markdown-toc-资料&quot;&gt;资料&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#链接&quot; id=&quot;markdown-toc-链接&quot;&gt;链接&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ID_APP_SELF_METRICS&quot; id=&quot;markdown-toc-ID_APP_SELF_METRICS&quot;&gt;prometheus/metrics&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ID_APP_PROMETHEUS_HELP&quot; id=&quot;markdown-toc-ID_APP_PROMETHEUS_HELP&quot;&gt;prometheus -h&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ID_APP_CTA&quot; id=&quot;markdown-toc-ID_APP_CTA&quot;&gt;COMPARISON TO ALTERNATIVES&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#prometheus-vs-graphite&quot; id=&quot;markdown-toc-prometheus-vs-graphite&quot;&gt;Prometheus vs. Graphite&lt;/a&gt;            &lt;ul&gt;
              &lt;li&gt;&lt;a href=&quot;#scope&quot; id=&quot;markdown-toc-scope&quot;&gt;Scope&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#data-model&quot; id=&quot;markdown-toc-data-model&quot;&gt;Data model&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#storage&quot; id=&quot;markdown-toc-storage&quot;&gt;Storage&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#summary&quot; id=&quot;markdown-toc-summary&quot;&gt;Summary&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#prometheus-vs-influxdb&quot; id=&quot;markdown-toc-prometheus-vs-influxdb&quot;&gt;Prometheus vs. InfluxDB&lt;/a&gt;            &lt;ul&gt;
              &lt;li&gt;&lt;a href=&quot;#scope-1&quot; id=&quot;markdown-toc-scope-1&quot;&gt;Scope&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#data-model--storage&quot; id=&quot;markdown-toc-data-model--storage&quot;&gt;Data model / storage&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#architecture&quot; id=&quot;markdown-toc-architecture&quot;&gt;Architecture&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#summary-1&quot; id=&quot;markdown-toc-summary-1&quot;&gt;Summary&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#prometheus-vs-opentsdb&quot; id=&quot;markdown-toc-prometheus-vs-opentsdb&quot;&gt;Prometheus vs. OpenTSDB&lt;/a&gt;            &lt;ul&gt;
              &lt;li&gt;&lt;a href=&quot;#scope-2&quot; id=&quot;markdown-toc-scope-2&quot;&gt;Scope&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#data-model-1&quot; id=&quot;markdown-toc-data-model-1&quot;&gt;Data model&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#storage-1&quot; id=&quot;markdown-toc-storage-1&quot;&gt;Storage&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#summary-2&quot; id=&quot;markdown-toc-summary-2&quot;&gt;Summary&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#prometheus-vs-nagios&quot; id=&quot;markdown-toc-prometheus-vs-nagios&quot;&gt;Prometheus vs. Nagios&lt;/a&gt;            &lt;ul&gt;
              &lt;li&gt;&lt;a href=&quot;#scope-3&quot; id=&quot;markdown-toc-scope-3&quot;&gt;Scope&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#data-model-2&quot; id=&quot;markdown-toc-data-model-2&quot;&gt;Data model&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#storage-2&quot; id=&quot;markdown-toc-storage-2&quot;&gt;Storage&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#architecture-1&quot; id=&quot;markdown-toc-architecture-1&quot;&gt;Architecture&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#summary-3&quot; id=&quot;markdown-toc-summary-3&quot;&gt;Summary&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#prometheus-vs-sensu&quot; id=&quot;markdown-toc-prometheus-vs-sensu&quot;&gt;Prometheus vs. Sensu&lt;/a&gt;            &lt;ul&gt;
              &lt;li&gt;&lt;a href=&quot;#scope-4&quot; id=&quot;markdown-toc-scope-4&quot;&gt;Scope&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#data-model-3&quot; id=&quot;markdown-toc-data-model-3&quot;&gt;Data model&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#storage-3&quot; id=&quot;markdown-toc-storage-3&quot;&gt;Storage&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#architecture-2&quot; id=&quot;markdown-toc-architecture-2&quot;&gt;Architecture&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#summary-4&quot; id=&quot;markdown-toc-summary-4&quot;&gt;Summary&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;1-前言&quot;&gt;1. 前言&lt;/h1&gt;
&lt;p&gt;对于分布式系统来说，监控是非常重要的，少了精密的监控应用程序的状况就无法得知了，也很难查找问题。而在云原生的年代，监控系统（或者说分布式系统的所有组件）最好是使用Go语言编写的，这样才能做到最小的镜像、最高的性能、最佳的CPU利用。所以监控系统的选择其实也不是那么的难，直接用CNCF的Prometheus就可以了。虽然说是这么说，实际使用之前对于工具的理解还是有必要的，因此有了此文。&lt;/p&gt;

&lt;p&gt;此外，这里简单讲下，官方的文档，怎么说呢，只能说是一个”手册”。假设，Prometheus的作者（这里假设是一个自然人）花了100个小时编完了Prometheus的代码，那么这个官方文档估计也就只花了30分钟，内容完全就是一堆细节的堆砌，完全没动脑子。所以，如果你是一名初学者，建议直接忽略官方的文档，去找第三方的书来看。这份文档只对需要跟着最新版本走的工程师，或者需要查找下一些Prometheus知识点或使用方法的工程师有点用。&lt;/p&gt;

&lt;p&gt;这里推荐一本中文的gitbook：&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/&quot; target=&quot;_blank&quot;&gt;prometheus-book&lt;/a&gt;。从起始的安装和使用例子，到后面的集群管理以及exporter等等，都做了非常详实的解说，最可贵的是，作者写的内容是基于思考、组织之后的，明确地是为了读者服务的，而不像官方文档，仅仅只是一堆细节的罗列。&lt;/p&gt;

&lt;p&gt;版本申明，后续的所有行文内容都基于Prometheus&lt;code&gt;v2.8.1&lt;/code&gt;：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ prometheus --version
prometheus, version 2.8.1 (branch: HEAD, revision: 4d60eb36dcbed725fcac5b27018574118f12fffb)
  build user:       root@bfdd6a22a683
  build date:       20190328-18:09:49
  go version:       go1.11.6
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&quot;2-竞品比较&quot;&gt;2. 竞品比较&lt;/h1&gt;
&lt;p&gt;作为一个领域的后来者，最聪明的做法就是在自己的手册里与各位竞品前辈大佬进行一下横向比较，甚至附上性能的benchmark，这样才能取得新使用者的信任。而Prometheus在官方文档的最开始，就有一篇：&lt;a href=&quot;https://prometheus.io/docs/introduction/comparison/&quot; target=&quot;_blank&quot;&gt;COMPARISON TO ALTERNATIVES&lt;/a&gt;（这其实也是了解监控相关软件功能的很好的普及文）。&lt;/p&gt;

&lt;p&gt;文中主要提到了5个工具进行横向比较：&lt;code&gt;Graphite&lt;/code&gt;、&lt;code&gt;InfluxDB&lt;/code&gt;、&lt;code&gt;OpenTSDB&lt;/code&gt;、&lt;code&gt;Nagios&lt;/code&gt;、&lt;code&gt;Sensu&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;翻译放在最后的&lt;a href=&quot;#ID_APP_CTA&quot;&gt;资料&lt;/a&gt;部分（继续喷下官方文档，这篇比较也写得不怎么样，看完没get到优势或者劣势的点）。&lt;/p&gt;

&lt;h2 id=&quot;21-comparison-to-alternatives-小结&quot;&gt;2.1 COMPARISON TO ALTERNATIVES 小结&lt;/h2&gt;
&lt;p&gt;简单过一下的话：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Nagios和Sensu基本上可以直接忽略&lt;/li&gt;
  &lt;li&gt;OpenTSDB是基于Hadoop/HBase的，扩展性应该说不错，但过重，且对于Ops的要求比较高&lt;/li&gt;
  &lt;li&gt;InfluxDB相当不错，但其杀手锏功能类似于集群化之类的，都是付费版本才有的，且其维护基于单一的商业公司（言下之意，如果你不用商业版，其实InfluxDB也没什么特别大的优势，而且还是单一公司维护有风险）&lt;/li&gt;
  &lt;li&gt;Graphite和Prometheus比起来，Prometheus的功能更丰富更强大&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;22-优势&quot;&gt;2.2 优势&lt;/h2&gt;
&lt;p&gt;在docker hub的&lt;a href=&quot;https://hub.docker.com/r/prom/prometheus/&quot; target=&quot;_blank&quot;&gt;介绍页面&lt;/a&gt;上，有一段优势描述：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code&gt;多维度&lt;/code&gt;的数据模型（由metric名字定义的时序，以及一系列键值对的维度）&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;灵活的查询语言&lt;/code&gt;来利用这些维度&lt;/li&gt;
  &lt;li&gt;无依赖的分布式存储；&lt;code&gt;自治的单个服务器节点&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;时序数据采集使用基于HTTP的&lt;code&gt;拉模式&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;利用中间网关来支持&lt;code&gt;推送&lt;/code&gt;时序数据&lt;/li&gt;
  &lt;li&gt;监控目标的发现是通过&lt;code&gt;服务发现&lt;/code&gt;或&lt;code&gt;静态配置&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;多种模式的&lt;code&gt;图像及报表支持&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;支持分层和水平的&lt;code&gt;联邦集群（federation）&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;3-基础--日常使用&quot;&gt;3. 基础 &amp;amp; 日常使用&lt;/h1&gt;
&lt;h2 id=&quot;31-资源--安装&quot;&gt;3.1 资源 &amp;amp; 安装&lt;/h2&gt;
&lt;p&gt;Prometheus的官方网站：&lt;a href=&quot;https://prometheus.io/&quot; target=&quot;_blank&quot;&gt;https://prometheus.io/&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;安装一般可以直接根据平台下载，Go应用程序的好处就显示出来了，只要一个可执行文件就能运行：&lt;a href=&quot;https://prometheus.io/download/&quot; target=&quot;_blank&quot;&gt;https://prometheus.io/download/&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;一般来说入门只需要：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;prometheus：本体&lt;/li&gt;
  &lt;li&gt;node_exporter：最基本的exporter&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;使用help放在附录：&lt;a href=&quot;#ID_APP_PROMETHEUS_HELP&quot;&gt;prometheus -h&lt;/a&gt;。&lt;/p&gt;

&lt;h2 id=&quot;32-概念&quot;&gt;3.2 概念&lt;/h2&gt;
&lt;p&gt;Prometheus的基本概念不算多，但如果不了解的话，看后面的东西会有障碍，因此建议先把概念了解清楚。&lt;/p&gt;

&lt;p&gt;这里先给出一个简单的exporter吐出来的数据范例：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# HELP node_cpu Seconds the cpus spent in each mode.
# TYPE node_cpu counter
node_cpu{cpu=&quot;cpu0&quot;,mode=&quot;idle&quot;} 362812.7890625
# HELP node_load1 1m load average.
# TYPE node_load1 gauge
node_load1 3.0703125
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Prometheus是一个&lt;code&gt;时序数据库&lt;/code&gt;，何谓时序数据库，所有保存在Prometheus里的数据都是按时间戳和值的序列顺序存放的，这被称为&lt;code&gt;Vector（向量）&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;Prometheus的数据采集，每一个&lt;code&gt;Metrics（指标）&lt;/code&gt;都会有两行以&lt;code&gt;#&lt;/code&gt;字符起始的文本作为开头：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;其中第一行是&lt;code&gt;注释&lt;/code&gt;：&lt;code&gt;# HELP ...&lt;/code&gt;，主要用来说明该指标是什么&lt;/li&gt;
  &lt;li&gt;第二行是&lt;code&gt;定义&lt;/code&gt;：&lt;code&gt;# TYPE ...&lt;/code&gt;，对当前的指标进行&lt;code&gt;命名&lt;/code&gt;：&lt;code&gt;node_load1&lt;/code&gt;，及&lt;code&gt;类型&lt;/code&gt;的定义：&lt;code&gt;gauge&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;除了名字之外，每一个指标都可以有一系列的&lt;code&gt;Labels（标签）&lt;/code&gt;来描述更细致的维度：&lt;code&gt;{cpu=&quot;cpu0&quot;,mode=&quot;idle&quot;}&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;每一次数据采集获得到的即一个&lt;code&gt;Sample（样本）&lt;/code&gt;，其由三部分组成：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Metrics（指标）：包含了Metrics name以及Labels&lt;/li&gt;
  &lt;li&gt;Timestamp（时间戳）：当前采样的时间，精度到毫秒&lt;/li&gt;
  &lt;li&gt;Value（采样值）：其类型为float64浮点数&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;e.g&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;--------------- metric ---------------------&amp;gt;&amp;lt;-timestamp -&amp;gt;&amp;lt;-value-&amp;gt;
http_request_total{status=&quot;200&quot;, method=&quot;GET&quot;}@1434417560938 =&amp;gt; 94355
http_request_total{status=&quot;200&quot;, method=&quot;GET&quot;}@1434417561287 =&amp;gt; 94334

http_request_total{status=&quot;404&quot;, method=&quot;GET&quot;}@1434417560938 =&amp;gt; 38473
http_request_total{status=&quot;404&quot;, method=&quot;GET&quot;}@1434417561287 =&amp;gt; 38544

http_request_total{status=&quot;200&quot;, method=&quot;POST&quot;}@1434417560938 =&amp;gt; 4748
http_request_total{status=&quot;200&quot;, method=&quot;POST&quot;}@1434417561287 =&amp;gt; 4785
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;在Prometheus内部有一个预定义的变量&lt;code&gt;__name__&lt;/code&gt;用来表达&lt;code&gt;Metrics name&lt;/code&gt;（这里注意，该值只是名字，不含Label），在后续编程及配置文件处理的时候会用得到：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;api_http_requests_total{method=&quot;POST&quot;, handler=&quot;/messages&quot;}
=
{__name__=&quot;api_http_requests_total&quot;，method=&quot;POST&quot;, handler=&quot;/messages&quot;}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Prometheus服务器启动的时候，可以设置从很多端点（endpoint）进行数据采集。比如说：我们有一个主机，主机上运行了3个Go程序，一个Java程序，以及一个数据库。那么我们采集的时候就需要运行6个工作：主机采集、Go采集*3、Java采集、数据库采集。这6个工作，每一个我们都称之为：&lt;code&gt;Job&lt;/code&gt;。Job可以自由设置采集的IP、端口以及endpoint，因此其自由度相当高，可以采集同服务器的不同服务，也可以采集不同的服务器上的数据，最终都汇总到一台Prometheus服务器上。&lt;/p&gt;

&lt;p&gt;资料：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://prometheus.io/docs/prometheus/latest/querying/basics/#instant-vector-selectors&quot; target=&quot;_blank&quot;&gt;Instant vector selectors&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.robustperception.io/whats-in-a-__name__&quot; target=&quot;_blank&quot;&gt;What’s in a __name__?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;33-metrics-type&quot;&gt;3.3 Metrics Type&lt;/h2&gt;
&lt;p&gt;Prometheus定义了4中不同的Metrics Type（指标类型）：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/parti-prometheus-ji-chu/promql/prometheus-metrics-types#counter-zhi-zeng-bu-jian-de-ji-shu-qi&quot; target=&quot;_blank&quot;&gt;Counter（计数器）&lt;/a&gt;：只增不减的计数器&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/parti-prometheus-ji-chu/promql/prometheus-metrics-types#gauge-ke-zeng-ke-jian-de-yi-biao-pan&quot; target=&quot;_blank&quot;&gt;Gauge（仪表盘）&lt;/a&gt;：可增可减的仪表盘&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/parti-prometheus-ji-chu/promql/prometheus-metrics-types#shi-yong-histogram-he-summary-fen-xi-shu-ju-fen-bu-qing-kuang&quot; target=&quot;_blank&quot;&gt;Histogram（直方图）&lt;/a&gt;：数据分布情况&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/parti-prometheus-ji-chu/promql/prometheus-metrics-types#shi-yong-histogram-he-summary-fen-xi-shu-ju-fen-bu-qing-kuang&quot; target=&quot;_blank&quot;&gt;Summary（摘要）&lt;/a&gt;：数据分布情况&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;最后的两个有点类似，区别在于Histogram描述的是绝对值，而Summary描述的是百分比。&lt;/p&gt;

&lt;p&gt;e.g&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# HELP prometheus_tsdb_compaction_chunk_range Final time range of chunks on their first compaction
# TYPE prometheus_tsdb_compaction_chunk_range histogram
prometheus_tsdb_compaction_chunk_range_bucket{le=&quot;100&quot;} 0
prometheus_tsdb_compaction_chunk_range_bucket{le=&quot;400&quot;} 0
prometheus_tsdb_compaction_chunk_range_bucket{le=&quot;1600&quot;} 0
prometheus_tsdb_compaction_chunk_range_bucket{le=&quot;6400&quot;} 0
prometheus_tsdb_compaction_chunk_range_bucket{le=&quot;25600&quot;} 0
prometheus_tsdb_compaction_chunk_range_bucket{le=&quot;102400&quot;} 0
prometheus_tsdb_compaction_chunk_range_bucket{le=&quot;409600&quot;} 0
prometheus_tsdb_compaction_chunk_range_bucket{le=&quot;1.6384e+06&quot;} 260
prometheus_tsdb_compaction_chunk_range_bucket{le=&quot;6.5536e+06&quot;} 780
prometheus_tsdb_compaction_chunk_range_bucket{le=&quot;2.62144e+07&quot;} 780
prometheus_tsdb_compaction_chunk_range_bucket{le=&quot;+Inf&quot;} 780
prometheus_tsdb_compaction_chunk_range_sum 1.1540798e+09
prometheus_tsdb_compaction_chunk_range_count 780
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;# HELP prometheus_tsdb_wal_fsync_duration_seconds Duration of WAL fsync.
# TYPE prometheus_tsdb_wal_fsync_duration_seconds summary
prometheus_tsdb_wal_fsync_duration_seconds{quantile=&quot;0.5&quot;} 0.012352463
prometheus_tsdb_wal_fsync_duration_seconds{quantile=&quot;0.9&quot;} 0.014458005
prometheus_tsdb_wal_fsync_duration_seconds{quantile=&quot;0.99&quot;} 0.017316173
prometheus_tsdb_wal_fsync_duration_seconds_sum 2.888716127000002
prometheus_tsdb_wal_fsync_duration_seconds_count 216
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;34-exporter&quot;&gt;3.4 Exporter&lt;/h2&gt;
&lt;p&gt;官方文档：&lt;a href=&quot;https://prometheus.io/docs/instrumenting/exporters/&quot; target=&quot;_blank&quot;&gt;EXPORTERS AND INTEGRATIONS&lt;/a&gt;。以及中文：&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/exporter&quot; target=&quot;_blank&quot;&gt;第4章 Exporter详解&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;Prometheus的设计是Prometheus服务器进行&lt;code&gt;拉&lt;/code&gt;操作，而受监控对象则将时序数据吐出来给服务器。为了不影响受监控的应用程序本身，一般是用Sidecar设计，在应用程序之外进行数据的吐出，也就是&lt;code&gt;Exporter&lt;/code&gt;这个角色（应用程序）。当然，如果需要直接在当前应用程序中进行数据暴露也是可以的，直接使用一些类库引入到应用程序中即可。&lt;/p&gt;

&lt;p&gt;Prometheus流行起来之后，主流的应用程序一般都有对应的Exporter，直接下载使用即可。这里要提一下node_exporter，因为它是针对主机进行监控，因此不建议运行在容器里。容器本身就是和主机进行隔离的，运行在容器之中的话node_exporter无法很好工作。&lt;/p&gt;

&lt;p&gt;这里需要注意的点是：&lt;code&gt;信息的过滤&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;Prometheus的特性是，只要你在配置文件中将某个Exporter设定为Prometheus定时抓取的对象，Prometheus就会将这个Exporter吐出的&lt;code&gt;所有数据&lt;/code&gt;都定期采集起来，保存到时序数据库中。而实际情况则是，某个Exporter吐出来的数据中有很大一部分其实是我们并不关心的。&lt;/p&gt;

&lt;p&gt;举个例子，Go语言的Exporter会吐出GC、内存、CPU、Goroutine等等一系列数据，而我们可能只关心GC、内存，其他都不关心。这个时候如果还是按默认的行为来进行采集的话，时序数据库里就会有很多无意义（我们不关心）的数据。为了防止这样的情况发生，有两种做法：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在启动Exporter的时候将部分指标过滤掉，直接不吐出来&lt;/li&gt;
  &lt;li&gt;在Prometheus配置文件中针对采集的Job进行&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;341-exporter-过滤&quot;&gt;3.4.1 Exporter 过滤&lt;/h3&gt;
&lt;p&gt;举个例子，node_exporter在MAC上启动，默认会吐出如下数据：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;INFO[0000] Enabled collectors:                           source=&quot;node_exporter.go:90&quot;
INFO[0000]  - boottime                                   source=&quot;node_exporter.go:97&quot;
INFO[0000]  - cpu                                        source=&quot;node_exporter.go:97&quot;
INFO[0000]  - diskstats                                  source=&quot;node_exporter.go:97&quot;
INFO[0000]  - filesystem                                 source=&quot;node_exporter.go:97&quot;
INFO[0000]  - loadavg                                    source=&quot;node_exporter.go:97&quot;
INFO[0000]  - meminfo                                    source=&quot;node_exporter.go:97&quot;
INFO[0000]  - netdev                                     source=&quot;node_exporter.go:97&quot;
INFO[0000]  - textfile                                   source=&quot;node_exporter.go:97&quot;
INFO[0000]  - time                                       source=&quot;node_exporter.go:97&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;我们就可以在启动的时候附加：&lt;code&gt;--no-collector.time&lt;/code&gt;option（time可置换成其他的），让其不再吐出，当然也可以添加option（–collector.xxx）吐出某些我们需要但默认不开启的数据。不同的Exporter设置可能会有些微不同，建议使用的时候仔细查看其手册。&lt;/p&gt;

&lt;p&gt;这样的设计模式其实是有问题的，在使用的时候需要大量设置，用起来过于复杂：&lt;a href=&quot;https://github.com/prometheus/node_exporter/issues/735&quot; target=&quot;_blank&quot;&gt;Question: Disable all collectors?&lt;/a&gt;。&lt;/p&gt;

&lt;h3 id=&quot;342-metric_relabel_configs-过滤&quot;&gt;3.4.2 metric_relabel_configs 过滤&lt;/h3&gt;
&lt;p&gt;官方文档在：&lt;a href=&quot;https://prometheus.io/docs/prometheus/latest/configuration/configuration/#metric_relabel_configs&quot; target=&quot;_blank&quot;&gt;&amp;lt;metric_relabel_configs&amp;gt;&lt;/a&gt;。讲解可以看一篇英语的：&lt;a href=&quot;https://medium.com/quiq-blog/prometheus-relabeling-tricks-6ae62c56cbda&quot; target=&quot;_blank&quot;&gt;Prometheus relabeling tricks&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;这个配置项的作用主要有几点：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在入库之前去掉不需要的指标&lt;/li&gt;
  &lt;li&gt;将入库的某些指标重新命名（这点很有用，后面会说到）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;该配置项的效果会在数据入库之前生效，因此非常有用，可以显著减少入库的数据量，减少磁盘的容量占用，加快数据查询。&lt;/p&gt;

&lt;p&gt;e.g&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;metric_relabel_configs&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;p p-Indicator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;source_labels&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p p-Indicator&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;__name__&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;regex&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;(\&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;go_gc_duration_seconds|\&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;...|\&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;node_memory_wired_bytes\&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;)&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;drop&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;上面的例子里使用了字符串换行，这里需要注意的是需要换行的字符串一定要使用双引号&lt;code&gt;&quot;&lt;/code&gt;，双引号里的字符是不会被转译的，换行符&lt;code&gt;\&lt;/code&gt;也就不会失效了。不换行的话，写法是：&lt;/p&gt;

&lt;p&gt;&lt;code&gt;regex: &quot;(filtered1|filtered2|filtered3)&quot;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;总而言之，在数据过滤方面，Prometheus做的真的不好，无论是在Exporter端做过滤还是在配置文件里做过滤，都需要写不少过滤条目，蛮麻烦的。&lt;/p&gt;

&lt;h2 id=&quot;35-配置文件&quot;&gt;3.5 配置文件&lt;/h2&gt;
&lt;p&gt;官方文档：&lt;a href=&quot;https://prometheus.io/docs/prometheus/latest/configuration/configuration/&quot; target=&quot;_blank&quot;&gt;CONFIGURATION&lt;/a&gt;。有一篇中文的译文不错，但不是太全：&lt;a href=&quot;https://www.jianshu.com/p/bedd169676b6&quot; target=&quot;_blank&quot;&gt;Prometheus的安装和配置&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;配置文件这块，官方的文档细节肯定是最全的，有很多不常用的选项之类的，估计一般也只有官方文档里才找得到。不过官方文档就像我一开始说的，讲解得实在是，光有细节没有脑子。因此建议看一些范例，对配置文件有一个大概的了解之后再去官方文档里查细节会比较好。&lt;/p&gt;

&lt;p&gt;主要的配置大项有：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;抓取配置 &lt;a href=&quot;https://prometheus.io/docs/prometheus/latest/configuration/configuration/#scrape_config&quot; target=&quot;_blank&quot;&gt;scrape_configs&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;规则配置 &lt;a href=&quot;https://prometheus.io/docs/prometheus/latest/configuration/recording_rules/&quot; target=&quot;_blank&quot;&gt;recording_rules&lt;/a&gt; &lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/parti-prometheus-ji-chu/alert/prometheus-recoding-rules#ding-yi-recoding-rules&quot; target=&quot;_blank&quot;&gt;中文&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;告警配置 &lt;a href=&quot;https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/&quot; target=&quot;_blank&quot;&gt;alerting_rules&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;36-promql&quot;&gt;3.6 PromQL&lt;/h2&gt;
&lt;p&gt;Prometheus这块的设计应该说还算是比较可读的，可以看下中文book里的内容：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/parti-prometheus-ji-chu/promql/prometheus-query-language&quot; target=&quot;_blank&quot;&gt;初识PromQL&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/parti-prometheus-ji-chu/promql/prometheus-promql-operators-v2&quot; target=&quot;_blank&quot;&gt;PromQL操作符&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/parti-prometheus-ji-chu/promql/prometheus-aggr-ops&quot; target=&quot;_blank&quot;&gt;PromQL聚合操作&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/parti-prometheus-ji-chu/promql/prometheus-promql-functions&quot; target=&quot;_blank&quot;&gt;PromQL内置函数&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;37-告警&quot;&gt;3.7 告警&lt;/h2&gt;
&lt;p&gt;Prometheus里的告警功能做得非常强大，按规则的组合可以轻松对告警进行规则定义、分组，并可以使用Altermanager进行对应的告警行为。当然使用上就有点复杂，需要花点时间梳理下。具体的细节可以查看：&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/parti-prometheus-ji-chu/alert&quot; target=&quot;_blank&quot;&gt;第3章 Prometheus告警处理&lt;/a&gt;。&lt;/p&gt;

&lt;h2 id=&quot;38-graph&quot;&gt;3.8 Graph&lt;/h2&gt;
&lt;h3 id=&quot;381-console-template&quot;&gt;3.8.1 Console Template&lt;/h3&gt;
&lt;p&gt;Prometheus的服务器有提供集成的图像化解决方案，这被称为：&lt;code&gt;Console Template&lt;/code&gt;，其实无非就是一个模板引擎然后向其中填充数据。上手还是需要花点时间稍微摸索下，具体的细节可以查看：&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/grafana/use-console-template&quot; target=&quot;_blank&quot;&gt;使用Console Template&lt;/a&gt;。&lt;/p&gt;

&lt;h3 id=&quot;382-grafana&quot;&gt;3.8.2 Grafana&lt;/h3&gt;
&lt;p&gt;现在比较主流的图像化做法是数据采集和存储由Prometheus来，然后图像化输出则由Grafana来处理。这块后面会在Grafana的专题里进行讲解。&lt;/p&gt;

&lt;h2 id=&quot;39-存储&quot;&gt;3.9 存储&lt;/h2&gt;
&lt;h3 id=&quot;391-本地存储&quot;&gt;3.9.1 本地存储&lt;/h3&gt;
&lt;p&gt;Prometheus的时序数据库默认是存储在本地磁盘的，以2小时时间长度为分段，将数据存储到一个Block（块）中。具体的细节可以查看：&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/readmd/prometheus-local-storage&quot; target=&quot;_blank&quot;&gt;本地存储&lt;/a&gt;。&lt;/p&gt;

&lt;h3 id=&quot;392-远程存储&quot;&gt;3.9.2 远程存储&lt;/h3&gt;
&lt;p&gt;本地存储在可用性及高效性上有先天优势，但也有很多问题，最主要的就是本地磁盘的容量问题，本地磁盘容量不足就不能够保存长期数据。因此Prometheus也提供了远程写和远程读的设置，允许开发者将时序数据库的数据存储在远程介质中。具体的细节可以查看：&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/readmd/prometheus-remote-storage&quot; target=&quot;_blank&quot;&gt;远程存储&lt;/a&gt;。&lt;/p&gt;

&lt;h2 id=&quot;310-重复的metrics-name&quot;&gt;3.10 重复的Metrics name&lt;/h2&gt;
&lt;p&gt;有一个比较常见的麻烦问题是：在同一个Prometheus服务器节点上，可能会采集到大量重名的指标。&lt;/p&gt;

&lt;p&gt;这里举个例子来说：同一台Linux服务器节点上，有3个Go应用程序在运行，而我们需要把这三个应用程序的Go相关指标都监控起来。这时候你会发现采集上来的3份Go指标数据，其指标名都是重复的。这很正常，因为采集的指标都是同样的东西，只不过吐出数据的应用程序不同而已。&lt;/p&gt;

&lt;p&gt;这时候我们就需要用到之前提到过的：&lt;code&gt;metric_relabel_configs&lt;/code&gt;。每个Go应用程序肯定是在Prometheus服务器上设置成单独的&lt;code&gt;Jobs&lt;/code&gt;，而这些不同的Jobs就需要设置各自的metric_relabel_configs，将获取到的同名指标重命名成和应用程序相关的指标，当然指标名的意义需要保持不变。&lt;/p&gt;

&lt;p&gt;e.g&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;job_name&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;cadvisor&lt;/span&gt;
  &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;metric_relabel_configs&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;p p-Indicator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;source_labels&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p p-Indicator&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;regex&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;.*/(.*)&amp;#39;&lt;/span&gt;
    &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;replacement&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;$1&amp;#39;&lt;/span&gt;
    &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;target_label&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;id&lt;/span&gt;
  &lt;span class=&quot;p p-Indicator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;source_labels&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p p-Indicator&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;service&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;regex&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;ecs-.*:ecs-([a-z]+-*[a-z]*).*:[0-9]+&amp;#39;&lt;/span&gt;
    &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;replacement&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;$1&amp;#39;&lt;/span&gt;
    &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;target_label&lt;/span&gt;&lt;span class=&quot;p p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;l l-Scalar l-Scalar-Plain&quot;&gt;service&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h1 id=&quot;4-架构设计&quot;&gt;4. 架构设计&lt;/h1&gt;
&lt;h2 id=&quot;41-架构图&quot;&gt;4.1 架构图&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/resources/2019/04/prometheus-note/architecture.png&quot; alt=&quot;Architecture&quot; target=&quot;_blank&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Prometheus的设计理念就是保证单节点的性能、功能完整性以及单节点的使用便利性。在这个理念下，Prometheus的使用是一件很简单的事情，稍微做点配置调整就可以使用了，而且这个节点上的所有数据都是存储在其本身的物理磁盘上的（有选项可以远程存储，这里按下不表），保证了不会有跨物理节点的各种问题。&lt;/p&gt;

&lt;h2 id=&quot;42-集群化&quot;&gt;4.2 集群化&lt;/h2&gt;
&lt;p&gt;Prometheus将单个节点做到极致的设计理念无疑是非常出色的，但万事都没有银弹。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;整体的集群庞大到一定程度之后（全局的监控需求）&lt;/li&gt;
  &lt;li&gt;单个服务的集群扩展到一定程度（单服务的监控需求）&lt;/li&gt;
  &lt;li&gt;跨机房监控需求（单个机房单个Prometheus服务器，但需要有一个跳脱实例机房的节点进行overview）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;在这些情况下，单个节点的Prometheus可能就无法胜任了。这时候必然就需要进行水平扩展或引入分布式集群的概念。&lt;/p&gt;

&lt;h2 id=&quot;43-联邦集群-federation&quot;&gt;4.3 联邦集群 federation&lt;/h2&gt;
&lt;p&gt;联邦集群是官方提供的Prometheus唯一的集群解决方案。这个名词听上去有点玄乎，其实简单来说：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;联邦集群中的Prometheus节点是分层级的&lt;/li&gt;
  &lt;li&gt;下级的Prometheus节点采集应用数据&lt;/li&gt;
  &lt;li&gt;上级的Prometheus节点从下级的Prometheus节点上采集数据&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;有几点需要注意：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;下级Prometheus默认在&lt;code&gt;/federate&lt;/code&gt;endpoint暴露联邦集群的数据采集点，不需要配置&lt;/li&gt;
  &lt;li&gt;上级Prometheus必须在配置文件里指定&lt;code&gt;params:'match[]':- '{__name__=~&quot;node_.*&quot;}'&lt;/code&gt;这样的采集规则才能真正采集到数据，这方面的行为模式和Prometheus的默认模式是不一样的；默认情况下Prometheus会将暴露出来的所有数据都采集起来，但联邦集群的时候如果上级节点不指定采集的过滤参数的话，默认是什么都不采集（可能考虑到量级会有问题），因此必须手动在配置文件里进行指标名（可以组合标签）的过滤&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;说穿了其实所谓的联邦集群也没什么内容，无非就是在启动的Prometheus节点上默认开了个&lt;code&gt;/federate&lt;/code&gt;endpoint，允许其他Prometheus从它这里拉取数据。至于联邦集群怎么组建，能玩出什么花来，Prometheus就不管了，让搭建者自己发挥。&lt;/p&gt;

&lt;h2 id=&quot;44-高可用&quot;&gt;4.4 高可用&lt;/h2&gt;
&lt;p&gt;简单的结论是：Prometheus&lt;code&gt;并不存在高可用&lt;/code&gt;的解决方案。&lt;/p&gt;

&lt;p&gt;官方现在的设计是将单节点的Prometheus做好，并提供联邦集群这个解决方案让用户自己去组建自己的监控拓扑网络。这在规模比较小的时候还算能对付，但在真正规模大起来之后就很容易出错了，维护者必须很清楚联邦集群里每一个节点负责的业务内容是什么，然后各层级节点如何对应汇集数据，这非常考验整个拓扑结构的搭建者的功力，以及维护的流程和工具。&lt;/p&gt;

&lt;p&gt;Prometheus当前的集群设计给我的感觉有点类似于：3.0版本之前的redis的第三方集群解决方案 与 3.0版本之后redis官方提供的集群解决方案 之间的关系。你不能说第三方做的集群解决方案不能用，但和3.0之后官方集群方案提供的高可用相比之下，不得不说就不是一个档次上的了。&lt;/p&gt;

&lt;p&gt;希望今后的Prometheus能在这方面发力。当然可能在组合了K8S之后，联邦集群也够用了，这方面我还没尝试过，就不做判断了。&lt;/p&gt;

&lt;p&gt;这篇可以好好看下：&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/readmd/prometheus-and-high-availability&quot; target=&quot;_blank&quot;&gt;Prometheus高可用&lt;/a&gt;。&lt;/p&gt;

&lt;h1 id=&quot;5-prometheus监控指标&quot;&gt;5. Prometheus监控指标&lt;/h1&gt;
&lt;p&gt;Prometheus对自身的指标也有直接暴露，默认是放在：http://url_of_prometheus_server/metrics。&lt;/p&gt;

&lt;p&gt;附录里我放了一份指标，可以研究下：&lt;a href=&quot;#ID_APP_SELF_METRICS&quot;&gt;prometheus/metrics&lt;/a&gt;。对于Prometheus自身的监控也是必要的。&lt;/p&gt;

&lt;h1 id=&quot;6-范例&quot;&gt;6. 范例&lt;/h1&gt;
&lt;p&gt;实际的可运行范例可以查看：&lt;a href=&quot;https://github.com/agreatfool/dist-system-practice/tree/master/experiment/prometheus/federation&quot; target=&quot;_blank&quot;&gt;dist-system-practice/experiment/prometheus/federation/&lt;/a&gt;。&lt;/p&gt;

&lt;h1 id=&quot;7-todo&quot;&gt;7. TODO&lt;/h1&gt;
&lt;p&gt;囿于当前使用的深度及项目调研的时间限制，有部分内容做的还不够深入，后续可以考虑补全：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Prometheus自身的Metrics深入研究，以便将Prometheus自身也纳入监控&lt;/li&gt;
  &lt;li&gt;Prometheus的Benchmark&lt;/li&gt;
  &lt;li&gt;PromQL深入理解&lt;/li&gt;
  &lt;li&gt;聚合操作：&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/parti-prometheus-ji-chu/promql/prometheus-aggr-ops&quot; target=&quot;_blank&quot;&gt;PromQL聚合操作&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://prometheus.io/docs/prometheus/latest/querying/operators/&quot; target=&quot;_blank&quot;&gt;OPERATORS&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;内置函数：&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/parti-prometheus-ji-chu/promql/prometheus-promql-functions&quot; target=&quot;_blank&quot;&gt;PromQL内置函数&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://prometheus.io/docs/prometheus/latest/querying/functions/&quot; target=&quot;_blank&quot;&gt;FUNCTIONS&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;常用Exporter及其指标含义 及 实际可用的指标公式换算&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;资料&quot;&gt;资料&lt;/h1&gt;
&lt;h2 id=&quot;链接&quot;&gt;链接&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://yunlzheng.gitbook.io/prometheus-book/&quot; target=&quot;_blank&quot;&gt;prometheus-book&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://prometheus.io/docs/prometheus/latest/querying/basics/#instant-vector-selectors&quot; target=&quot;_blank&quot;&gt;Instant vector selectors&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.robustperception.io/whats-in-a-__name__&quot; target=&quot;_blank&quot;&gt;What’s in a __name__?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/prometheus/node_exporter/issues/735&quot; target=&quot;_blank&quot;&gt;Question: Disable all collectors?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/quiq-blog/prometheus-relabeling-tricks-6ae62c56cbda&quot; target=&quot;_blank&quot;&gt;Prometheus relabeling tricks&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.jianshu.com/p/bedd169676b6&quot; target=&quot;_blank&quot;&gt;Prometheus的安装和配置&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.servicemesher.com/blog/prometheus-monitor-k8s-1/&quot; target=&quot;_blank&quot;&gt;Prometheus监控Kubernetes系列1——监控框架&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.servicemesher.com/blog/prometheus-monitor-k8s-2/&quot; target=&quot;_blank&quot;&gt;Prometheus监控Kubernetes系列2——监控部署&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.servicemesher.com/blog/prometheus-monitor-k8s-3/&quot; target=&quot;_blank&quot;&gt;Prometheus监控Kubernetes系列3——业务指标采集&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ID_APP_SELF_METRICS&quot;&gt;prometheus/metrics&lt;/h2&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# HELP net_conntrack_dialer_conn_attempted_total Total number of connections attempted by the given dialer a given name.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE net_conntrack_dialer_conn_attempted_total counter&lt;/span&gt;
net_conntrack_dialer_conn_attempted_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;dialer_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;federate&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 这里的dialer_name其实就是job名字&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP net_conntrack_dialer_conn_closed_total Total number of connections closed which originated from the dialer of a given name.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE net_conntrack_dialer_conn_closed_total counter&lt;/span&gt;
...
&lt;span class=&quot;c1&quot;&gt;# HELP net_conntrack_dialer_conn_established_total Total number of connections successfully established by the given dialer a given name.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE net_conntrack_dialer_conn_established_total counter&lt;/span&gt;
...
&lt;span class=&quot;c1&quot;&gt;# HELP net_conntrack_dialer_conn_failed_total Total number of connections failed to dial by the dialer a given name.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE net_conntrack_dialer_conn_failed_total counter&lt;/span&gt;
... &lt;span class=&quot;c1&quot;&gt;# 这里的label：{dialer_name=&amp;quot;federate&amp;quot;,reason=&amp;quot;refused|resolution|timeout|unknown&amp;quot;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP net_conntrack_listener_conn_accepted_total Total number of connections opened to the listener of a given name.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE net_conntrack_listener_conn_accepted_total counter&lt;/span&gt;
net_conntrack_listener_conn_accepted_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;listener_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;124&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP net_conntrack_listener_conn_closed_total Total number of connections closed that were made to the listener of a given name.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE net_conntrack_listener_conn_closed_total counter&lt;/span&gt;
net_conntrack_listener_conn_closed_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;listener_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;http&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;122&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_api_remote_read_queries The current number of remote read queries being executed or waiting.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_api_remote_read_queries gauge&lt;/span&gt;
prometheus_api_remote_read_queries &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_build_info A metric with a constant &amp;#39;1&amp;#39; value labeled by version, revision, branch, and goversion from which prometheus was built.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_build_info gauge&lt;/span&gt;
prometheus_build_info&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;branch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;HEAD&amp;quot;&lt;/span&gt;,goversion&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;go1.11.6&amp;quot;&lt;/span&gt;,revision&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;4d60eb36dcbed725fcac5b27018574118f12fffb&amp;quot;&lt;/span&gt;,version&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.8.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_config_last_reload_success_timestamp_seconds Timestamp of the last successful configuration reload.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_config_last_reload_success_timestamp_seconds gauge&lt;/span&gt;
prometheus_config_last_reload_success_timestamp_seconds &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.5547790627954009e+09
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_config_last_reload_successful Whether the last configuration reload attempt was successful.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_config_last_reload_successful gauge&lt;/span&gt;
prometheus_config_last_reload_successful &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_engine_queries The current number of queries being executed or waiting.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_engine_queries gauge&lt;/span&gt;
prometheus_engine_queries &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_engine_queries_concurrent_max The max number of concurrent queries.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_engine_queries_concurrent_max gauge&lt;/span&gt;
prometheus_engine_queries_concurrent_max &lt;span class=&quot;m&quot;&gt;20&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_engine_query_duration_seconds Query timings&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_engine_query_duration_seconds summary&lt;/span&gt;
prometheus_engine_query_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;inner_eval&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_engine_query_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;inner_eval&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_engine_query_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;inner_eval&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_engine_query_duration_seconds_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;inner_eval&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;.2003e-05
... prepare_time &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; queue_time &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; result_sort
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_http_request_duration_seconds Histogram of latencies for HTTP requests.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_http_request_duration_seconds histogram&lt;/span&gt;
prometheus_http_request_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_request_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.2&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_request_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.4&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_request_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_request_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;3&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_request_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;8&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_request_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;20&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_request_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;60&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_request_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;120&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_request_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_request_duration_seconds_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;.000778872
prometheus_http_request_duration_seconds_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
... /api/v1/query &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; /graph &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; /static/*filepath &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; /targets
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_http_response_size_bytes Histogram of response size for HTTP requests.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_http_response_size_bytes histogram&lt;/span&gt;
prometheus_http_response_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_http_response_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_response_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_response_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;100000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_response_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1e+06&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_response_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1e+07&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_response_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1e+08&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_response_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1e+09&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_response_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;,le&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_http_response_size_bytes_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;293&lt;/span&gt;
prometheus_http_response_size_bytes_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/api/v1/label/:name/values&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
... /api/v1/query &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; /graph &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; /static/*filepath &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; /targets
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_notifications_alertmanagers_discovered The number of alertmanagers discovered and active.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_notifications_alertmanagers_discovered gauge&lt;/span&gt;
prometheus_notifications_alertmanagers_discovered &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_notifications_dropped_total Total number of alerts dropped due to errors when sending to Alertmanager.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_notifications_dropped_total counter&lt;/span&gt;
prometheus_notifications_dropped_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_notifications_queue_capacity The capacity of the alert notifications queue.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_notifications_queue_capacity gauge&lt;/span&gt;
prometheus_notifications_queue_capacity &lt;span class=&quot;m&quot;&gt;10000&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_notifications_queue_length The number of alert notifications in the queue.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_notifications_queue_length gauge&lt;/span&gt;
prometheus_notifications_queue_length &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_remote_storage_highest_timestamp_in_seconds Highest timestamp that has come into the remote storage via the Appender interface, in seconds since epoch.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_remote_storage_highest_timestamp_in_seconds gauge&lt;/span&gt;
prometheus_remote_storage_highest_timestamp_in_seconds &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.554792751e+09
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_remote_storage_samples_in_total Samples in to remote storage, compare to samples out for queue managers.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_remote_storage_samples_in_total counter&lt;/span&gt;
prometheus_remote_storage_samples_in_total &lt;span class=&quot;m&quot;&gt;123185&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_rule_evaluation_duration_seconds The duration for a rule to execute.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_rule_evaluation_duration_seconds summary&lt;/span&gt;
prometheus_rule_evaluation_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_rule_evaluation_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_rule_evaluation_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_rule_evaluation_duration_seconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_rule_evaluation_duration_seconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_rule_evaluation_failures_total The total number of rule evaluation failures.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_rule_evaluation_failures_total counter&lt;/span&gt;
prometheus_rule_evaluation_failures_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_rule_evaluations_total The total number of rule evaluations.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_rule_evaluations_total counter&lt;/span&gt;
prometheus_rule_evaluations_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_rule_group_duration_seconds The duration of rule group evaluations.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_rule_group_duration_seconds summary&lt;/span&gt;
prometheus_rule_group_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_rule_group_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_rule_group_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_rule_group_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_rule_group_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_rule_group_duration_seconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_rule_group_duration_seconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_rule_group_iterations_missed_total The total number of rule group evaluations missed due to slow rule group evaluation.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_rule_group_iterations_missed_total counter&lt;/span&gt;
prometheus_rule_group_iterations_missed_total &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_rule_group_iterations_total The total number of scheduled rule group evaluations, whether executed or missed.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_rule_group_iterations_total counter&lt;/span&gt;
prometheus_rule_group_iterations_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_azure_refresh_duration_seconds The duration of a Azure-SD refresh in seconds.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_azure_refresh_duration_seconds summary&lt;/span&gt;
prometheus_sd_azure_refresh_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_azure_refresh_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_azure_refresh_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_azure_refresh_duration_seconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_azure_refresh_duration_seconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_azure_refresh_failures_total Number of Azure-SD refresh failures.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_azure_refresh_failures_total counter&lt;/span&gt;
prometheus_sd_azure_refresh_failures_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_consul_rpc_duration_seconds The duration of a Consul RPC call in seconds.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_consul_rpc_duration_seconds summary&lt;/span&gt;
prometheus_sd_consul_rpc_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;service&amp;quot;&lt;/span&gt;,endpoint&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;catalog&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_consul_rpc_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;service&amp;quot;&lt;/span&gt;,endpoint&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;catalog&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_consul_rpc_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;service&amp;quot;&lt;/span&gt;,endpoint&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;catalog&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_consul_rpc_duration_seconds_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;service&amp;quot;&lt;/span&gt;,endpoint&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;catalog&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_consul_rpc_duration_seconds_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;service&amp;quot;&lt;/span&gt;,endpoint&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;catalog&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_consul_rpc_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;services&amp;quot;&lt;/span&gt;,endpoint&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;catalog&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_consul_rpc_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;services&amp;quot;&lt;/span&gt;,endpoint&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;catalog&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_consul_rpc_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;services&amp;quot;&lt;/span&gt;,endpoint&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;catalog&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_consul_rpc_duration_seconds_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;services&amp;quot;&lt;/span&gt;,endpoint&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;catalog&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_consul_rpc_duration_seconds_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;services&amp;quot;&lt;/span&gt;,endpoint&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;catalog&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_consul_rpc_failures_total The number of Consul RPC call failures.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_consul_rpc_failures_total counter&lt;/span&gt;
prometheus_sd_consul_rpc_failures_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_discovered_targets Current number of discovered targets.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_discovered_targets gauge&lt;/span&gt;
prometheus_sd_discovered_targets&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;federate&amp;quot;&lt;/span&gt;,name&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;scrape&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_dns_lookup_failures_total The number of DNS-SD lookup failures.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_dns_lookup_failures_total counter&lt;/span&gt;
prometheus_sd_dns_lookup_failures_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_dns_lookups_total The number of DNS-SD lookups.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_dns_lookups_total counter&lt;/span&gt;
prometheus_sd_dns_lookups_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_ec2_refresh_duration_seconds The duration of a EC2-SD refresh in seconds.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_ec2_refresh_duration_seconds summary&lt;/span&gt;
prometheus_sd_ec2_refresh_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_ec2_refresh_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_ec2_refresh_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_ec2_refresh_duration_seconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_ec2_refresh_duration_seconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_ec2_refresh_failures_total The number of EC2-SD scrape failures.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_ec2_refresh_failures_total counter&lt;/span&gt;
prometheus_sd_ec2_refresh_failures_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_file_read_errors_total The number of File-SD read errors.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_file_read_errors_total counter&lt;/span&gt;
prometheus_sd_file_read_errors_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_file_scan_duration_seconds The duration of the File-SD scan in seconds.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_file_scan_duration_seconds summary&lt;/span&gt;
prometheus_sd_file_scan_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_file_scan_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_file_scan_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_file_scan_duration_seconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_file_scan_duration_seconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_gce_refresh_duration The duration of a GCE-SD refresh in seconds.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_gce_refresh_duration summary&lt;/span&gt;
prometheus_sd_gce_refresh_duration&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_gce_refresh_duration&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_gce_refresh_duration&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_gce_refresh_duration_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_gce_refresh_duration_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_gce_refresh_failures_total The number of GCE-SD refresh failures.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_gce_refresh_failures_total counter&lt;/span&gt;
prometheus_sd_gce_refresh_failures_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_kubernetes_cache_last_resource_version Last resource version from the Kubernetes API.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_kubernetes_cache_last_resource_version gauge&lt;/span&gt;
prometheus_sd_kubernetes_cache_last_resource_version &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_kubernetes_cache_list_duration_seconds Duration of a Kubernetes API call in seconds.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_kubernetes_cache_list_duration_seconds summary&lt;/span&gt;
prometheus_sd_kubernetes_cache_list_duration_seconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_cache_list_duration_seconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_kubernetes_cache_list_items Count of items in a list from the Kubernetes API.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_kubernetes_cache_list_items summary&lt;/span&gt;
prometheus_sd_kubernetes_cache_list_items_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_cache_list_items_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_kubernetes_cache_list_total Total number of list operations.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_kubernetes_cache_list_total counter&lt;/span&gt;
prometheus_sd_kubernetes_cache_list_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_kubernetes_cache_short_watches_total Total number of short watch operations.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_kubernetes_cache_short_watches_total counter&lt;/span&gt;
prometheus_sd_kubernetes_cache_short_watches_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_kubernetes_cache_watch_duration_seconds Duration of watches on the Kubernetes API.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_kubernetes_cache_watch_duration_seconds summary&lt;/span&gt;
prometheus_sd_kubernetes_cache_watch_duration_seconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_cache_watch_duration_seconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_kubernetes_cache_watch_events Number of items in watches on the Kubernetes API.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_kubernetes_cache_watch_events summary&lt;/span&gt;
prometheus_sd_kubernetes_cache_watch_events_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_cache_watch_events_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_kubernetes_cache_watches_total Total number of watch operations.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_kubernetes_cache_watches_total counter&lt;/span&gt;
prometheus_sd_kubernetes_cache_watches_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_kubernetes_events_total The number of Kubernetes events handled.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_kubernetes_events_total counter&lt;/span&gt;
prometheus_sd_kubernetes_events_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;add&amp;quot;&lt;/span&gt;,role&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;endpoints&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_events_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;add&amp;quot;&lt;/span&gt;,role&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_events_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;add&amp;quot;&lt;/span&gt;,role&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;node&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_events_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;add&amp;quot;&lt;/span&gt;,role&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;pod&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_events_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;add&amp;quot;&lt;/span&gt;,role&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_events_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;delete&amp;quot;&lt;/span&gt;,role&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;endpoints&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_events_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;delete&amp;quot;&lt;/span&gt;,role&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_events_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;delete&amp;quot;&lt;/span&gt;,role&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;node&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_events_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;delete&amp;quot;&lt;/span&gt;,role&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;pod&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_events_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;delete&amp;quot;&lt;/span&gt;,role&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_events_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;update&amp;quot;&lt;/span&gt;,role&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;endpoints&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_events_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;update&amp;quot;&lt;/span&gt;,role&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ingress&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_events_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;update&amp;quot;&lt;/span&gt;,role&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;node&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_events_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;update&amp;quot;&lt;/span&gt;,role&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;pod&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_kubernetes_events_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;update&amp;quot;&lt;/span&gt;,role&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;service&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_marathon_refresh_duration_seconds The duration of a Marathon-SD refresh in seconds.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_marathon_refresh_duration_seconds summary&lt;/span&gt;
prometheus_sd_marathon_refresh_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_marathon_refresh_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_marathon_refresh_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_marathon_refresh_duration_seconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_marathon_refresh_duration_seconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_marathon_refresh_failures_total The number of Marathon-SD refresh failures.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_marathon_refresh_failures_total counter&lt;/span&gt;
prometheus_sd_marathon_refresh_failures_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_openstack_refresh_duration_seconds The duration of an OpenStack-SD refresh in seconds.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_openstack_refresh_duration_seconds summary&lt;/span&gt;
prometheus_sd_openstack_refresh_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_openstack_refresh_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_openstack_refresh_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_openstack_refresh_duration_seconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_openstack_refresh_duration_seconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_openstack_refresh_failures_total The number of OpenStack-SD scrape failures.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_openstack_refresh_failures_total counter&lt;/span&gt;
prometheus_sd_openstack_refresh_failures_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_received_updates_total Total number of update events received from the SD providers.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_received_updates_total counter&lt;/span&gt;
prometheus_sd_received_updates_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;scrape&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_triton_refresh_duration_seconds The duration of a Triton-SD refresh in seconds.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_triton_refresh_duration_seconds summary&lt;/span&gt;
prometheus_sd_triton_refresh_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_triton_refresh_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_triton_refresh_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_sd_triton_refresh_duration_seconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_sd_triton_refresh_duration_seconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_triton_refresh_failures_total The number of Triton-SD scrape failures.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_triton_refresh_failures_total counter&lt;/span&gt;
prometheus_sd_triton_refresh_failures_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_sd_updates_total Total number of update events sent to the SD consumers.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_sd_updates_total counter&lt;/span&gt;
prometheus_sd_updates_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;scrape&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_target_interval_length_seconds Actual intervals between scrapes.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_target_interval_length_seconds summary&lt;/span&gt;
prometheus_target_interval_length_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;15s&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;14&lt;/span&gt;.995180776
prometheus_target_interval_length_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;15s&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;14&lt;/span&gt;.996111038
prometheus_target_interval_length_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;15s&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;15&lt;/span&gt;.000072502
prometheus_target_interval_length_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;15s&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;15&lt;/span&gt;.00274162
prometheus_target_interval_length_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;15s&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;15&lt;/span&gt;.004418161
prometheus_target_interval_length_seconds_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;15s&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;41010&lt;/span&gt;.099564205055
prometheus_target_interval_length_seconds_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;15s&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2734&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_target_scrape_pool_reloads_failed_total Total number of failed scrape loop reloads.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_target_scrape_pool_reloads_failed_total counter&lt;/span&gt;
prometheus_target_scrape_pool_reloads_failed_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_target_scrape_pool_reloads_total Total number of scrape loop reloads.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_target_scrape_pool_reloads_total counter&lt;/span&gt;
prometheus_target_scrape_pool_reloads_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_target_scrape_pool_sync_total Total number of syncs that were executed on a scrape pool.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_target_scrape_pool_sync_total counter&lt;/span&gt;
prometheus_target_scrape_pool_sync_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;scrape_job&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;federate&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_target_scrape_pools_failed_total Total number of scrape pool creations that failed.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_target_scrape_pools_failed_total counter&lt;/span&gt;
prometheus_target_scrape_pools_failed_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_target_scrape_pools_total Total number of scrape pool creation atttempts.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_target_scrape_pools_total counter&lt;/span&gt;
prometheus_target_scrape_pools_total &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_target_scrapes_exceeded_sample_limit_total Total number of scrapes that hit the sample limit and were rejected.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_target_scrapes_exceeded_sample_limit_total counter&lt;/span&gt;
prometheus_target_scrapes_exceeded_sample_limit_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_target_scrapes_sample_duplicate_timestamp_total Total number of samples rejected due to duplicate timestamps but different values&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_target_scrapes_sample_duplicate_timestamp_total counter&lt;/span&gt;
prometheus_target_scrapes_sample_duplicate_timestamp_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_target_scrapes_sample_out_of_bounds_total Total number of samples rejected due to timestamp falling outside of the time bounds&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_target_scrapes_sample_out_of_bounds_total counter&lt;/span&gt;
prometheus_target_scrapes_sample_out_of_bounds_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_target_scrapes_sample_out_of_order_total Total number of samples rejected due to not being out of the expected order&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_target_scrapes_sample_out_of_order_total counter&lt;/span&gt;
prometheus_target_scrapes_sample_out_of_order_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_target_sync_length_seconds Actual interval to sync the scrape pool.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_target_sync_length_seconds summary&lt;/span&gt;
prometheus_target_sync_length_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;scrape_job&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;federate&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_target_sync_length_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;scrape_job&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;federate&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_target_sync_length_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;scrape_job&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;federate&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_target_sync_length_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;scrape_job&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;federate&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_target_sync_length_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;scrape_job&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;federate&amp;quot;&lt;/span&gt;,quantile&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_target_sync_length_seconds_sum&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;scrape_job&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;federate&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;.000219783
prometheus_target_sync_length_seconds_count&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;scrape_job&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;federate&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_template_text_expansion_failures_total The total number of template text expansion failures.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_template_text_expansion_failures_total counter&lt;/span&gt;
prometheus_template_text_expansion_failures_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_template_text_expansions_total The total number of template text expansions.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_template_text_expansions_total counter&lt;/span&gt;
prometheus_template_text_expansions_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_treecache_watcher_goroutines The current number of watcher goroutines.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_treecache_watcher_goroutines gauge&lt;/span&gt;
prometheus_treecache_watcher_goroutines &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_treecache_zookeeper_failures_total The total number of ZooKeeper failures.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_treecache_zookeeper_failures_total counter&lt;/span&gt;
prometheus_treecache_zookeeper_failures_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_blocks_loaded Number of currently loaded data blocks&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_blocks_loaded gauge&lt;/span&gt;
prometheus_tsdb_blocks_loaded &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_checkpoint_creations_failed_total Total number of checkpoint creations that failed.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_checkpoint_creations_failed_total counter&lt;/span&gt;
prometheus_tsdb_checkpoint_creations_failed_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_checkpoint_creations_total Total number of checkpoint creations attempted.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_checkpoint_creations_total counter&lt;/span&gt;
prometheus_tsdb_checkpoint_creations_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_checkpoint_deletions_failed_total Total number of checkpoint deletions that failed.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_checkpoint_deletions_failed_total counter&lt;/span&gt;
prometheus_tsdb_checkpoint_deletions_failed_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_checkpoint_deletions_total Total number of checkpoint deletions attempted.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_checkpoint_deletions_total counter&lt;/span&gt;
prometheus_tsdb_checkpoint_deletions_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_compaction_chunk_range_seconds Final time range of chunks on their first compaction&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_compaction_chunk_range_seconds histogram&lt;/span&gt;
prometheus_tsdb_compaction_chunk_range_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_range_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;400&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_range_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1600&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_range_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;6400&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_range_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;25600&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_range_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;102400&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_range_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;409600&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_range_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1.6384e+06&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_range_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;6.5536e+06&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;147&lt;/span&gt;
prometheus_tsdb_compaction_chunk_range_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.62144e+07&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;147&lt;/span&gt;
prometheus_tsdb_compaction_chunk_range_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;147&lt;/span&gt;
prometheus_tsdb_compaction_chunk_range_seconds_sum &lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;.53475943e+08
prometheus_tsdb_compaction_chunk_range_seconds_count &lt;span class=&quot;m&quot;&gt;147&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_compaction_chunk_samples Final number of samples on their first compaction&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_compaction_chunk_samples histogram&lt;/span&gt;
prometheus_tsdb_compaction_chunk_samples_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;4&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_samples_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;6&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_samples_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_samples_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;13.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_samples_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;20.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_samples_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;30.375&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_samples_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;45.5625&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_samples_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;68.34375&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_samples_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;102.515625&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_samples_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;153.7734375&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;24&lt;/span&gt;
prometheus_tsdb_compaction_chunk_samples_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;230.66015625&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;147&lt;/span&gt;
prometheus_tsdb_compaction_chunk_samples_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;345.990234375&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;147&lt;/span&gt;
prometheus_tsdb_compaction_chunk_samples_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;147&lt;/span&gt;
prometheus_tsdb_compaction_chunk_samples_sum &lt;span class=&quot;m&quot;&gt;30343&lt;/span&gt;
prometheus_tsdb_compaction_chunk_samples_count &lt;span class=&quot;m&quot;&gt;147&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_compaction_chunk_size_bytes Final size of chunks on their first compaction&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_compaction_chunk_size_bytes histogram&lt;/span&gt;
prometheus_tsdb_compaction_chunk_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;32&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;48&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;72&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;108&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;162&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_chunk_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;243&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;
prometheus_tsdb_compaction_chunk_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;364.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;18&lt;/span&gt;
prometheus_tsdb_compaction_chunk_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;546.75&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;18&lt;/span&gt;
prometheus_tsdb_compaction_chunk_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;820.125&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;80&lt;/span&gt;
prometheus_tsdb_compaction_chunk_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1230.1875&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;103&lt;/span&gt;
prometheus_tsdb_compaction_chunk_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1845.28125&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;106&lt;/span&gt;
prometheus_tsdb_compaction_chunk_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2767.921875&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;147&lt;/span&gt;
prometheus_tsdb_compaction_chunk_size_bytes_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;147&lt;/span&gt;
prometheus_tsdb_compaction_chunk_size_bytes_sum &lt;span class=&quot;m&quot;&gt;152382&lt;/span&gt;
prometheus_tsdb_compaction_chunk_size_bytes_count &lt;span class=&quot;m&quot;&gt;147&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_compaction_duration_seconds Duration of compaction runs&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_compaction_duration_seconds histogram&lt;/span&gt;
prometheus_tsdb_compaction_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_compaction_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_tsdb_compaction_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;4&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_tsdb_compaction_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;8&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_tsdb_compaction_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;16&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_tsdb_compaction_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;32&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_tsdb_compaction_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;64&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_tsdb_compaction_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;128&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_tsdb_compaction_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;256&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_tsdb_compaction_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;512&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_tsdb_compaction_duration_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
prometheus_tsdb_compaction_duration_seconds_sum &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.250883887
prometheus_tsdb_compaction_duration_seconds_count &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_compaction_populating_block Set to 1 when a block is currently being written to the disk.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_compaction_populating_block gauge&lt;/span&gt;
prometheus_tsdb_compaction_populating_block &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_compactions_failed_total Total number of compactions that failed for the partition.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_compactions_failed_total counter&lt;/span&gt;
prometheus_tsdb_compactions_failed_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_compactions_total Total number of compactions that were executed for the partition.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_compactions_total counter&lt;/span&gt;
prometheus_tsdb_compactions_total &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_compactions_triggered_total Total number of triggered compactions for the partition.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_compactions_triggered_total counter&lt;/span&gt;
prometheus_tsdb_compactions_triggered_total &lt;span class=&quot;m&quot;&gt;228&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_head_active_appenders Number of currently active appender transactions&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_head_active_appenders gauge&lt;/span&gt;
prometheus_tsdb_head_active_appenders &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_head_chunks Total number of chunks in the head block.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_head_chunks gauge&lt;/span&gt;
prometheus_tsdb_head_chunks &lt;span class=&quot;m&quot;&gt;810&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_head_chunks_created_total Total number of chunks created in the head&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_head_chunks_created_total counter&lt;/span&gt;
prometheus_tsdb_head_chunks_created_total &lt;span class=&quot;m&quot;&gt;957&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_head_chunks_removed_total Total number of chunks removed in the head&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_head_chunks_removed_total counter&lt;/span&gt;
prometheus_tsdb_head_chunks_removed_total &lt;span class=&quot;m&quot;&gt;147&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_head_gc_duration_seconds Runtime of garbage collection in the head block.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_head_gc_duration_seconds summary&lt;/span&gt;
prometheus_tsdb_head_gc_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_tsdb_head_gc_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_tsdb_head_gc_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_tsdb_head_gc_duration_seconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;.001884575
prometheus_tsdb_head_gc_duration_seconds_count &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_head_max_time Maximum timestamp of the head block. The unit is decided by the library consumer.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_head_max_time gauge&lt;/span&gt;
prometheus_tsdb_head_max_time &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.554792751194e+12
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_head_max_time_seconds Maximum timestamp of the head block.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_head_max_time_seconds gauge&lt;/span&gt;
prometheus_tsdb_head_max_time_seconds &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.554792751194e+09
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_head_min_time Minimum time bound of the head block. The unit is decided by the library consumer.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_head_min_time gauge&lt;/span&gt;
prometheus_tsdb_head_min_time &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.5547824e+12
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_head_min_time_seconds Minimum time bound of the head block.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_head_min_time_seconds gauge&lt;/span&gt;
prometheus_tsdb_head_min_time_seconds &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.5547824e+09
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_head_samples_appended_total Total number of appended samples.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_head_samples_appended_total counter&lt;/span&gt;
prometheus_tsdb_head_samples_appended_total &lt;span class=&quot;m&quot;&gt;123185&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_head_series Total number of series in the head block.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_head_series gauge&lt;/span&gt;
prometheus_tsdb_head_series &lt;span class=&quot;m&quot;&gt;135&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_head_series_created_total Total number of series created in the head&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_head_series_created_total counter&lt;/span&gt;
prometheus_tsdb_head_series_created_total &lt;span class=&quot;m&quot;&gt;135&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_head_series_not_found_total Total number of requests for series that were not found.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_head_series_not_found_total counter&lt;/span&gt;
prometheus_tsdb_head_series_not_found_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_head_series_removed_total Total number of series removed in the head&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_head_series_removed_total counter&lt;/span&gt;
prometheus_tsdb_head_series_removed_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_head_truncations_failed_total Total number of head truncations that failed.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_head_truncations_failed_total counter&lt;/span&gt;
prometheus_tsdb_head_truncations_failed_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_head_truncations_total Total number of head truncations attempted.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_head_truncations_total counter&lt;/span&gt;
prometheus_tsdb_head_truncations_total &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_lowest_timestamp Lowest timestamp value stored in the database. The unit is decided by the library consumer.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_lowest_timestamp gauge&lt;/span&gt;
prometheus_tsdb_lowest_timestamp &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.55477867699e+12
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_lowest_timestamp_seconds Lowest timestamp value stored in the database.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_lowest_timestamp_seconds gauge&lt;/span&gt;
prometheus_tsdb_lowest_timestamp_seconds &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.55477867699e+09
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_reloads_failures_total Number of times the database failed to reload block data from disk.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_reloads_failures_total counter&lt;/span&gt;
prometheus_tsdb_reloads_failures_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_reloads_total Number of times the database reloaded block data from disk.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_reloads_total counter&lt;/span&gt;
prometheus_tsdb_reloads_total &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_size_retentions_total The number of times that blocks were deleted because the maximum number of bytes was exceeded.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_size_retentions_total counter&lt;/span&gt;
prometheus_tsdb_size_retentions_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_storage_blocks_bytes The number of bytes that are currently used for local storage by all blocks.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_storage_blocks_bytes gauge&lt;/span&gt;
prometheus_tsdb_storage_blocks_bytes &lt;span class=&quot;m&quot;&gt;165474&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_symbol_table_size_bytes Size of symbol table on disk (in bytes)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_symbol_table_size_bytes gauge&lt;/span&gt;
prometheus_tsdb_symbol_table_size_bytes &lt;span class=&quot;m&quot;&gt;1807&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_time_retentions_total The number of times that blocks were deleted because the maximum time limit was exceeded.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_time_retentions_total counter&lt;/span&gt;
prometheus_tsdb_time_retentions_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_tombstone_cleanup_seconds The time taken to recompact blocks to remove tombstones.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_tombstone_cleanup_seconds histogram&lt;/span&gt;
prometheus_tsdb_tombstone_cleanup_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.005&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_tombstone_cleanup_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.01&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_tombstone_cleanup_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.025&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_tombstone_cleanup_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.05&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_tombstone_cleanup_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_tombstone_cleanup_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.25&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_tombstone_cleanup_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_tombstone_cleanup_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_tombstone_cleanup_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;2.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_tombstone_cleanup_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_tombstone_cleanup_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;10&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_tombstone_cleanup_seconds_bucket&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;le&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;+Inf&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_tombstone_cleanup_seconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_tombstone_cleanup_seconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_vertical_compactions_total Total number of compactions done on overlapping blocks.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_vertical_compactions_total counter&lt;/span&gt;
prometheus_tsdb_vertical_compactions_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_wal_completed_pages_total Total number of completed pages.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_wal_completed_pages_total counter&lt;/span&gt;
prometheus_tsdb_wal_completed_pages_total &lt;span class=&quot;m&quot;&gt;42&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_wal_corruptions_total Total number of WAL corruptions.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_wal_corruptions_total counter&lt;/span&gt;
prometheus_tsdb_wal_corruptions_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_wal_fsync_duration_seconds Duration of WAL fsync.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_wal_fsync_duration_seconds summary&lt;/span&gt;
prometheus_tsdb_wal_fsync_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_tsdb_wal_fsync_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_tsdb_wal_fsync_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_tsdb_wal_fsync_duration_seconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_wal_fsync_duration_seconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_wal_page_flushes_total Total number of page flushes.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_wal_page_flushes_total counter&lt;/span&gt;
prometheus_tsdb_wal_page_flushes_total &lt;span class=&quot;m&quot;&gt;5519&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_wal_truncate_duration_seconds Duration of WAL truncation.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_wal_truncate_duration_seconds summary&lt;/span&gt;
prometheus_tsdb_wal_truncate_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_tsdb_wal_truncate_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.9&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_tsdb_wal_truncate_duration_seconds&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;0.99&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; NaN
prometheus_tsdb_wal_truncate_duration_seconds_sum &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
prometheus_tsdb_wal_truncate_duration_seconds_count &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_wal_truncations_failed_total Total number of WAL truncations that failed.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_wal_truncations_failed_total counter&lt;/span&gt;
prometheus_tsdb_wal_truncations_failed_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP prometheus_tsdb_wal_truncations_total Total number of WAL truncations attempted.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE prometheus_tsdb_wal_truncations_total counter&lt;/span&gt;
prometheus_tsdb_wal_truncations_total &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP promhttp_metric_handler_requests_in_flight Current number of scrapes being served.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE promhttp_metric_handler_requests_in_flight gauge&lt;/span&gt;
promhttp_metric_handler_requests_in_flight &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# HELP promhttp_metric_handler_requests_total Total number of scrapes by HTTP status code.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# TYPE promhttp_metric_handler_requests_total counter&lt;/span&gt;
promhttp_metric_handler_requests_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;200&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
promhttp_metric_handler_requests_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;500&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
promhttp_metric_handler_requests_total&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;503&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;ID_APP_PROMETHEUS_HELP&quot;&gt;prometheus -h&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;prometheus -h
usage: prometheus [&amp;lt;flags&amp;gt;]

The Prometheus monitoring server

Flags:
  -h, --help                     Show context-sensitive help (also try --help-long and --help-man).
      --version                  Show application version.
      --config.file=&quot;prometheus.yml&quot;
                                 Prometheus configuration file path.
      --web.listen-address=&quot;0.0.0.0:9090&quot;
                                 Address to listen on for UI, API, and telemetry.
      --web.read-timeout=5m      Maximum duration before timing out read of the request, and closing idle connections.
      --web.max-connections=512  Maximum number of simultaneous connections.
      --web.external-url=&amp;lt;URL&amp;gt;   The URL under which Prometheus is externally reachable (for example, if Prometheus is served via a reverse proxy). Used for generating
                                 relative and absolute links back to Prometheus itself. If the URL has a path portion, it will be used to prefix all HTTP endpoints
                                 served by Prometheus. If omitted, relevant URL components will be derived automatically.
      --web.route-prefix=&amp;lt;path&amp;gt;  Prefix for the internal routes of web endpoints. Defaults to path of --web.external-url.
      --web.user-assets=&amp;lt;path&amp;gt;   Path to static asset directory, available at /user.
      --web.enable-lifecycle     Enable shutdown and reload via HTTP request.
      --web.enable-admin-api     Enable API endpoints for admin control actions.
      --web.console.templates=&quot;consoles&quot;
                                 Path to the console template directory, available at /consoles.
      --web.console.libraries=&quot;console_libraries&quot;
                                 Path to the console library directory.
      --web.page-title=&quot;Prometheus Time Series Collection and Processing Server&quot;
                                 Document title of Prometheus instance.
      --storage.tsdb.path=&quot;data/&quot;
                                 Base path for metrics storage.
      --storage.tsdb.retention=STORAGE.TSDB.RETENTION
                                 [DEPRECATED] How long to retain samples in storage. This flag has been deprecated, use &quot;storage.tsdb.retention.time&quot; instead
      --storage.tsdb.retention.time=STORAGE.TSDB.RETENTION.TIME
                                 How long to retain samples in storage. When this flag is set it overrides &quot;storage.tsdb.retention&quot;. If neither this flag nor
                                 &quot;storage.tsdb.retention&quot; nor &quot;storage.tsdb.retention.size&quot; is set, the retention time defaults to 15d.
      --storage.tsdb.retention.size=STORAGE.TSDB.RETENTION.SIZE
                                 [EXPERIMENTAL] Maximum number of bytes that can be stored for blocks. Units supported: KB, MB, GB, TB, PB. This flag is experimental and
                                 can be changed in future releases.
      --storage.tsdb.no-lockfile
                                 Do not create lockfile in data directory.
      --storage.tsdb.allow-overlapping-blocks
                                 [EXPERIMENTAL] Allow overlapping blocks which in-turn enables vertical compaction and vertical query merge.
      --storage.remote.flush-deadline=&amp;lt;duration&amp;gt;
                                 How long to wait flushing sample on shutdown or config reload.
      --storage.remote.read-sample-limit=5e7
                                 Maximum overall number of samples to return via the remote read interface, in a single query. 0 means no limit.
      --storage.remote.read-concurrent-limit=10
                                 Maximum number of concurrent remote read calls. 0 means no limit.
      --rules.alert.for-outage-tolerance=1h
                                 Max time to tolerate prometheus outage for restoring 'for' state of alert.
      --rules.alert.for-grace-period=10m
                                 Minimum duration between alert and restored 'for' state. This is maintained only for alerts with configured 'for' time greater than
                                 grace period.
      --rules.alert.resend-delay=1m
                                 Minimum amount of time to wait before resending an alert to Alertmanager.
      --alertmanager.notification-queue-capacity=10000
                                 The capacity of the queue for pending Alertmanager notifications.
      --alertmanager.timeout=10s
                                 Timeout for sending alerts to Alertmanager.
      --query.lookback-delta=5m  The delta difference allowed for retrieving metrics during expression evaluations.
      --query.timeout=2m         Maximum time a query may take before being aborted.
      --query.max-concurrency=20
                                 Maximum number of queries executed concurrently.
      --query.max-samples=50000000
                                 Maximum number of samples a single query can load into memory. Note that queries will fail if they would load more samples than this
                                 into memory, so this also limits the number of samples a query can return.
      --web.cors.origin=&quot;.*&quot;     Regex for CORS origin. It is fully anchored. Eg. 'https?://(domain1|domain2)\.com'
      --log.level=info           Only log messages with the given severity or above. One of: [debug, info, warn, error]
      --log.format=logfmt        Output format of log messages. One of: [logfmt, json]
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;ID_APP_CTA&quot;&gt;COMPARISON TO ALTERNATIVES&lt;/h2&gt;
&lt;h3 id=&quot;prometheus-vs-graphite&quot;&gt;Prometheus vs. Graphite&lt;/h3&gt;
&lt;h4 id=&quot;scope&quot;&gt;Scope&lt;/h4&gt;
&lt;p&gt;Graphite专注于被动的时序数据库加上查询语言加上展示界面功能。任何其他的功能点都由外部组件提供。&lt;/p&gt;

&lt;p&gt;Prometheus是一个全面的监控和趋势追踪系统，包含了基于时序数据库的内建的主动式获取、存储、查询、图像化以及报警功能。在Prometheus中定义了何谓正确的行为（哪些终端应该存在，哪些时序模式意味着错误，等等），并能够主动查找错误。&lt;/p&gt;

&lt;h4 id=&quot;data-model&quot;&gt;Data model&lt;/h4&gt;
&lt;p&gt;Graphite在命名的时序字段内存储数字化的采样值，这和Prometheus类似。然而，Prometheus的metadata模型更丰富：Graphite的metric由&lt;code&gt;.&lt;/code&gt;分隔的组件组成，并隐式编码维度，而Prometheus则显示地将维度编码为键值对，这被称为labels，并附加在metric上。这使得使用labels进行过滤、分组、匹配更为简单。&lt;/p&gt;

&lt;p&gt;更进一步，特别当Graphite与StatsD结合使用的时候，通常会仅存储所有被监控实例的聚合数据，而不是将实例作为一个维度进行保存，并能够深入挖掘单独的有问题实例。&lt;/p&gt;

&lt;p&gt;举例来说，存储响应码为&lt;code&gt;500&lt;/code&gt;、方法为&lt;code&gt;POST&lt;/code&gt;、发送到API服务器上&lt;code&gt;/tracks&lt;/code&gt;端点的HTTP请求数量，一般在Graphite/StatsD会存储为：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;stats.api-server.tracks.post.500 -&amp;gt; 93
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;在Prometheus中，相同的数据则会被编码为（假设有三个API服务器实例）：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;api_server_http_requests_total{method=&quot;POST&quot;,handler=&quot;/tracks&quot;,status=&quot;500&quot;,instance=&quot;&amp;lt;sample1&amp;gt;&quot;} -&amp;gt; 34
api_server_http_requests_total{method=&quot;POST&quot;,handler=&quot;/tracks&quot;,status=&quot;500&quot;,instance=&quot;&amp;lt;sample2&amp;gt;&quot;} -&amp;gt; 28
api_server_http_requests_total{method=&quot;POST&quot;,handler=&quot;/tracks&quot;,status=&quot;500&quot;,instance=&quot;&amp;lt;sample3&amp;gt;&quot;} -&amp;gt; 31
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&quot;storage&quot;&gt;Storage&lt;/h4&gt;
&lt;p&gt;Graphite将时序数据以Whisper格式存储在本地磁盘上，这是一个RDD-style的数据库，要求采样数据以固定间隔存储进入。每个时序数据被存储为单独的文件，而每隔一段固定时长，新的采样数据则会覆盖旧的数据。&lt;/p&gt;

&lt;p&gt;Prometheus也会在本地磁盘按照每个时序数据创建一个本地文件，但允许采样数据按随机的时间间隔进行存储，只要采样行为和规则评估行为发生。由于新的数据会被简单附加在后面，旧的数据会被保存不定时长。Prometheus在处理短存活周期、频繁变动的时序数据时也能很好工作。&lt;/p&gt;

&lt;h4 id=&quot;summary&quot;&gt;Summary&lt;/h4&gt;
&lt;p&gt;Prometheus提供了更丰富的数据模型和查询语言，此外还更容易运行并整合进你的环境。但如果你希望一个集群化的解决方案，并希望能长期保存历史数据，那么Graphite会是一个更好的选择。&lt;/p&gt;

&lt;h3 id=&quot;prometheus-vs-influxdb&quot;&gt;Prometheus vs. InfluxDB&lt;/h3&gt;
&lt;p&gt;InfluxDB是一个开源的时序数据库，并有一个可扩展和可集群化的商业选项。InfluxDB项目是在Prometheus的研发开始之后一年才被release出来的，因此我们之前无法将其作为一个竞品进行考虑。当然，Prometheus和InfluxDB之间还是有显著区别的，并且双方系统都是朝着不同的用例进行设计实施的。&lt;/p&gt;

&lt;h4 id=&quot;scope-1&quot;&gt;Scope&lt;/h4&gt;
&lt;p&gt;为了公平起见，我们还必须将Kapacitor和InfluxDB一起考虑，将这两者组合起来之后，他们解决的是和Prometheus以及Alertmanager相同的问题领域。&lt;/p&gt;

&lt;p&gt;在scope方面，InfluxDB和Graphite对Prometheus的差异是类似的。除此之外，InfluxDB提供了连续查询（continuous queries），和Prometheus的记录规则（recording rules）是等价的。&lt;/p&gt;

&lt;p&gt;Kapacitor的领域则是Prometheus记录规则（recording rules）、报警规则（alerting rules）以及Alertmanager的通知功能的综合。Prometheus提供了相对来说更强大的查询语言与图像化、报警功能。Prometheus Alertmanager额外提供了分组、去重以及静默功能。&lt;/p&gt;

&lt;h4 id=&quot;data-model--storage&quot;&gt;Data model / storage&lt;/h4&gt;
&lt;p&gt;和Prometheus类似，InfluxDB数据模型也使用键值对作为labels，在InfluxDB中这被称为tags。此外，InfluxDB拥有一个二级labels被称为fields，这个fields在使用上更受限。InfluxDB支持纳秒级别的timestamps，以及float64、int64、bool、字符串，这几种数据类型。Prometheus，根据约定，支持float64数据类型以及支持受限的字符串，以及毫秒级别的timestamps。&lt;/p&gt;

&lt;p&gt;INfulxDB使用带有预写日志的多样的 log-structured merge tree 来进行存储。这比Prometheus的每种时间序列仅追加的文件方案更加适合进行事件日志。&lt;/p&gt;

&lt;p&gt;日志和Metrics以及图，描述了事件日志和Metrics记录之间的区别。&lt;/p&gt;

&lt;h4 id=&quot;architecture&quot;&gt;Architecture&lt;/h4&gt;
&lt;p&gt;Prometheus服务器每一个都是单独运行的，与其他服务器分离，并仅依赖它们的本地存储来进行核心功能服务：抓取数据、规则处理，以及警告。开源版本的InfluxDB也是类似的。&lt;/p&gt;

&lt;p&gt;商业版的InfluxDB提供了，按设计所述，一个分布式存储集群，同时有许多集群节点处理存储和查询。&lt;/p&gt;

&lt;p&gt;这意味着商业版的InfluxDB更容易水平扩展，但这也意味着必须一开始就处理一个复杂的分布式存储系统。Prometheus更容易使用，但在某个时间点将必须手动地根据扩展边界来拓展服务器，比如说根据产品、服务、数据中心，或类似的概念。单独的服务器（可以平行运作）也可以给你更好的可靠性以及错误隔离。&lt;/p&gt;

&lt;p&gt;Kapacitor的开源release并没有内建的针对规则、警告、通知的分布式/冗余选项。开源版本可以通过用户手动分割的方式进行扩展，类似于Prometheus。Influx提供了企业版本的Kapacitor，支持高可用/冗余的告警系统。&lt;/p&gt;

&lt;p&gt;Prometheus以及Alertmanager按约定提供了一个完全开源的冗余选项，通过运行冗余的Prometheus复制（replicas），以及使用Alertmanager的高可用模式。&lt;/p&gt;

&lt;h4 id=&quot;summary-1&quot;&gt;Summary&lt;/h4&gt;
&lt;p&gt;Prometheus和InfluxDB系统有诸多相似之处。都具有labels（在InfluxDB里被称为tags）来支持高效的多维度metrics。都使用相同的数据压缩算法。都有扩展集成。都有钩子允许你拓展它们的功能，比如说在统计工具中分析数据或进行自动化处理等。&lt;/p&gt;

&lt;p&gt;InfluxDB做的更好的地方：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;使用InfluxDB系统进行事件日志处理&lt;/li&gt;
  &lt;li&gt;商业版本提供了系统集群化，对长期的数据存储来说也是更好的选择&lt;/li&gt;
  &lt;li&gt;在多个复制之间保持数据的最终一致性&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Prometheus做的更好的地方：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;使用Prometheus系统来进行metrics监控&lt;/li&gt;
  &lt;li&gt;更强大的查询语言、报警以及通知功能&lt;/li&gt;
  &lt;li&gt;高可用以及图像化的运行时长以及报警&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;InfluxDB是由单一商业公司维护的，其模式为：核心功能开源，提供会员功能比如说闭源的集群功能、托管功能以及支持。Prometheus是一个完全开源且独立的项目，由一系列公司及独立个体进行维护，部分其中的成员也提供商业服务及支持。&lt;/p&gt;

&lt;h3 id=&quot;prometheus-vs-opentsdb&quot;&gt;Prometheus vs. OpenTSDB&lt;/h3&gt;
&lt;p&gt;OpenTSDB是一个分布式的时序数据库，基于Hadoop以及HBase。&lt;/p&gt;

&lt;h4 id=&quot;scope-2&quot;&gt;Scope&lt;/h4&gt;
&lt;p&gt;在scope方面，其与Prometheus的差别和Graphite一样。&lt;/p&gt;

&lt;h4 id=&quot;data-model-1&quot;&gt;Data model&lt;/h4&gt;
&lt;p&gt;OpenTSDB的数据模型基本上和Prometheus是一致的：时序由一系列任意的键值对进行识别（OpenTSDB中的tags就是Prometheus中的labels）。针对一个metrics的数据是存储在一起的，限制metrics的基数。也有些微的不同：Prometheus允许label值中存在任意的字符，而OpenTSDB则更具有限制性。OpenTSDB也缺乏一个查询语言，仅允许通过API进行简单的聚合以及数学查询。&lt;/p&gt;

&lt;h4 id=&quot;storage-1&quot;&gt;Storage&lt;/h4&gt;
&lt;p&gt;OpenTSDB的存储是基于Hadoop以及HBase进行实现的。这意味着对OpenTSDB进行水平扩展是容易的，但你必须接受从一开始就运作一个Hadoop/HBase集群的复杂性。&lt;/p&gt;

&lt;p&gt;Prometheus作为初始是非常容易直接开始运作的，但当单节点已经无法承载的时候则需要手动进行进行分片。&lt;/p&gt;

&lt;h4 id=&quot;summary-2&quot;&gt;Summary&lt;/h4&gt;
&lt;p&gt;Prometheus提供了更丰富的查询语言，能处理更高的metrics技术，并胜任一个完整的监控系统。如果你已经有运行中的Hadoop集群，且希望拥有一个长期的数据存储更胜于之前所述的优点，那OpenTSDB就是更好的选择。&lt;/p&gt;

&lt;h3 id=&quot;prometheus-vs-nagios&quot;&gt;Prometheus vs. Nagios&lt;/h3&gt;
&lt;p&gt;Nagios是由NetSaint公司自1990年代开始发起的一个监控系统。&lt;/p&gt;

&lt;h4 id=&quot;scope-3&quot;&gt;Scope&lt;/h4&gt;
&lt;p&gt;Nagios是一个主要基于已经存在的脚本代码进行告警的系统。这些被称为&lt;code&gt;checks&lt;/code&gt;。可以针对单独的告警进行静默处理，然而并没有分组、路由以及去重。&lt;/p&gt;

&lt;p&gt;Nagios拥有大量的插件。举例来说，使用几K的perfData插件就能允许向一个时序数据库（例如Graphite）输出数据或者使用NRPE就可以在远程机器上运行checks。&lt;/p&gt;

&lt;h4 id=&quot;data-model-2&quot;&gt;Data model&lt;/h4&gt;
&lt;p&gt;Nagios是基于主机的。每个主机可以有一个或多个服务，然后每个服务可以运行一个check。&lt;/p&gt;

&lt;p&gt;并不存在labels的概念或一个查询语言。&lt;/p&gt;

&lt;h4 id=&quot;storage-2&quot;&gt;Storage&lt;/h4&gt;
&lt;p&gt;Nagios并没有存储，只有状态check。有插件可以存储数据来进行图形化。&lt;/p&gt;

&lt;h4 id=&quot;architecture-1&quot;&gt;Architecture&lt;/h4&gt;
&lt;p&gt;Nagios服务器是独立运作的。所有的checks都是通过配置文件来进行管理的。&lt;/p&gt;

&lt;h4 id=&quot;summary-3&quot;&gt;Summary&lt;/h4&gt;
&lt;p&gt;Nagios适合小型的静态的系统的基本监控（基本上是黑盒状态）。&lt;/p&gt;

&lt;p&gt;如果你希望拥有可调整的白盒监控，或拥有一个动态的基于云的环境，那么Prometheus是更好的选择。&lt;/p&gt;

&lt;h3 id=&quot;prometheus-vs-sensu&quot;&gt;Prometheus vs. Sensu&lt;/h3&gt;
&lt;p&gt;Sensu是一个可编组的监控管线，可以复用已经存在的Nagios checks。&lt;/p&gt;

&lt;h4 id=&quot;scope-4&quot;&gt;Scope&lt;/h4&gt;
&lt;p&gt;在scope方面其和Nagios是一致的。&lt;/p&gt;

&lt;p&gt;由客户端socket来支持将临时的check结果推送到Sensu。&lt;/p&gt;

&lt;h4 id=&quot;data-model-3&quot;&gt;Data model&lt;/h4&gt;
&lt;p&gt;Sensu的数据模型和Nagios一致。&lt;/p&gt;

&lt;h4 id=&quot;storage-3&quot;&gt;Storage&lt;/h4&gt;
&lt;p&gt;Sensu使用Redis来持久化监控数据，包括了Sensu的客户端注册，check结果，check执行历史，以及当前的事件数据。&lt;/p&gt;

&lt;h4 id=&quot;architecture-2&quot;&gt;Architecture&lt;/h4&gt;
&lt;p&gt;Sensu有一系列的组件。它使用RabbitMQ来传输数据，Redis来处理当前状态，以及一个单独的服务器来处理访问请求。&lt;/p&gt;

&lt;p&gt;一个Sensu部署的所有组件（RabbitMQ、Redis以及Sensu 服务器/API）可以做成集群化来支持高可用、冗余配置。&lt;/p&gt;

&lt;h4 id=&quot;summary-4&quot;&gt;Summary&lt;/h4&gt;
&lt;p&gt;如果你手头有一个存在的Nagios，且你希望扩展它，或者希望利用Sensu的自动化注册功能，那么Sensu是一个好选择。&lt;/p&gt;

&lt;p&gt;如果你希望进行白盒监控，或希望有动态的基于云的环境，那么Prometheus是一个好的选择。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;EOF&lt;/p&gt;
&lt;/blockquote&gt;
</description>
				<pubDate>Tue, 09 Apr 2019 10:01:22 +0800</pubDate>
				<link>https://xenojoshua.com/2019/04/prometheus-note/</link>
				<guid isPermaLink="true">https://xenojoshua.com/2019/04/prometheus-note/</guid>
			</item>
		
			<item>
				<title>也谈996</title>
				<description>&lt;h1 id=&quot;996的本质&quot;&gt;996的本质&lt;/h1&gt;
&lt;p&gt;最近996这个事情因为&lt;a href=&quot;https://github.com/996icu/996.ICU&quot; target=&quot;_blank&quot;&gt;996icu/996.ICU&lt;/a&gt;快速热门起来，作为同行我当年也遭遇过985（当然没996那么惨），因此很清楚这种文化带来的破坏作用。本来其实并没有什么想法要对这个热点做一点感悟笔记的，毕竟我是悲观主义者，对这世道甚至是人类的未来都不看好，理性的、熟悉历史的人差不多都应该是这个状态。读读历史可以看到人类并没有进步，读读阮一峰的&lt;a href=&quot;https://survivor.ruanyifeng.com/&quot; target=&quot;_blank&quot;&gt;未来世界的幸存者&lt;/a&gt;可以看到人类也没有什么未来。所以996这种，再正常不过了，无非就是山崩泥石流里的一颗小石子，对小石子还有什么好评论的呢，是吧？&lt;/p&gt;

&lt;p&gt;但撇开单纯的劳动者权力这种点，放宽到一个个体的人和公司的经营，我倒是有点想法真的觉得应该记录下来。&lt;/p&gt;

&lt;p&gt;我的观点是：其实我还蛮理解这些资本主义老板的，996的本质，在于&lt;code&gt;符合要求的劳动力不足&lt;/code&gt;。&lt;/p&gt;

&lt;h1 id=&quot;何谓人才&quot;&gt;何谓人才&lt;/h1&gt;
&lt;p&gt;往大了说，开过公司的人，往小了说，带过团队的人，都知道，现代的高精尖公司的关键生产要素不再是百年前的地皮、水电煤、能源这样的物质资源，而是&lt;code&gt;人才&lt;/code&gt;，亦即所谓的&lt;code&gt;团队&lt;/code&gt;。煤老板有钱，开个公司，败；投资人有钱，投个公司，烂。为什么？因为没有团队。没有有能力的人，就没有战斗力。市场上招聘，能找到的都是生物学上的人，而不是&lt;code&gt;人才&lt;/code&gt;，也就是我刚才说的&lt;code&gt;符合要求的劳动力&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;在我看来，软件公司里的人才，要的其实不是&lt;code&gt;技术&lt;/code&gt;，而是&lt;code&gt;解决问题的能力&lt;/code&gt;。这里面有什么差别呢？其实差别很大。大部分的软件从业者都觉得，我只要技术，我就能找到好的工作，实际上并非如此。技术和能力的关系，举个例子，就像是一张死的图纸和从图纸生产产品的之间的关系。有图纸（技术完备），但从图纸到产品，当中还有很多难点很多环节需要去攻克，这时候需要做很多事情。零件哪里来？如何做好零件的品控？组装的车床哪里来？运作车床的厂房和能源哪里来？其中甚至可以说是千山万水。&lt;/p&gt;

&lt;p&gt;光有&lt;code&gt;技术&lt;/code&gt;其实一点用都没有。商业公司需要的是产品，而制作产品要很多能力：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;划分目标：如何将产品的最终目标分割成一个个小的可实现的节点&lt;/li&gt;
  &lt;li&gt;做好管理：如何正确估时进行工作规划，让不同的部门小组之间的规划能够协同起来&lt;/li&gt;
  &lt;li&gt;懂得学习：遇到不知道的东西，能不能及时自学攻克难关，并很快应用到生产中&lt;/li&gt;
  &lt;li&gt;善于沟通：产品永远不是由一个人完成，人和人、团队和团队之间如何协调协作&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;此外还有很多很多。&lt;/p&gt;

&lt;p&gt;这也是常说的死读书和能做事两种人的区别。我常和下属说，不要轻视你平时在做的工作，能把CRUD工作做到完善都不是一个普通程序员能轻易做到的。同样做一个简单的业务逻辑模块，有的人可以做好编码规范、写好注释、做好文档、编写测试脚本，做到与之对接的其他协作者感叹其尽善尽美；而有的人就可以做到一团糟糕什么都出错，让后续交接的人一头雾水。&lt;/p&gt;

&lt;p&gt;大部分的程序员并不懂这一点。我以前有一个下属，也算是名校毕业，计算机技术和算法等基础都很扎实，但工作上的很多细节点还是做的不够好，平时code review之类的，我也经常对他进行指导。后来有一天他提出离职，想回家学几个月的人工智能算法，以后争取做这方面的工作。我说，你有这样的志向我觉得很好，祝愿你今后能在人工智能这块学到知识，进入大厂做出成绩。但是，我还是建议你在这个团队继续锻炼下，至少做到你平时的工作让我没有话说。如果你今后在做事的细节方面仍旧和现在一样的话，即便你算法方面多出色，你做出来的东西，仍旧是不能让人放心的。读几个月书，看懂所有算法，就能把事情做好做对了？这还是没理解什么是&lt;code&gt;知识&lt;/code&gt;什么是&lt;code&gt;能力&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;现如今的技术发展实在是太快了，热门的东西一直都在更迭，我刚从业的时候是J2EE，后来PHP热门，再后来，Flash、Cocos2dx、iOS、Android，等等。如果只看&lt;code&gt;技术&lt;/code&gt;，那是不是很多人才都过气了？当然不是。就像使用英语还是法语还是汉语写一本小说，本质在于能不能写好小说，而不在于使用的语言是什么。技术这种东西，只要掌握了软件工程的本质，再辅以强大的自学能力，再新奇的东西也就是一个上手时间的问题，让&lt;code&gt;有能力的人才&lt;/code&gt;来做，最后还是能做得很好。&lt;/p&gt;

&lt;h1 id=&quot;理解996&quot;&gt;理解996&lt;/h1&gt;
&lt;p&gt;所以回过头来我们再来看996，为什么大厂都喜欢996？因为能满足&lt;code&gt;人才&lt;/code&gt;需求的从业者实在是太少，而要从那么多自然人当中筛选出合适的人选培养，并组建&lt;code&gt;团队&lt;/code&gt;，对于一个公司来说成本太高，特别是超大型的软件公司。要提升生产力，老板有两个选择：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;花大量时间大量代价，真正把公司的管理工作做好，把团队压缩下来，把有能力的人留住，做类似&lt;code&gt;精实创业（Lean Startup）&lt;/code&gt;在做的事情&lt;/li&gt;
  &lt;li&gt;野蛮地延长工作时间，即便效率更低，人员流动性更大，生产力总是有提升的&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;你看看，所以大公司只能选后者，其来自有。反过来说，当你成为头部的&lt;code&gt;人才&lt;/code&gt;，想象下，是不是路就宽阔了很多。所以996我从来不担心，当你有能力了，你自然就多了很多选择。&lt;/p&gt;

&lt;h1 id=&quot;你应该做什么&quot;&gt;你应该做什么&lt;/h1&gt;
&lt;p&gt;放下奶头乐，放下名为&lt;code&gt;努力工作&lt;/code&gt;实则&lt;code&gt;放弃思考&lt;/code&gt;的麻醉剂，睁开闭起来的眼睛，一步一个脚印做好自己的能力提升。以我个人的经验，每天做一个小的笔记，把每天做的事情尽量详细记录下来，晚上都过一遍，找找自己有没有能力的提升，每日自省，如果没有，就要找方法挤出时间来做对提升自己有益的事情。每天一回顾，每周一大回顾，按周期给自己制定目标，并慢慢实现之。所谓逆水行舟，人生在世没有轻松的方法能让你活得更好，你每天轻松，那就长期悲剧，每天痛苦，那就长期顺利，就这么简单。&lt;/p&gt;

&lt;p&gt;共勉。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;EOF&lt;/p&gt;
&lt;/blockquote&gt;

</description>
				<pubDate>Fri, 05 Apr 2019 10:01:22 +0800</pubDate>
				<link>https://xenojoshua.com/2019/04/996/</link>
				<guid isPermaLink="true">https://xenojoshua.com/2019/04/996/</guid>
			</item>
		
	</channel>
</rss>
