{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/2019/04/grafana-note","result":{"data":{"markdownRemark":{"id":"f3347b1e-0322-57cb-bbe6-d7d23b3f5ded","html":"<h1 id=\"1-前言\" style=\"position:relative;\"><a href=\"#1-%E5%89%8D%E8%A8%80\" aria-label=\"1 前言 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 前言</h1>\n<p>Grafana常被用作数据展示界面，虽然实际上它还有很多其他相关的功能，但一般都不会使用。在CNCF的项目中，一般Grafana都和Prometheus结合使用。Grafana的最大优势在于其灵活性，它作为数据界面可以利用相当多种类的后台数据源。在我构想中的系统里，ELK也是相当重要的一个组成部分，而Grafana也可以作为ElasticSearch的前台界面，这就相当好用。</p>\n<p>由于其相当于仅只是一个UI，所以本文中架构之类的内容基本上会很少，主要是概念介绍和使用细节方面的。</p>\n<p>下文所有内容都基于版本：<code class=\"language-text\">v6.1.2</code>。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ ./bin/grafana-server -v\nVersion 6.1.2 (commit: de8f6ac, branch: HEAD)</code></pre></div>\n<h1 id=\"2-安装--文件位置--启动\" style=\"position:relative;\"><a href=\"#2-%E5%AE%89%E8%A3%85--%E6%96%87%E4%BB%B6%E4%BD%8D%E7%BD%AE--%E5%90%AF%E5%8A%A8\" aria-label=\"2 安装  文件位置  启动 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 安装 &#x26; 文件位置 &#x26; 启动</h1>\n<h2 id=\"21-安装\" style=\"position:relative;\"><a href=\"#21-%E5%AE%89%E8%A3%85\" aria-label=\"21 安装 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.1 安装</h2>\n<p>官方文档：<a href=\"https://grafana.com/grafana/download\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Download Grafana</a>。</p>\n<p>官方站点做得很好，直接按指示操作即可。MAC安装很方便，使用brew装是最佳选择，另外也可以wget下载tar包，解压即用。Go应用程序就这点，真的太赞了。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">brew update \nbrew install grafana\n\nor\n\nwget https://dl.grafana.com/oss/release/grafana-6.1.2.darwin-amd64.tar.gz \ntar -zxvf grafana-6.1.2.darwin-amd64.tar.gz</code></pre></div>\n<h2 id=\"22-文件位置\" style=\"position:relative;\"><a href=\"#22-%E6%96%87%E4%BB%B6%E4%BD%8D%E7%BD%AE\" aria-label=\"22 文件位置 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.2 文件位置</h2>\n<p>解压出来的Grafana文件夹可以简单看一下，基本上运行的文件位置就是按这个安排的：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">bin                 # grafana-server &amp; grafana-cli\nconf                # 配置文件夹\ndata \\              # 运行时产生的文件，刚解压出来时还不存在\n     | log          # 日志输出\n     | plugins      # 安装的第三方插件等\n     | png\n     | grafana.db   # sqlite3数据库\npublic              # 展示相关的内容，HTML、CSS等\nscripts             # bash脚本，忽略\ntools               # 忽略</code></pre></div>\n<p>上面的<code class=\"language-text\">data</code>文件夹及里面的内容等，都是默认的配置文件的设定，如果没有特殊需求，一般直接这样运行就可以了。</p>\n<p>如果将Grafana的运行文件夹指定在某个位置的话，一些文件夹是可能需要调整（配置文件中）：</p>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token comment\"># Path to where grafana can store temp files, sessions, and the sqlite3 db (if that is used)</span>\n<span class=\"token key attr-name\">data</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">data/grafana</span>\n<span class=\"token comment\"># Directory where grafana can store logs</span>\n<span class=\"token key attr-name\">logs</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">log</span>\n<span class=\"token comment\"># Directory where grafana will automatically scan and look for plugins</span>\n<span class=\"token key attr-name\">plugins</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">data/grafana/plugins</span>\n<span class=\"token comment\"># folder that contains provisioning config files that grafana will apply on startup and while running.</span>\n<span class=\"token key attr-name\">provisioning</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">conf/provisioning</span>\n<span class=\"token comment\"># the path relative working path</span>\n<span class=\"token key attr-name\">static_root_path</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">data/grafana/public</span></code></pre></div>\n<p>上面的所有文件夹实际上都是相对路径，相对于Grafana启动时候指定的工作路径：<code class=\"language-text\">--homepath</code>。</p>\n<h2 id=\"23-配置文件\" style=\"position:relative;\"><a href=\"#23-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\" aria-label=\"23 配置文件 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.3 配置文件</h2>\n<p>官方文档：<a href=\"https://grafana.com/docs/installation/configuration/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Configuration</a>。</p>\n<p>配置文件中的选项基本上和运行时和监控关系不大，都是一些设置向的内容，配置过一次之后就不需要变动了。一些可能需要关心的选项：</p>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token comment\"># Protocol (http, https, socket)</span>\n<span class=\"token key attr-name\">protocol</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">http</span>\n<span class=\"token comment\"># The ip address to bind to, empty will bind to all interfaces</span>\n<span class=\"token key attr-name\">http_addr</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">127.0.0.1</span>\n<span class=\"token comment\"># The http port to use</span>\n<span class=\"token key attr-name\">http_port</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">3000</span>\n<span class=\"token comment\"># The public facing domain name used to access grafana from a browser</span>\n<span class=\"token key attr-name\">domain</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">localhost</span>\n<span class=\"token comment\"># Either \"mysql\", \"postgres\" or \"sqlite3\", it's your choice</span>\n<span class=\"token key attr-name\">type</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">sqlite3</span>\n<span class=\"token comment\"># Server reporting, sends usage counters to stats.grafana.org every 24 hours.</span>\n<span class=\"token comment\"># No ip addresses are being tracked, only simple counters to track</span>\n<span class=\"token comment\"># running instances, dashboard and error counts. It is very helpful to us.</span>\n<span class=\"token comment\"># Change this option to false to disable reporting.</span>\n<span class=\"token key attr-name\">reporting_enabled</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">false</span>\n<span class=\"token comment\"># Set to false to disable all checks to https://grafana.com</span>\n<span class=\"token comment\"># for new versions (grafana itself and plugins), check is used</span>\n<span class=\"token comment\"># in some UI views to notify that grafana or plugin update exists</span>\n<span class=\"token comment\"># This option does not cause any auto updates, nor send any information</span>\n<span class=\"token comment\"># only a GET request to https://grafana.com to get latest versions</span>\n<span class=\"token key attr-name\">check_for_updates</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">false</span>\n<span class=\"token comment\"># disable user signup / registration</span>\n<span class=\"token key attr-name\">allow_sign_up</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">false</span>\n<span class=\"token comment\"># Allow non admin users to create organizations</span>\n<span class=\"token key attr-name\">allow_org_create</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">false</span></code></pre></div>\n<h2 id=\"24-启动\" style=\"position:relative;\"><a href=\"#24-%E5%90%AF%E5%8A%A8\" aria-label=\"24 启动 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.4 启动</h2>\n<p>启动这块就有个让人很头疼的事情，真的让我始料未及。</p>\n<p>让Grafana作为一个WEB应用启动，需要用到的是<code class=\"language-text\">bin/grafana-server</code>这个命令，其帮助可以在<a href=\"#ID_APP_GRAFANA_HELP\">资料</a>查看。</p>\n<p>有用的参数只有两个：</p>\n<ul>\n<li><code class=\"language-text\">--config</code>：指定配置文件位置</li>\n<li><code class=\"language-text\">--homepath</code>：指定Grafana工作的根目录</li>\n</ul>\n<p>如果是将下载下来的Grafana直接解包运行，不更改路径的话，那就不需要任何启动参数，直接运行即可。但如果需要更改运行根目录的话，就需要使用<code class=\"language-text\">--homepath</code>这个选项：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ ./bin/grafana-server --homepath \"/Users/XXX/.../\"</code></pre></div>\n<p>而我遇到的问题是<code class=\"language-text\">--config</code>这个选项，无论我指定任何内容：</p>\n<ul>\n<li>相对于<code class=\"language-text\">--homepath</code>的相对文件位置：<code class=\"language-text\">config/grafana/grafana.ini</code></li>\n<li>相对于<code class=\"language-text\">--homepath</code>的相对文件夹：<code class=\"language-text\">config/grafana/</code></li>\n<li>绝对文件路径：<code class=\"language-text\">/Users/XXX/.../config/grafana/grafana.ini</code></li>\n<li>绝对文件夹：<code class=\"language-text\">/Users/XXX/.../config/grafana/</code></li>\n</ul>\n<p>它都不能正常工作，只会返回给我错误：</p>\n<blockquote>\n<p>Grafana-server Init Failed: Could not find config defaults, make sure homepath command line parameter is set or working directory is homepath</p>\n</blockquote>\n<p>真的让人相当恼火，官方文档里还有这块的解说，但说了根本就和没说一个样：<a href=\"https://grafana.com/docs/installation/configuration/#config-file-locations\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Config file locations</a>。</p>\n<p>最后只能使用：</p>\n<blockquote>\n<p>Default configuration from $WORKING_DIR/conf/defaults.ini</p>\n</blockquote>\n<p>也就是在默认的配置文件位置上放上文件：<code class=\"language-text\">${--homepath}/conf/defaults.ini</code>，才正常工作起来，哎。</p>\n<h2 id=\"25-cli\" style=\"position:relative;\"><a href=\"#25-cli\" aria-label=\"25 cli permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.5 CLI</h2>\n<p>官方文档：<a href=\"https://grafana.com/docs/administration/cli/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Grafana CLI</a>。</p>\n<p>Grafana还提供了一个命令行工具来辅助admin平时的操作：<code class=\"language-text\">bin/grafana-cli</code>，使用可以看：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ ./bin/grafana-cli -h</code></pre></div>\n<h2 id=\"26-登录--访问\" style=\"position:relative;\"><a href=\"#26-%E7%99%BB%E5%BD%95--%E8%AE%BF%E9%97%AE\" aria-label=\"26 登录  访问 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.6 登录 &#x26; 访问</h2>\n<p>默认第一次使用的用户名和密码是：<code class=\"language-text\">admin:admin</code>，第一次登录进去之后系统就会要求更改admin密码。访问地址在配置文件里是可以更改的，默认为：<code class=\"language-text\">http://localhost:3000</code>。</p>\n<h1 id=\"3-概念\" style=\"position:relative;\"><a href=\"#3-%E6%A6%82%E5%BF%B5\" aria-label=\"3 概念 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 概念</h1>\n<ul>\n<li><code class=\"language-text\">DataSource</code>：数据源，Grafana仅只是一个UI，真正保存数据的是数据源，根据版本不同支持的数据源可能不尽相同，有需要可以查看官方文档：<a href=\"https://grafana.com/docs/features/datasources/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Data Source Overview</a></li>\n<li>\n<p>用户 &#x26; 权限：</p>\n<ul>\n<li><code class=\"language-text\">Organization</code>：组织，用在多个组织部门使用同一个Grafana的情况，可以根据组织的不同区分可访问的面板</li>\n<li><code class=\"language-text\">User</code>：用户</li>\n<li><code class=\"language-text\">Role</code>：角色，目前暂时只支持固定的角色：Admin、Editor、Read Only Editor、Viewer，相关：<a href=\"https://github.com/grafana/grafana/issues/9877\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">How to create new user roles? #9877</a></li>\n</ul>\n</li>\n<li><code class=\"language-text\">Panel</code>：面板，Grafana的核心，实际上负责进行图形展示的单元，类型非常多，有需要可以查看官方文档：<a href=\"https://grafana.com/docs/features/panels/graph/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Graph Panel</a></li>\n<li><code class=\"language-text\">Row</code>：行，Dashboard的下级逻辑分隔概念，一个Row里可以放入很多Panel，而且这里需要理解Row并不是物理上的<code class=\"language-text\">行</code>（实际上一个Row可以容纳很多行Panel）</li>\n<li><code class=\"language-text\">Dashboard</code>：仪表盘，由大量Panel组成的集合，一般来说Dashboard是按某个目标进行设计的，比如说：机房的当前状况，某个应用的服务状况等</li>\n<li><code class=\"language-text\">Plugins</code>：插件，提供更多的额外功能集成，官方商店在：<a href=\"https://grafana.com/plugins\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Plugins</a></li>\n<li><code class=\"language-text\">Playlist</code>：举例来说就是某些大公司在门口做的数据滚动播放展示，类似那样的功能，官方文档：<a href=\"https://grafana.com/docs/reference/playlist/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Playlist</a></li>\n<li><code class=\"language-text\">Provisioning</code>：通过配置文件的方式对DataSource及Dashboard进行设置，这是Grafana在使用API进行相关设置之外的另一种方法，且其不要求Grafana首先启动，使用上更为便利</li>\n<li><code class=\"language-text\">Templating</code>：模板，对某些共性的Panel或Dashboard进行抽象，以便后续进行复用</li>\n</ul>\n<p>Provisioning官方文档：<a href=\"https://grafana.com/docs/administration/provisioning/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Provisioning Grafana</a></p>\n<blockquote>\n<p>在以前的Grafana版本中，你只能使用API来配置数据源和仪表盘，但是，这需要在开始创建仪表板之前运行服务，并且还需要为HTTP API设置证书。在v5.0中，我们决定通过添加使用配置文件的新的活动Provisioning系统来改善这种体验，这将使GitOps更加自然，因为可以通过可以进行版本控制的文件来定义数据源和仪表盘，我们希望扩展此系统以便稍后添加对用户，组织和警报的支持。</p>\n</blockquote>\n<h1 id=\"4-使用简介\" style=\"position:relative;\"><a href=\"#4-%E4%BD%BF%E7%94%A8%E7%AE%80%E4%BB%8B\" aria-label=\"4 使用简介 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 使用简介</h1>\n<h1 id=\"41-日常使用\" style=\"position:relative;\"><a href=\"#41-%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8\" aria-label=\"41 日常使用 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.1 日常使用</h1>\n<p>理解了上面的概念之后，日常功能无非就是以下几项：</p>\n<ul>\n<li>创建User</li>\n<li>创建organization</li>\n<li>管理User和Organization以及Roles</li>\n<li>创建Dashboard，需要根据实际应用场景进行规划</li>\n<li>创建Rows，如果有必要的话</li>\n<li>在Dashboard上创建Panel</li>\n<li>将Panel及Dashboard做成Templating复用，如果有必要的话</li>\n</ul>\n<h1 id=\"42-数据保存--导出\" style=\"position:relative;\"><a href=\"#42-%E6%95%B0%E6%8D%AE%E4%BF%9D%E5%AD%98--%E5%AF%BC%E5%87%BA\" aria-label=\"42 数据保存  导出 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.2 数据保存 &#x26; 导出</h1>\n<p>Dashboard在面板上面的工具栏里有<code class=\"language-text\">Settings</code>选项，进入之后有一项<code class=\"language-text\">JSON Model</code>，这就是当前Dashboard的所有内容了，都做成了JSON文本进行描述。如果你查看过Grafana的数据库的话，你也可以看到Dashboard表只有一列，是用来存储这个数据的，其他任何地方都没有和Dashboard的内容相关的字段。只要复制了这个字段，也就完成了当前Dashboard的备份，当然也可以将这个JSON字符串做成*.json文件进行备份。</p>\n<p>Panel也有类似的功能，在Panel的Title进行点击，会有下拉菜单，然后<code class=\"language-text\">More > Panel Json</code>就是了。</p>\n<h1 id=\"43-数据源\" style=\"position:relative;\"><a href=\"#43-%E6%95%B0%E6%8D%AE%E6%BA%90\" aria-label=\"43 数据源 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.3 数据源</h1>\n<p>Grafana支持多种数据源，根据不同数据源有不同的一些细微的功能差别以及配置差别，可以查看官方文档：</p>\n<ul>\n<li><a href=\"https://grafana.com/docs/features/datasources/prometheus/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Using Prometheus in Grafana</a></li>\n<li><a href=\"https://grafana.com/docs/features/datasources/elasticsearch/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Using Elasticsearch in Grafana</a></li>\n</ul>\n<p>这里面最有可能会用得到的就是<code class=\"language-text\">Templating</code>相关内容，在制作数据模板的时候很有用。</p>\n<p>Grafana和ELK相整合的文章可以看这篇：<a href=\"https://elkguide.elasticsearch.cn/elasticsearch/other/grafana.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ELKstack 中文指南 > Grafana</a>。</p>\n<h1 id=\"5-监控指标\" style=\"position:relative;\"><a href=\"#5-%E7%9B%91%E6%8E%A7%E6%8C%87%E6%A0%87\" aria-label=\"5 监控指标 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 监控指标</h1>\n<p>Grafana做的好就好在其和其他监控系统的集成相当好，Grafana自身的相关监控指标也可以和Prometheus一样暴露出来，使用的格式也是Prometheus的格式，默认是在：<code class=\"language-text\">http://localhost:3000/metrics</code>。</p>\n<p>我在本文中也留了一份，有必要可以研究下里面的内容：<a href=\"#ID_APP_SELF_METRICS\">grafana/metrics</a>。</p>\n<h1 id=\"6-docker实践\" style=\"position:relative;\"><a href=\"#6-docker%E5%AE%9E%E8%B7%B5\" aria-label=\"6 docker实践 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. Docker实践</h1>\n<p>接下来的章节会从实践的角度来尝试在容器中安装和使用Grafana。数据源皆为Prometheus，此后不再备注。</p>\n<h2 id=\"61-docker安装\" style=\"position:relative;\"><a href=\"#61-docker%E5%AE%89%E8%A3%85\" aria-label=\"61 docker安装 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.1 Docker安装</h2>\n<p>在容器内安装官方有指导文档：<a href=\"https://grafana.com/docs/installation/docker/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Installing using Docker</a>。主要了解几个重点：</p>\n<ul>\n<li>配置文件中的选项如何使用env参数来进行调整，如何进行配置名字映射：<a href=\"https://grafana.com/docs/installation/docker/#configuration\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Configuration</a></li>\n<li>容器内的一些路径，以及如何调整这些默认路径：<a href=\"https://grafana.com/docs/installation/docker/#default-paths\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Default Paths</a></li>\n<li>如何在启动时就自动安装插件（保证启动完成立即可用）：<a href=\"https://grafana.com/docs/installation/docker/#installing-plugins-for-grafana\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Installing Plugins for Grafana</a></li>\n<li>映射volume，保证数据不会被清除：<a href=\"https://grafana.com/docs/installation/docker/#grafana-container-with-persistent-storage-recommended\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Grafana container with persistent storage </a></li>\n</ul>\n<h2 id=\"62-compose配置\" style=\"position:relative;\"><a href=\"#62-compose%E9%85%8D%E7%BD%AE\" aria-label=\"62 compose配置 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.2 Compose配置</h2>\n<p>可运行的docker compose配置文件范例，参见：<a href=\"https://github.com/agreatfool/dist-system-practice/blob/master/golang/src/dist-system-practice/conf/dev/prometheus-cluster.yaml\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">dist-system-practice/conf/dev/prometheus-cluster.yaml</a>。</p>\n<p>重点是<code class=\"language-text\">environment</code>部分。</p>\n<h2 id=\"63-provisioning\" style=\"position:relative;\"><a href=\"#63-provisioning\" aria-label=\"63 provisioning permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.3 Provisioning</h2>\n<p>既然已经要求Grafana在容器内使用，那么一般也就要做到启动即可用。Grafana在使用之前一般需要几步配置：</p>\n<ul>\n<li>用户、密码管理</li>\n<li>数据源配置</li>\n<li>Dashboard配置</li>\n</ul>\n<p>用户和密码之类的设置，可用通过容器的env配置解决，而数据源和Dashboard就比较麻烦了。Grafana官方提供了一个解决方案，非常好用：<a href=\"https://grafana.com/docs/administration/provisioning/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Provisioning Grafana</a>。简单来说就是提供两个配置文件，一个用来告诉Grafana启动时需要输入的数据源有哪些，另一个告诉Grafana启动时候需要导入的Dashboard有哪些。</p>\n<p>存储provisioning配置文件的指定路径在之前6.1中提到的默认路径中有，一般使用bind mount的方式将本地的provisioning配置文件导入到容器中。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">GF_PATHS_PROVISIONING=/etc/grafana/provisioning</code></pre></div>\n<ul>\n<li>数据源配置文件范例，参见：<a href=\"https://github.com/agreatfool/dist-system-practice/blob/master/golang/src/dist-system-practice/vendors/prometheus/grafana/provisioning/datasources/datasource.yaml\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">dist-system-practice/vendors/prometheus/grafana/provisioning/datasources/datasource.yaml</a></li>\n<li>Dashboard配置文件范例，参见：<a href=\"https://github.com/agreatfool/dist-system-practice/blob/master/golang/src/dist-system-practice/vendors/prometheus/grafana/provisioning/dashboards/providers.yaml\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">dist-system-practice/vendors/prometheus/grafana/provisioning/dashboards/providers.yaml</a>。实际上就是指定一个文件夹，一般也是用bind mount的方式mapping到容器内即可。</li>\n</ul>\n<h2 id=\"64-dashboard\" style=\"position:relative;\"><a href=\"#64-dashboard\" aria-label=\"64 dashboard permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.4 Dashboard</h2>\n<p>Grafana的灵活和强大在Dashboard上体现无疑，关键好用在于不仅仅界面美观、功能强大，而且还可以模板化，可导入导出，做到一次编写后续自动安装、更新。官方还有一个<a href=\"https://grafana.com/dashboards\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Grafana Labs > Dashboards</a>，类似于插件中心的地方，方便社区将做好的Dashboard进行分享。</p>\n<p>一般常用的组件，只要简单搜索下就可以找到可用的Dashboard，大大降低了监控的难度，加速了研发的进程。</p>\n<h3 id=\"641-variables\" style=\"position:relative;\"><a href=\"#641-variables\" aria-label=\"641 variables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.4.1 Variables</h3>\n<p>这里简单说下在进行Dashboard模板化的时候常见的variables设置问题。一般来说，在一个系统中，同角色的设备不会只有单个节点，大多数情况都会有多个节点，比如说web服务器、数据库服务器等。在进行监控的时候，只需要制作一份Grafana Dashboard，将里面的参数变量化，就可以将这个Dashboard模板化，方便后续使用。</p>\n<p>而模板化最关键就是要将节点做成可配置的变量，这里就需要进行Dashboard的variables设置。进入到Dashboard的Setting中，左边列表里就有variables设置的入口，设置方法可以参见下图：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 923px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ef3493a263b17b2315a36e394a45fd48/23266/grafana-dashboard-variables.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 101.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACmUlEQVQ4y4VT23KbMBTk2QYbzEVcJEASiKvBwSa2EzfpQ7+g7Vsf2///hizGkyadZDqzoxFIy56zZ9Huj4/H0+PpfDk/fOn6gTJOWUpZEtH4uiZhxIKA+gElfuh5geMS2/E2tmNZjpbnxRVlyqUfRHHMlao4z5JU2LYHOA5A5r1tuxtgc4NW18043nfdTso8iuIsK5qmEyKXUhESApOaQ1zXB17fzNDAGcdj1+9kpkBWqhZC4WAS2Uy1ET9KU0lRf8hmQXzrRi7z7LA/7HZ7tOq5flV1TXsXhtRxHNO0dF0HZzccWcxt29F1Y7nUTXNzI6ssHw8jqmVs+jYUYBL69DwfgAjcihOBN5Zlo5x5RQsTGbTT6aHr71A/pSi7GsczKkdv+BBW07RD+BgL36dBSKGRJAIyV2VVXJ6egapugiAqy+2wPwlZ4gaOhMh8P4SF225QRZOrUggZRRRFWdZGk2nWZE2jWsVVGNCiaKq6S7hCk65L0HwYRrjqup5PAkLQiLtYLBcLfbk0tPRS5X/G4vdR/OyRB1W0ZdVxAc0ctNVqjatwCLZjRQvYzAMHNNEX+++X04+v6mmLnhlLkRPGOLqK4xSNvY73LW5u81hWsq5Qe4KQsKKoh+FeFTW8uQaDzPwPoSGVCRdJyoXMYFhRtueH53Y7QD/wp6hc4/kxtDQVsJRziRX2wFukGsAPgGPkaW7PfhPp+eWUbZDBnMlQzlXV7/Z1vW3arq5blZdVNY0QVs1pnTHv/5IREsgiDIh3GE3xwHjWa+tq8sf4V5khijLHHrOdJwT+Z3inTEiQRKJvhqbtkZauR/0dwmwY69XKxMzfYHp8T8ZUahodpW6sDH0NDqDrq8/wjuw5hH0r1a/DwjCWC/x9/8EL29OC/K/uEswAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ef3493a263b17b2315a36e394a45fd48/8ac56/grafana-dashboard-variables.webp 240w,\n/static/ef3493a263b17b2315a36e394a45fd48/d3be9/grafana-dashboard-variables.webp 480w,\n/static/ef3493a263b17b2315a36e394a45fd48/e5eeb/grafana-dashboard-variables.webp 923w\"\n              sizes=\"(max-width: 923px) 100vw, 923px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ef3493a263b17b2315a36e394a45fd48/8ff5a/grafana-dashboard-variables.png 240w,\n/static/ef3493a263b17b2315a36e394a45fd48/e85cb/grafana-dashboard-variables.png 480w,\n/static/ef3493a263b17b2315a36e394a45fd48/23266/grafana-dashboard-variables.png 923w\"\n            sizes=\"(max-width: 923px) 100vw, 923px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ef3493a263b17b2315a36e394a45fd48/23266/grafana-dashboard-variables.png\"\n            alt=\"grafana dashboard variables\"\n            title=\"grafana dashboard variables\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h1 id=\"7-todo\" style=\"position:relative;\"><a href=\"#7-todo\" aria-label=\"7 todo permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. TODO</h1>\n<p>囿于当前使用的深度及项目调研的时间限制，有部分内容做的还不够深入，后续可以考虑补全：</p>\n<ul>\n<li>Grafana本身的性能，应该如何衡量</li>\n<li>Grafana暴露出来的<a href=\"#ID_APP_SELF_METRICS\">Metrics</a>需要仔细研究下</li>\n<li>所有的图表全部尝试一遍</li>\n<li>热力图的应用范围及实际使用范例</li>\n<li>常用 &#x26; 有用的插件列表整理</li>\n<li>ELK整合使用必要性调研，Kibana是否够用，是否有必要使用Grafana作为ELK的前台UI</li>\n<li>ELK结合使用范例</li>\n</ul>\n<h1 id=\"8-写在最后\" style=\"position:relative;\"><a href=\"#8-%E5%86%99%E5%9C%A8%E6%9C%80%E5%90%8E\" aria-label=\"8 写在最后 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8. 写在最后</h1>\n<p>了解Metrics的含义才是最关键的，就像我在写Prometheus Notes说的，很多exporter会吐出巨量的Metrics数据，你都了解这些Metrics代表的意义吗？如果不了解的话，那些数据即便采集进去了，你又会去用了？说到底Prometheus和Grafana不过就是个工具，关键还是在于工程师想要了解什么，对自己的系统的监控需求是什么。</p>\n<p>监控相关工作的第一步是梳理当前系统的组成组件，将每一个都列出来，将它们负责的职责明确清楚，然后将需要监控的Metrics都枚举出来，将这些Metrics需要做成的表类型都想清楚，最后才是使用Prometheus采集数据，使用Grafana制图。</p>\n<p>和写代码一样，优秀的工程师花的更多的时间是在思考和设计上，而不是实际的编写代码。如果不理解这点，那就永远只能是二流。</p>\n<h1 id=\"资料\" style=\"position:relative;\"><a href=\"#%E8%B5%84%E6%96%99\" aria-label=\"资料 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>资料</h1>\n<h2 id=\"链接\" style=\"position:relative;\"><a href=\"#%E9%93%BE%E6%8E%A5\" aria-label=\"链接 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>链接</h2>\n<ul>\n<li><a href=\"https://github.com/grafana/grafana/issues/9877\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">How to create new user roles? #9877</a></li>\n<li><a href=\"https://elkguide.elasticsearch.cn/elasticsearch/other/grafana.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ELKstack 中文指南 > Grafana</a></li>\n<li><a href=\"https://kiswo.com/article/1021\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Grafana使用</a></li>\n<li><a href=\"https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/grafana/grafana-panels\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Grafana与数据可视化</a></li>\n</ul>\n<h2 id=\"grafana--h-idappgrafana_help\" style=\"position:relative;\"><a href=\"#grafana--h-idappgrafana_help\" aria-label=\"grafana  h idappgrafana_help permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>grafana -h {#ID<em>APP</em>GRAFANA_HELP}</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ ./bin/grafana-server -h\nUsage of ./bin/grafana-server:\n  -config string\n    \tpath to config file\n  -homepath string\n    \tpath to grafana install/home path, defaults to working directory\n  -packaging string\n    \tdescribes the way Grafana was installed (default \"unknown\")\n  -pidfile string\n    \tpath to pid file\n  -profile\n    \tTurn on pprof profiling\n  -profile-port int\n    \tDefine custom port for profiling (default 6060)\n  -test.bench regexp\n    \trun only benchmarks matching regexp\n  -test.benchmem\n    \tprint memory allocations for benchmarks\n  -test.benchtime d\n    \trun each benchmark for duration d (default 1s)\n  -test.blockprofile file\n    \twrite a goroutine blocking profile to file\n  -test.blockprofilerate rate\n    \tset blocking profile rate (see runtime.SetBlockProfileRate) (default 1)\n  -test.count n\n    \trun tests and benchmarks n times (default 1)\n  -test.coverprofile file\n    \twrite a coverage profile to file\n  -test.cpu list\n    \tcomma-separated list of cpu counts to run each test with\n  -test.cpuprofile file\n    \twrite a cpu profile to file\n  -test.failfast\n    \tdo not start new tests after the first test failure\n  -test.list regexp\n    \tlist tests, examples, and benchmarks matching regexp then exit\n  -test.memprofile file\n    \twrite an allocation profile to file\n  -test.memprofilerate rate\n    \tset memory allocation profiling rate (see runtime.MemProfileRate)\n  -test.mutexprofile string\n    \twrite a mutex contention profile to the named file after execution\n  -test.mutexprofilefraction int\n    \tif >= 0, calls runtime.SetMutexProfileFraction() (default 1)\n  -test.outputdir dir\n    \twrite profiles to dir\n  -test.parallel n\n    \trun at most n tests in parallel (default 8)\n  -test.run regexp\n    \trun only tests and examples matching regexp\n  -test.short\n    \trun smaller test suite to save time\n  -test.testlogfile file\n    \twrite test action log to file (for use only by cmd/go)\n  -test.timeout d\n    \tpanic test binary after duration d (default 0, timeout disabled)\n  -test.trace file\n    \twrite an execution trace to file\n  -test.v\n    \tverbose: print additional output\n  -v\tprints current version and exits</code></pre></div>\n<h2 id=\"grafanametrics-idappself_metrics\" style=\"position:relative;\"><a href=\"#grafanametrics-idappself_metrics\" aria-label=\"grafanametrics idappself_metrics permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>grafana/metrics {#ID<em>APP</em>SELF_METRICS}</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># HELP grafana_alerting_active_alerts amount of active alerts</span>\n<span class=\"token comment\"># TYPE grafana_alerting_active_alerts gauge</span>\ngrafana_alerting_active_alerts <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_alerting_execution_time_milliseconds summary of alert exeuction duration</span>\n<span class=\"token comment\"># TYPE grafana_alerting_execution_time_milliseconds summary</span>\ngrafana_alerting_execution_time_milliseconds<span class=\"token punctuation\">{</span>quantile<span class=\"token operator\">=</span><span class=\"token string\">\"0.5\"</span><span class=\"token punctuation\">}</span> NaN\ngrafana_alerting_execution_time_milliseconds<span class=\"token punctuation\">{</span>quantile<span class=\"token operator\">=</span><span class=\"token string\">\"0.9\"</span><span class=\"token punctuation\">}</span> NaN\ngrafana_alerting_execution_time_milliseconds<span class=\"token punctuation\">{</span>quantile<span class=\"token operator\">=</span><span class=\"token string\">\"0.99\"</span><span class=\"token punctuation\">}</span> NaN\ngrafana_alerting_execution_time_milliseconds_sum <span class=\"token number\">0</span>\ngrafana_alerting_execution_time_milliseconds_count <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_api_admin_user_created_total api admin user created counter</span>\n<span class=\"token comment\"># TYPE grafana_api_admin_user_created_total counter</span>\ngrafana_api_admin_user_created_total <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_api_dashboard_get_milliseconds summary for dashboard get duration</span>\n<span class=\"token comment\"># TYPE grafana_api_dashboard_get_milliseconds summary</span>\ngrafana_api_dashboard_get_milliseconds<span class=\"token punctuation\">{</span>quantile<span class=\"token operator\">=</span><span class=\"token string\">\"0.5\"</span><span class=\"token punctuation\">}</span> NaN\ngrafana_api_dashboard_get_milliseconds<span class=\"token punctuation\">{</span>quantile<span class=\"token operator\">=</span><span class=\"token string\">\"0.9\"</span><span class=\"token punctuation\">}</span> NaN\ngrafana_api_dashboard_get_milliseconds<span class=\"token punctuation\">{</span>quantile<span class=\"token operator\">=</span><span class=\"token string\">\"0.99\"</span><span class=\"token punctuation\">}</span> NaN\ngrafana_api_dashboard_get_milliseconds_sum <span class=\"token number\">0</span>\ngrafana_api_dashboard_get_milliseconds_count <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_api_dashboard_save_milliseconds summary for dashboard save duration</span>\n<span class=\"token comment\"># TYPE grafana_api_dashboard_save_milliseconds summary</span>\ngrafana_api_dashboard_save_milliseconds<span class=\"token punctuation\">{</span>quantile<span class=\"token operator\">=</span><span class=\"token string\">\"0.5\"</span><span class=\"token punctuation\">}</span> NaN\ngrafana_api_dashboard_save_milliseconds<span class=\"token punctuation\">{</span>quantile<span class=\"token operator\">=</span><span class=\"token string\">\"0.9\"</span><span class=\"token punctuation\">}</span> NaN\ngrafana_api_dashboard_save_milliseconds<span class=\"token punctuation\">{</span>quantile<span class=\"token operator\">=</span><span class=\"token string\">\"0.99\"</span><span class=\"token punctuation\">}</span> NaN\ngrafana_api_dashboard_save_milliseconds_sum <span class=\"token number\">0</span>\ngrafana_api_dashboard_save_milliseconds_count <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_api_dashboard_search_milliseconds summary for dashboard search duration</span>\n<span class=\"token comment\"># TYPE grafana_api_dashboard_search_milliseconds summary</span>\ngrafana_api_dashboard_search_milliseconds<span class=\"token punctuation\">{</span>quantile<span class=\"token operator\">=</span><span class=\"token string\">\"0.5\"</span><span class=\"token punctuation\">}</span> NaN\ngrafana_api_dashboard_search_milliseconds<span class=\"token punctuation\">{</span>quantile<span class=\"token operator\">=</span><span class=\"token string\">\"0.9\"</span><span class=\"token punctuation\">}</span> NaN\ngrafana_api_dashboard_search_milliseconds<span class=\"token punctuation\">{</span>quantile<span class=\"token operator\">=</span><span class=\"token string\">\"0.99\"</span><span class=\"token punctuation\">}</span> NaN\ngrafana_api_dashboard_search_milliseconds_sum <span class=\"token number\">0</span>\ngrafana_api_dashboard_search_milliseconds_count <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_api_dashboard_snapshot_create_total dashboard snapshots created</span>\n<span class=\"token comment\"># TYPE grafana_api_dashboard_snapshot_create_total counter</span>\ngrafana_api_dashboard_snapshot_create_total <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_api_dashboard_snapshot_external_total external dashboard snapshots created</span>\n<span class=\"token comment\"># TYPE grafana_api_dashboard_snapshot_external_total counter</span>\ngrafana_api_dashboard_snapshot_external_total <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_api_dashboard_snapshot_get_total loaded dashboards</span>\n<span class=\"token comment\"># TYPE grafana_api_dashboard_snapshot_get_total counter</span>\ngrafana_api_dashboard_snapshot_get_total <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_api_dataproxy_request_all_milliseconds summary for dataproxy request duration</span>\n<span class=\"token comment\"># TYPE grafana_api_dataproxy_request_all_milliseconds summary</span>\ngrafana_api_dataproxy_request_all_milliseconds<span class=\"token punctuation\">{</span>quantile<span class=\"token operator\">=</span><span class=\"token string\">\"0.5\"</span><span class=\"token punctuation\">}</span> NaN\ngrafana_api_dataproxy_request_all_milliseconds<span class=\"token punctuation\">{</span>quantile<span class=\"token operator\">=</span><span class=\"token string\">\"0.9\"</span><span class=\"token punctuation\">}</span> NaN\ngrafana_api_dataproxy_request_all_milliseconds<span class=\"token punctuation\">{</span>quantile<span class=\"token operator\">=</span><span class=\"token string\">\"0.99\"</span><span class=\"token punctuation\">}</span> NaN\ngrafana_api_dataproxy_request_all_milliseconds_sum <span class=\"token number\">0</span>\ngrafana_api_dataproxy_request_all_milliseconds_count <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_api_login_oauth_total api login oauth counter</span>\n<span class=\"token comment\"># TYPE grafana_api_login_oauth_total counter</span>\ngrafana_api_login_oauth_total <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_api_login_post_total api login post counter</span>\n<span class=\"token comment\"># TYPE grafana_api_login_post_total counter</span>\ngrafana_api_login_post_total <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_api_models_dashboard_insert_total dashboards inserted </span>\n<span class=\"token comment\"># TYPE grafana_api_models_dashboard_insert_total counter</span>\ngrafana_api_models_dashboard_insert_total <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_api_org_create_total api org created counter</span>\n<span class=\"token comment\"># TYPE grafana_api_org_create_total counter</span>\ngrafana_api_org_create_total <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_api_response_status_total api http response status</span>\n<span class=\"token comment\"># TYPE grafana_api_response_status_total counter</span>\ngrafana_api_response_status_total<span class=\"token punctuation\">{</span>code<span class=\"token operator\">=</span><span class=\"token string\">\"200\"</span><span class=\"token punctuation\">}</span> <span class=\"token number\">0</span>\ngrafana_api_response_status_total<span class=\"token punctuation\">{</span>code<span class=\"token operator\">=</span><span class=\"token string\">\"404\"</span><span class=\"token punctuation\">}</span> <span class=\"token number\">0</span>\ngrafana_api_response_status_total<span class=\"token punctuation\">{</span>code<span class=\"token operator\">=</span><span class=\"token string\">\"500\"</span><span class=\"token punctuation\">}</span> <span class=\"token number\">0</span>\ngrafana_api_response_status_total<span class=\"token punctuation\">{</span>code<span class=\"token operator\">=</span><span class=\"token string\">\"unknown\"</span><span class=\"token punctuation\">}</span> <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_api_user_signup_completed_total amount of users who completed the signup flow</span>\n<span class=\"token comment\"># TYPE grafana_api_user_signup_completed_total counter</span>\ngrafana_api_user_signup_completed_total <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_api_user_signup_invite_total amount of users who have been invited</span>\n<span class=\"token comment\"># TYPE grafana_api_user_signup_invite_total counter</span>\ngrafana_api_user_signup_invite_total <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_api_user_signup_started_total amount of users who started the signup flow</span>\n<span class=\"token comment\"># TYPE grafana_api_user_signup_started_total counter</span>\ngrafana_api_user_signup_started_total <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_aws_cloudwatch_get_metric_data_total counter for getting metric data time series from aws</span>\n<span class=\"token comment\"># TYPE grafana_aws_cloudwatch_get_metric_data_total counter</span>\ngrafana_aws_cloudwatch_get_metric_data_total <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_aws_cloudwatch_get_metric_statistics_total counter for getting metric statistics from aws</span>\n<span class=\"token comment\"># TYPE grafana_aws_cloudwatch_get_metric_statistics_total counter</span>\ngrafana_aws_cloudwatch_get_metric_statistics_total <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_aws_cloudwatch_list_metrics_total counter for getting list of metrics from aws</span>\n<span class=\"token comment\"># TYPE grafana_aws_cloudwatch_list_metrics_total counter</span>\ngrafana_aws_cloudwatch_list_metrics_total <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_build_info A metric with a constant '1' value labeled by version, revision, branch, and goversion from which Grafana was built.</span>\n<span class=\"token comment\"># TYPE grafana_build_info gauge</span>\ngrafana_build_info<span class=\"token punctuation\">{</span>branch<span class=\"token operator\">=</span><span class=\"token string\">\"HEAD\"</span>,edition<span class=\"token operator\">=</span><span class=\"token string\">\"oss\"</span>,goversion<span class=\"token operator\">=</span><span class=\"token string\">\"go1.11.5\"</span>,revision<span class=\"token operator\">=</span><span class=\"token string\">\"de8f6ac\"</span>,version<span class=\"token operator\">=</span><span class=\"token string\">\"6.1.2\"</span><span class=\"token punctuation\">}</span> <span class=\"token number\">1</span>\n<span class=\"token comment\"># HELP grafana_db_datasource_query_by_id_total counter for getting datasource by id</span>\n<span class=\"token comment\"># TYPE grafana_db_datasource_query_by_id_total counter</span>\ngrafana_db_datasource_query_by_id_total <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_info Information about the Grafana. This metric is deprecated. please use `grafana_build_info`</span>\n<span class=\"token comment\"># TYPE grafana_info gauge</span>\ngrafana_info<span class=\"token punctuation\">{</span>version<span class=\"token operator\">=</span><span class=\"token string\">\"6.1.2\"</span><span class=\"token punctuation\">}</span> <span class=\"token number\">1</span>\n<span class=\"token comment\"># HELP grafana_instance_start_total counter for started instances</span>\n<span class=\"token comment\"># TYPE grafana_instance_start_total counter</span>\ngrafana_instance_start_total <span class=\"token number\">1</span>\n<span class=\"token comment\"># HELP grafana_page_response_status_total page http response status</span>\n<span class=\"token comment\"># TYPE grafana_page_response_status_total counter</span>\ngrafana_page_response_status_total<span class=\"token punctuation\">{</span>code<span class=\"token operator\">=</span><span class=\"token string\">\"200\"</span><span class=\"token punctuation\">}</span> <span class=\"token number\">0</span>\ngrafana_page_response_status_total<span class=\"token punctuation\">{</span>code<span class=\"token operator\">=</span><span class=\"token string\">\"404\"</span><span class=\"token punctuation\">}</span> <span class=\"token number\">0</span>\ngrafana_page_response_status_total<span class=\"token punctuation\">{</span>code<span class=\"token operator\">=</span><span class=\"token string\">\"500\"</span><span class=\"token punctuation\">}</span> <span class=\"token number\">0</span>\ngrafana_page_response_status_total<span class=\"token punctuation\">{</span>code<span class=\"token operator\">=</span><span class=\"token string\">\"unknown\"</span><span class=\"token punctuation\">}</span> <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_proxy_response_status_total proxy http response status</span>\n<span class=\"token comment\"># TYPE grafana_proxy_response_status_total counter</span>\ngrafana_proxy_response_status_total<span class=\"token punctuation\">{</span>code<span class=\"token operator\">=</span><span class=\"token string\">\"200\"</span><span class=\"token punctuation\">}</span> <span class=\"token number\">0</span>\ngrafana_proxy_response_status_total<span class=\"token punctuation\">{</span>code<span class=\"token operator\">=</span><span class=\"token string\">\"404\"</span><span class=\"token punctuation\">}</span> <span class=\"token number\">0</span>\ngrafana_proxy_response_status_total<span class=\"token punctuation\">{</span>code<span class=\"token operator\">=</span><span class=\"token string\">\"500\"</span><span class=\"token punctuation\">}</span> <span class=\"token number\">0</span>\ngrafana_proxy_response_status_total<span class=\"token punctuation\">{</span>code<span class=\"token operator\">=</span><span class=\"token string\">\"unknown\"</span><span class=\"token punctuation\">}</span> <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_stat_active_users number of active users</span>\n<span class=\"token comment\"># TYPE grafana_stat_active_users gauge</span>\ngrafana_stat_active_users <span class=\"token number\">1</span>\n<span class=\"token comment\"># HELP grafana_stat_total_orgs total amount of orgs</span>\n<span class=\"token comment\"># TYPE grafana_stat_total_orgs gauge</span>\ngrafana_stat_total_orgs <span class=\"token number\">1</span>\n<span class=\"token comment\"># HELP grafana_stat_total_playlists total amount of playlists</span>\n<span class=\"token comment\"># TYPE grafana_stat_total_playlists gauge</span>\ngrafana_stat_total_playlists <span class=\"token number\">0</span>\n<span class=\"token comment\"># HELP grafana_stat_total_users total amount of users</span>\n<span class=\"token comment\"># TYPE grafana_stat_total_users gauge</span>\ngrafana_stat_total_users <span class=\"token number\">1</span>\n<span class=\"token comment\"># HELP grafana_stat_totals_dashboard total amount of dashboards</span>\n<span class=\"token comment\"># TYPE grafana_stat_totals_dashboard gauge</span>\ngrafana_stat_totals_dashboard <span class=\"token number\">0</span></code></pre></div>\n<blockquote>\n<p>EOF</p>\n</blockquote>","fields":{"slug":"/posts/2019/04/grafana-note","tagSlugs":["/tag/grafana/","/tag/monitor/","/tag/metrics/","/tag/dev-ops/","/tag/keynote/"]},"frontmatter":{"date":"2019-04-11T02:01:22.000Z","description":"","tags":["Grafana","Monitor","Metrics","DevOps","Keynote"],"title":"Grafana Notes","socialImage":{"publicURL":"/static/7e722e026a41a08a8f9a1cc76782dd27/default-social-image.jpg"}}}},"pageContext":{"slug":"/posts/2019/04/grafana-note"}},"staticQueryHashes":["251939775","401334301","825871152"]}