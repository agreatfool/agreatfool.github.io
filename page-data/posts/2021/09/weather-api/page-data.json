{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/posts/2021/09/weather-api","result":{"data":{"markdownRemark":{"id":"284edf4b-65c8-50db-b828-690a5d540d12","html":"<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#1-%E5%89%8D%E8%A8%80\">1. 前言</a></li>\n<li><a href=\"#2-openweather\">2. OpenWeather</a></li>\n<li><a href=\"#3-nowapi\">3. Nowapi</a></li>\n</ul>\n</div>\n<h1 id=\"1-前言\" style=\"position:relative;\"><a href=\"#1-%E5%89%8D%E8%A8%80\" aria-label=\"1 前言 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 前言</h1>\n<p>平时做一些和生活、日常应用相关的功能时，偶尔会有些需要获取天气信息的功能。所以简单了解了点天气相关的API。之前在知乎上搜了下，找到一个topic：<a href=\"https://www.zhihu.com/question/20575288\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">网上的天气 API 哪一个更加可靠？</a>。</p>\n<p>不过总感觉国内的API一般都不咋的，所以兴趣不大，也没怎么尝试。下面简单介绍下尝试过的两个。</p>\n<h1 id=\"2-openweather\" style=\"position:relative;\"><a href=\"#2-openweather\" aria-label=\"2 openweather permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. OpenWeather</h1>\n<p>国外推荐使用这个：<a href=\"https://openweathermap.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">OpenWeather</a>。注册之后就会获得token / API Key，基本上调用API也只需要这个token。</p>\n<p>价格：<a href=\"https://openweathermap.org/price\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Pricing</a>。免费版的账号限制：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">60 calls/minute\n1,000,000 calls/month</code></pre></div>\n<p>而且免费版的账号有一些API是无法调用的，比如说查询历史天气信息。</p>\n<p>可供使用的API清单：<a href=\"https://openweathermap.org/api\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Weather API</a>。基本上和天气相关你想得到的，都能得到满足。下面会举几个常用的API例子，注意所有的API返回的温度都是开氏温度，需要提供如下参数才可以转为摄氏温度：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">name</th>\n<th align=\"left\">mandatory</th>\n<th align=\"left\">description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">units</td>\n<td align=\"left\">optional</td>\n<td align=\"left\">Units of measurement. standard, metric and imperial units are available. If you do not use the units parameter, standard units will be applied by default.</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>Temperature is available in Fahrenheit, Celsius and Kelvin units.</p>\n<ul>\n<li>For temperature in Fahrenheit use units=imperial</li>\n<li>For temperature in <code class=\"language-text\">Celsius</code> use units=<code class=\"language-text\">metric</code></li>\n<li>Temperature in Kelvin is used by default, no need to use units parameter in API call</li>\n</ul>\n</blockquote>\n<p><strong>Current Weather Data</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> <span class=\"token string\">\"https://api.openweathermap.org/data/2.5/weather?q={city name}&amp;appid={API key}\"</span>\n\n$ <span class=\"token function\">curl</span> <span class=\"token string\">\"https://api.openweathermap.org/data/2.5/weather?q={city name},{state code}&amp;appid={API key}\"</span>\n\n$ <span class=\"token function\">curl</span> <span class=\"token string\">\"https://api.openweathermap.org/data/2.5/weather?q={city name},{state code},{country code}&amp;appid={API key}\"</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"coord\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"lon\"</span><span class=\"token operator\">:</span> <span class=\"token number\">-122.08</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"lat\"</span><span class=\"token operator\">:</span> <span class=\"token number\">37.39</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"weather\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">800</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Clear\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"clear sky\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"01d\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"base\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"stations\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"temp\"</span><span class=\"token operator\">:</span> <span class=\"token number\">282.55</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"feels_like\"</span><span class=\"token operator\">:</span> <span class=\"token number\">281.86</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"temp_min\"</span><span class=\"token operator\">:</span> <span class=\"token number\">280.37</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"temp_max\"</span><span class=\"token operator\">:</span> <span class=\"token number\">284.26</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"pressure\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1023</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"humidity\"</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"visibility\"</span><span class=\"token operator\">:</span> <span class=\"token number\">16093</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"wind\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"speed\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1.5</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"deg\"</span><span class=\"token operator\">:</span> <span class=\"token number\">350</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"clouds\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"all\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"dt\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1560350645</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"sys\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">5122</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0.0139</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"country\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"US\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"sunrise\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1560343627</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"sunset\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1560396563</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"timezone\"</span><span class=\"token operator\">:</span> <span class=\"token number\">-25200</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">420006353</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Mountain View\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"cod\"</span><span class=\"token operator\">:</span> <span class=\"token number\">200</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Historical weather API</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> <span class=\"token string\">\"https://history.openweathermap.org/data/2.5/history/city?q={city ID},{country code}&amp;type=hour&amp;start={start}&amp;end={end}&amp;appid={API key}\"</span>\n\n$ <span class=\"token function\">curl</span> <span class=\"token string\">\"https://history.openweathermap.org/data/2.5/history/city?q={city ID},{country code}&amp;type=hour&amp;start={start}&amp;cnt={cnt}&amp;appid={API key}\"</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"cod\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"200\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"city_id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2885679</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"calctime\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0.0823</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"cnt\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"list\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"temp\"</span><span class=\"token operator\">:</span> <span class=\"token number\">266.052</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"temp_min\"</span><span class=\"token operator\">:</span> <span class=\"token number\">266.052</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"temp_max\"</span><span class=\"token operator\">:</span> <span class=\"token number\">266.052</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"pressure\"</span><span class=\"token operator\">:</span> <span class=\"token number\">957.86</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"sea_level\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1039.34</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"grnd_level\"</span><span class=\"token operator\">:</span> <span class=\"token number\">957.86</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"humidity\"</span><span class=\"token operator\">:</span> <span class=\"token number\">90</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"wind\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"speed\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1.16</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"deg\"</span><span class=\"token operator\">:</span> <span class=\"token number\">139.502</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"clouds\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"all\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"weather\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">800</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Clear\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Sky is Clear\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"01n\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"dt\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1485722804</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"temp\"</span><span class=\"token operator\">:</span> <span class=\"token number\">263.847</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"temp_min\"</span><span class=\"token operator\">:</span> <span class=\"token number\">263.847</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"temp_max\"</span><span class=\"token operator\">:</span> <span class=\"token number\">263.847</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"pressure\"</span><span class=\"token operator\">:</span> <span class=\"token number\">955.78</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"sea_level\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1037.43</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"grnd_level\"</span><span class=\"token operator\">:</span> <span class=\"token number\">955.78</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"humidity\"</span><span class=\"token operator\">:</span> <span class=\"token number\">91</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"wind\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"speed\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1.49</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"deg\"</span><span class=\"token operator\">:</span> <span class=\"token number\">159</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"clouds\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"all\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"weather\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">800</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Clear\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Sky is Clear\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"01n\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"dt\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1485749608</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"temp\"</span><span class=\"token operator\">:</span> <span class=\"token number\">274.9</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"pressure\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1019</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"temp_min\"</span><span class=\"token operator\">:</span> <span class=\"token number\">274.15</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"temp_max\"</span><span class=\"token operator\">:</span> <span class=\"token number\">275.15</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"humidity\"</span><span class=\"token operator\">:</span> <span class=\"token number\">88</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"wind\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"speed\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"deg\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"clouds\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"all\"</span><span class=\"token operator\">:</span> <span class=\"token number\">76</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"weather\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Rain\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"light rain\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"10d\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"dt\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1485773778</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"3-nowapi\" style=\"position:relative;\"><a href=\"#3-nowapi\" aria-label=\"3 nowapi permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Nowapi</h1>\n<p>偶然搜到的这个API，国内公司。准确度暂时没有认真校对过，这个存疑，有需要用的需要认真看下。</p>\n<p>这家公司做的API还相当多，全部列表在这里：<a href=\"https://www.nowapi.com/api\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Nowapi</a>。</p>\n<p>天气API主要有下面这几个接口：</p>\n<ul>\n<li>天气预报(整合版)</li>\n<li>天气预报(5-7天)</li>\n<li>实时天气</li>\n<li>实时天气(批量)</li>\n<li>历史天气</li>\n<li>PM2.5</li>\n<li>AQI生活指数(5-7天)</li>\n<li>城市列表天气类型</li>\n</ul>\n<p>注册账号之后在后台就可以看到自己的<code class=\"language-text\">AppKey</code>和<code class=\"language-text\">Sign</code>，这两个是用来调API的。</p>\n<p>付费方面主要有两种形式：</p>\n<ol>\n<li>按API调用频次分价格段的包月</li>\n<li>按API实际使用次数购买次数</li>\n</ol>\n<p>价格可以说相当亲民，轻度使用￥10买个15000次可以用很久了。</p>\n<p><strong>包月</strong>\n<img src=\"/media/posts/2021/09/weather-api/nowapi-time.png\" alt=\"\"></p>\n<p><strong>买次数</strong>\n<img src=\"/media/posts/2021/09/weather-api/nowapi-count.png\" alt=\"\"></p>\n<p>选两个API看下：</p>\n<p><strong>实时天气</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> https://sapi.k780.com/?app<span class=\"token operator\">=</span>weather.today<span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">weaId</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">appkey</span><span class=\"token operator\">=</span><span class=\"token number\">10003</span><span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">sign</span><span class=\"token operator\">=</span>b59bc3ef6191eb9f747dd4e83c99f2a4<span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">format</span><span class=\"token operator\">=</span>json <span class=\"token punctuation\">(</span>示例中sign会不定期调整<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"success\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"result\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"weaid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"days\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2014-07-30\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"week\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"星期三\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"cityno\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"beijing\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"citynm\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"北京\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"cityid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"101010100\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"temperature\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"31℃/24℃\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*当日温度区间 (注: 夜间只有一个温度如24℃/24℃)*/</span>\n    <span class=\"token property\">\"temperature_curr\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"21℃\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*当前温度*/</span>\n    <span class=\"token property\">\"humidity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"50%\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*湿度*/</span>\n    <span class=\"token property\">\"aqi\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"100\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*pm2.5 说明详见weather.pm25*/</span>\n    <span class=\"token property\">\"weather\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"多云转晴\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*天气*/</span>\n    <span class=\"token property\">\"weather_icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://api.k780.com/upload/weather/d/1.gif\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*气象图标 全部气象图标下载*/</span>\n    <span class=\"token property\">\"weather_icon1\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*无意义不必理会*/</span>\n    <span class=\"token property\">\"wind\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"微风\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*风向*/</span>\n    <span class=\"token property\">\"winp\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"小于3级\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*风力*/</span>\n    <span class=\"token property\">\"temp_high\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"31\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*最高温度*/</span>\n    <span class=\"token property\">\"temp_low\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"24\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*最低温度*/</span>\n    <span class=\"token property\">\"humi_high\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"87.8\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*最大湿度 [历史遗留栏位不再更新]*/</span>\n    <span class=\"token property\">\"humi_low\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"75.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*最小湿度 [历史遗留栏位不再更新]*/</span>\n    <span class=\"token property\">\"weatid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*天气ID，可对照weather.wtype接口中weaid*/</span>\n    <span class=\"token property\">\"weatid1\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*无意义不必理会*/</span>\n    <span class=\"token property\">\"windid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/*风向ID(暂无对照表)*/</span>\n    <span class=\"token property\">\"winpid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2\"</span>\n    <span class=\"token comment\">/*风力ID(暂无对照表)*/</span>\n    <span class=\"token property\">\"weather_iconid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span>\n    <span class=\"token comment\">/*气象图标编号,对应weather_icon 1.gif*/</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>历史天气</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> https://sapi.k780.com/?app<span class=\"token operator\">=</span>weather.history<span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">weaId</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">date</span><span class=\"token operator\">=</span><span class=\"token number\">2015</span>-07-20<span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">appkey</span><span class=\"token operator\">=</span><span class=\"token number\">10003</span><span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">sign</span><span class=\"token operator\">=</span>b59bc3ef6191eb9f747dd4e83c99f2a4<span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">format</span><span class=\"token operator\">=</span>json</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"success\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"result\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"weaid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"week\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"星期一\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"cityno\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"beijing\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"citynm\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"北京\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"cityid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"101010100\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">/*气象编号*/</span>\n      <span class=\"token property\">\"uptime\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2015-07-20 00:50:00\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">/*更新时间*/</span>\n      <span class=\"token property\">\"temperature\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"22℃\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">/*该时段温度*/</span>\n      <span class=\"token property\">\"humidity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"97%\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">/*该时段湿度*/</span>\n      <span class=\"token property\">\"aqi\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"101\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">/*PM2.5 AQI*/</span>\n      <span class=\"token property\">\"weather\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"晴\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">/*该时段天气*/</span>\n      <span class=\"token property\">\"weather_icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://api.k780.com/upload/weather/d/0.gif\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">/*时段气象图标 全部气象图标下载*/</span>\n      <span class=\"token property\">\"wind\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"东北风\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">/*该时段风向*/</span>\n      <span class=\"token property\">\"winp\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1级\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">/*该时段风力*/</span>\n      <span class=\"token property\">\"temp\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"22\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">/*温度*/</span>\n      <span class=\"token property\">\"weatid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">/*天气编号*/</span>\n      <span class=\"token property\">\"windid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"13\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">/*风向编号*/</span>\n      <span class=\"token property\">\"winpid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"201\"</span>\n      <span class=\"token comment\">/*风力编号*/</span>\n      <span class=\"token property\">\"weather_iconid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span>\n      <span class=\"token comment\">/*气象图标编号,对应weather_icon 0.gif*/</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"weaid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"week\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"星期一\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"cityno\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"beijing\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"citynm\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"北京\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"cityid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"101010100\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"uptime\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2015-07-20 01:50:00\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"temperature\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"22℃\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"humidity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"99%\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"aqi\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"101\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"weather\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"晴\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"weather_icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://api.k780.com/upload/weather/d/0.gif\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"wind\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"东北风\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"winp\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1级\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"temp\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"22\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"weatid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"windid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"13\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"winpid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"201\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>EOF</p>\n</blockquote>","fields":{"slug":"/posts/2021/09/weather-api","tagSlugs":["/tag/api/","/tag/weather/"]},"frontmatter":{"date":"2021-09-25T02:02:22.000Z","description":"一些关于天气的API","tags":["API","Weather"],"title":"Weather API","socialImage":"/media/default-social-image.jpg"}},"allFile":{"totalCount":0,"nodes":[]}},"pageContext":{"slug":"/posts/2021/09/weather-api","gallery":"media/posts/2021/09/weather-api/gallery"}},"staticQueryHashes":["251939775","357378587","401334301"]}